!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).arcana=t.arcana||{},t.arcana.auth={}))}(this,(function(t){"use strict";function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(r){if("default"!==r&&!(r in t)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}))})),Object.freeze(t)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function r(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var s={},a={},u=p;p.default=p,p.stable=w,p.stableStringify=w;var c="[...]",h="[Circular]",l=[],d=[];function f(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function p(t,e,r,n){var i;void 0===n&&(n=f()),m(t,"",0,[],void 0,0,n);try{i=0===d.length?JSON.stringify(t,e,r):JSON.stringify(t,v(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==l.length;){var o=l.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function g(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:t}),l.push([n,r,e,i])):d.push([e,r,t]):(n[r]=t,l.push([n,r,e]))}function m(t,e,r,n,i,o,s){var a;if(o+=1,"object"==typeof t&&null!==t){for(a=0;a<n.length;a++)if(n[a]===t)return void g(h,t,e,i);if(void 0!==s.depthLimit&&o>s.depthLimit)return void g(c,t,e,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void g(c,t,e,i);if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)m(t[a],a,a,n,t,o,s);else{var u=Object.keys(t);for(a=0;a<u.length;a++){var l=u[a];m(t[l],l,a,n,t,o,s)}}n.pop()}}function y(t,e){return t<e?-1:t>e?1:0}function w(t,e,r,n){void 0===n&&(n=f());var i,o=b(t,"",0,[],void 0,0,n)||t;try{i=0===d.length?JSON.stringify(o,e,r):JSON.stringify(o,v(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==l.length;){var s=l.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function b(t,e,r,n,i,o,s){var a;if(o+=1,"object"==typeof t&&null!==t){for(a=0;a<n.length;a++)if(n[a]===t)return void g(h,t,e,i);try{if("function"==typeof t.toJSON)return}catch(t){return}if(void 0!==s.depthLimit&&o>s.depthLimit)return void g(c,t,e,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void g(c,t,e,i);if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)b(t[a],a,a,n,t,o,s);else{var u={},d=Object.keys(t).sort(y);for(a=0;a<d.length;a++){var f=d[a];b(t[f],f,a,n,t,o,s),u[f]=t[f]}if(void 0===i)return u;l.push([i,e,t]),i[e]=u}n.pop()}}function v(t){return t=void 0!==t?t:function(t,e){return e},function(e,r){if(d.length>0)for(var n=0;n<d.length;n++){var i=d[n];if(i[1]===e&&i[0]===r){r=i[2],d.splice(n,1);break}}return t.call(this,e,r)}}Object.defineProperty(a,"__esModule",{value:!0}),a.EthereumProviderError=a.EthereumRpcError=void 0;const _=u;class k extends Error{constructor(t,e,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||"string"!=typeof e)throw new Error('"message" must be a nonempty string.');super(e),this.code=t,void 0!==r&&(this.data=r)}serialize(){const t={code:this.code,message:this.message};return void 0!==this.data&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return _.default(this.serialize(),S,2)}}a.EthereumRpcError=k;function S(t,e){if("[Circular]"!==e)return e}a.EthereumProviderError=class extends k{constructor(t,e,r){if(!function(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,r)}};var E={},x={};Object.defineProperty(x,"__esModule",{value:!0}),x.errorValues=x.errorCodes=void 0,x.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},x.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=x,r=a,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};function s(r,n=i){if(Number.isInteger(r)){const n=r.toString();if(l(e.errorValues,n))return e.errorValues[n].message;if(c(r))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function u(t){if(!Number.isInteger(t))return!1;const r=t.toString();return!!e.errorValues[r]||!!c(t)}function c(t){return t>=-32099&&t<=-32e3}function h(t){return t&&"object"==typeof t&&!Array.isArray(t)?Object.assign({},t):t}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=u,t.serializeError=function(t,{fallbackError:e=o,shouldIncludeStack:n=!1}={}){var i,a;if(!e||!Number.isInteger(e.code)||"string"!=typeof e.message)throw new Error("Must provide fallback error with integer number code and string message.");if(t instanceof r.EthereumRpcError)return t.serialize();const c={};if(t&&"object"==typeof t&&!Array.isArray(t)&&l(t,"code")&&u(t.code)){const e=t;c.code=e.code,e.message&&"string"==typeof e.message?(c.message=e.message,l(e,"data")&&(c.data=e.data)):(c.message=s(c.code),c.data={originalError:h(t)})}else{c.code=e.code;const r=null===(i=t)||void 0===i?void 0:i.message;c.message=r&&"string"==typeof r?r:e.message,c.data={originalError:h(t)}}const d=null===(a=t)||void 0===a?void 0:a.stack;return n&&t&&d&&"string"==typeof d&&(c.stack=d),c}}(E);var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.ethErrors=void 0;const M=a,A=E,B=x;function L(t,e){const[r,n]=P(e);return new M.EthereumRpcError(t,r||A.getMessageFromCode(t),n)}function C(t,e){const[r,n]=P(e);return new M.EthereumProviderError(t,r||A.getMessageFromCode(t),n)}function P(t){if(t){if("string"==typeof t)return[t];if("object"==typeof t&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&"string"!=typeof e)throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}I.ethErrors={rpc:{parse:t=>L(B.errorCodes.rpc.parse,t),invalidRequest:t=>L(B.errorCodes.rpc.invalidRequest,t),invalidParams:t=>L(B.errorCodes.rpc.invalidParams,t),methodNotFound:t=>L(B.errorCodes.rpc.methodNotFound,t),internal:t=>L(B.errorCodes.rpc.internal,t),server:t=>{if(!t||"object"!=typeof t||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return L(e,t)},invalidInput:t=>L(B.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>L(B.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>L(B.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>L(B.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>L(B.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>L(B.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>C(B.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>C(B.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>C(B.errorCodes.provider.unsupportedMethod,t),disconnected:t=>C(B.errorCodes.provider.disconnected,t),chainDisconnected:t=>C(B.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||"object"!=typeof t||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new M.EthereumProviderError(e,r,n)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=a;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=E;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=I;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=x;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(s);var R,O={},T={exports:{}},N="object"==typeof Reflect?Reflect:null,U=N&&"function"==typeof N.apply?N.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};R=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var z=Number.isNaN||function(t){return t!=t};function W(){W.init.call(this)}T.exports=W,T.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}Z(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&Z(t,"error",e,r)}(t,i,{once:!0})}))},W.EventEmitter=W,W.prototype._events=void 0,W.prototype._eventsCount=0,W.prototype._maxListeners=void 0;var j=10;function F(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function q(t){return void 0===t._maxListeners?W.defaultMaxListeners:t._maxListeners}function K(t,e,r,n){var i,o,s,a;if(F(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=q(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=D.bind(n);return i.listener=r,n.wrapFn=i,i}function H(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):G(i,i.length)}function V(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function G(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Z(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(W,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(t){if("number"!=typeof t||t<0||z(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j=t}}),W.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},W.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||z(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},W.prototype.getMaxListeners=function(){return q(this)},W.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)U(a,this,e);else{var u=a.length,c=G(a,u);for(r=0;r<u;++r)U(c[r],this,e)}return!0},W.prototype.addListener=function(t,e){return K(this,t,e,!1)},W.prototype.on=W.prototype.addListener,W.prototype.prependListener=function(t,e){return K(this,t,e,!0)},W.prototype.once=function(t,e){return F(e),this.on(t,$(this,t,e)),this},W.prototype.prependOnceListener=function(t,e){return F(e),this.prependListener(t,$(this,t,e)),this},W.prototype.removeListener=function(t,e){var r,n,i,o,s;if(F(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},W.prototype.listeners=function(t){return H(this,t,!0)},W.prototype.rawListeners=function(t){return H(this,t,!1)},W.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):V.call(t,e)},W.prototype.listenerCount=V,W.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]},Object.defineProperty(O,"__esModule",{value:!0});const J=T.exports;function Y(t,e,r){try{Reflect.apply(t,e,r)}catch(t){setTimeout((()=>{throw t}))}}class X extends J.EventEmitter{emit(t,...e){let r="error"===t;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let t;if(e.length>0&&([t]=e),t instanceof Error)throw t;const r=new Error("Unhandled error."+(t?` (${t.message})`:""));throw r.context=t,r}const i=n[t];if(void 0===i)return!1;if("function"==typeof i)Y(i,this,e);else{const t=i.length,r=function(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}(i);for(let n=0;n<t;n+=1)Y(r[n],this,e)}return!0}}var Q=O.default=X;class tt extends Error{constructor(t,e){super(t),this.message=e,this.message=`Arcana SDK error: [${t}] ${e}`}}const et=new tt("user_not_logged_in","User is not logged in"),rt=new tt("wallet_not_initialized","AuthProvider is not initialized. Please run `await auth.init(...)` before calling functions"),nt=new class{constructor(t,e){this.message=`Arcana SDK warning: [${t}] ${e}`}log(){console.warn(this.message)}}("duplicate_iframe","Duplicate iframe detected, please keep a single instance of AuthProvider"),it={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4,NOLOGS:5},ot={};let st=it.NOLOGS,at=null;const ut=t=>{st=t},ct=t=>(ot[t]||(ot[t]=new ht(st,t)),ot[t]);class ht{constructor(t,e){this.logLevel=t,this.prefix="[ARCANA_AUTH]",e&&(this.prefix+=`[${e}]`)}log(t,e,r={}){this.internalLog(it[t],e,r)}info(t,e={}){this.internalLog(it.INFO,t,e)}debug(t,e={}){this.internalLog(it.DEBUG,t,e)}warn(t,e={}){this.internalLog(it.WARNING,t,e)}error(t,e={}){var r;e instanceof Error&&this.internalLog(it.ERROR,t,`${e.name}: ${e.message}: ${e.stack}`),this.internalLog(it.ERROR,t,e),r=JSON.stringify({message:t,params:e}),at&&at(r)}internalLog(t,e,r){const n=`${this.prefix} - ${this.getLogLevelName(t)} ${this.getTime()} ${e} \n[PARAMS]: ${JSON.stringify(r)}\n          `;this.consoleLog(t,n)}getLogLevelName(t){switch(t){case it.DEBUG:return"DEBUG";case it.INFO:return"INFO";case it.WARNING:return"WARN";case it.ERROR:return"ERROR";default:return"NOTSET"}}getTime(){return(new Date).toLocaleTimeString()}consoleLog(t,e){if(!(t<this.logLevel))switch(t){case it.DEBUG:console.debug(e);break;case it.WARNING:console.warn(e);break;case it.ERROR:console.error(e);break;case it.INFO:console.info(e);break;default:console.log(e)}}}const lt="data:image/svg+xml,%3Csvg width='151' height='147' viewBox='0 0 151 147' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg opacity='0.419035'%3E%3Cpath d='M94.3585 4.39385C94.3585 6.8206 92.3736 8.78798 89.9253 8.78798C87.477 8.78798 85.4922 6.8206 85.4922 4.39385C85.4922 1.96723 87.477 0 89.9253 0C92.3736 0 94.3585 1.96723 94.3585 4.39385Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M59.4441 15.3287L56.8114 16.8352C56.3347 17.108 55.7253 16.9461 55.4501 16.4737L50.6962 8.31243C50.421 7.84009 50.5844 7.23603 51.0609 6.96337L53.6938 5.45667C54.1703 5.184 54.7797 5.34582 55.055 5.81815L59.8088 13.9795C60.0841 14.452 59.9207 15.0559 59.4441 15.3287Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M15.0339 32.3637L15.6261 32.5628C16.2975 32.7886 17.0381 32.6722 17.6065 32.2519L18.1077 31.8812C19.5388 30.8226 21.5735 31.8501 21.5507 33.6199L21.5427 34.2397C21.5336 34.9425 21.8739 35.6047 22.4528 36.0106L22.9635 36.3685C24.4215 37.3904 24.0642 39.6257 22.359 40.1512L21.7618 40.3352C21.0846 40.5438 20.5546 41.0694 20.3442 41.7405L20.1584 42.3325C19.6284 44.0226 17.3731 44.3766 16.342 42.9315L15.9807 42.4255C15.5713 41.8517 14.9032 41.5142 14.1942 41.5233L13.5688 41.5311C11.7833 41.5537 10.7467 39.5372 11.8147 38.1186L12.1888 37.6218C12.613 37.0586 12.7302 36.3245 12.5024 35.6589L12.3015 35.0719C11.7281 33.3957 13.3427 31.7954 15.0339 32.3637Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M11.2466 63.5287L11.9116 66.4689C12.032 67.0012 11.6943 67.5295 11.1572 67.6487L1.87966 69.7101C1.34269 69.8293 0.809791 69.4946 0.689237 68.9623L0.0243071 66.0219C-0.0959554 65.4897 0.241739 64.9615 0.778708 64.8423L10.0564 62.7809C10.5933 62.6617 11.1262 62.9964 11.2466 63.5287Z' fill='%239DE000'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M20.6082 100.625C20.6082 103.052 18.6234 105.019 16.1752 105.019C13.7268 105.019 11.7422 103.052 11.7422 100.625C11.7422 98.1987 13.7268 96.2314 16.1752 96.2314C18.6234 96.2314 20.6082 98.1987 20.6082 100.625Z' fill='%23F23D3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M15.0339 122.725L15.6261 122.924C16.2975 123.15 17.0381 123.034 17.6065 122.613L18.1077 122.242C19.5388 121.184 21.5735 122.211 21.5507 123.981L21.5427 124.601C21.5336 125.304 21.8739 125.966 22.4528 126.372L22.9635 126.73C24.4215 127.752 24.0642 129.987 22.359 130.513L21.7618 130.697C21.0846 130.905 20.5546 131.431 20.3442 132.102L20.1584 132.694C19.6284 134.384 17.3731 134.738 16.342 133.293L15.9807 132.787C15.5713 132.213 14.9032 131.876 14.1942 131.885L13.5688 131.893C11.7833 131.915 10.7467 129.899 11.8147 128.48L12.1888 127.983C12.613 127.42 12.7302 126.686 12.5024 126.02L12.3015 125.433C11.7281 123.757 13.3427 122.157 15.0339 122.725Z' fill='%23FAEE3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M129.132 28.1704C127.789 26.435 128.205 23.8499 130.054 22.4436C131.903 21.0374 134.53 21.3082 135.873 23.0437C135.876 23.047 135.878 23.0503 135.881 23.0535' stroke='%23F23D3D' stroke-width='1.98137' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M140.862 52.2221L141.454 52.4212C142.126 52.647 142.866 52.5306 143.435 52.1103L143.936 51.7396C145.367 50.681 147.402 51.7085 147.379 53.4783L147.371 54.0981C147.362 54.8009 147.702 55.4631 148.281 55.869L148.792 56.2269C150.25 57.2488 149.893 59.4841 148.187 60.0096L147.59 60.1936C146.913 60.4022 146.383 60.9278 146.172 61.5989L145.986 62.1909C145.456 63.881 143.201 64.235 142.17 62.7899L141.809 62.2839C141.399 61.7101 140.732 61.3726 140.022 61.3817L139.397 61.3896C137.612 61.4121 136.575 59.3956 137.643 57.9771L138.017 57.4803C138.441 56.917 138.558 56.1829 138.33 55.5173L138.13 54.9303C137.556 53.2541 139.171 51.6538 140.862 52.2221Z' fill='%23FAEE3D'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M145.217 104.171C148.232 104.564 150.367 107.485 149.948 110.64C149.529 113.795 146.703 116.068 143.689 115.674C143.683 115.674 143.678 115.673 143.672 115.672' stroke='%23F23D3D' stroke-width='1.48603' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M135.718 141.235L133.085 142.742C132.608 143.014 131.999 142.852 131.724 142.38L126.97 134.219C126.694 133.746 126.858 133.142 127.334 132.87L129.967 131.363C130.444 131.09 131.053 131.252 131.328 131.724L136.082 139.886C136.357 140.358 136.194 140.962 135.718 141.235Z' fill='%233CA6FA'/%3E%3C/g%3E%3Cg opacity='0.796078'%3E%3Cpath d='M49.4302 146.001C47.5793 143.61 48.1523 140.048 50.6998 138.111C53.2472 136.174 56.8664 136.547 58.7173 138.938L58.7279 138.951' stroke='%233CA6FA' stroke-width='1.98137' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cpath d='M133.141 69.8273C133.141 98.8525 109.4 122.382 80.1137 122.382C50.8274 122.382 27.0859 98.8525 27.0859 69.8273C27.0859 40.802 50.8274 17.2725 80.1137 17.2725C109.4 17.2725 133.141 40.802 133.141 69.8273Z' fill='%239DE000'/%3E%3Cpath d='M56.6641 69.9175L72.2097 85.3247L103.481 54.332' stroke='white' stroke-width='5.7388' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A",dt=t=>40===pt(t).length,ft="0x",pt=t=>t.startsWith(ft)?t.substring(2):t,gt=(t,e=!0)=>{const r=t.toString(16);return e?(t=>t.startsWith(ft)?t:`${ft}${t}`)(r):pt(r)},mt=()=>window.location.origin+window.location.pathname,yt=4294967295;let wt=Math.floor(Math.random()*yt);function bt(t){return String.fromCharCode(parseInt(t.slice(1),16))}function vt(t){return e=JSON.stringify(t),window.btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,bt));var e}class _t extends Error{constructor(t,e,r=""){super(e),this.code=t,this.message=e,this.data=r}}class kt extends Q{constructor(t){super(),this.rpcConfig=t,this.connected=!1,this.logger=ct("ArcanaProvider"),this.onResponse=(t,e)=>{this.subscriber.emit(`result:${t}:${e.id}`,e)},this.handleEvents=(t,e)=>{switch(t){case"accountsChanged":this.emit(t,[e]);break;case"chainChanged":this.setChainId(e),this.emit("chainChanged",gt(e.chainId));break;case"connect":this.chainId="object"==typeof e?e.chainId:"",this.connected=!0,this.emit("connect",e);break;case"disconnect":this.iframe.handleDisconnect(),this.connected=!1,this.emit("disconnect",e);break;case"message":this.emit("message",e)}},this.subscriber=new Q}isArcana(){return!0}init(t,e){return r(this,void 0,void 0,(function*(){this.iframe=t;const{communication:r}=yield this.iframe.setConnectionMethods({onEvent:this.handleEvents,onMethodResponse:(t,e)=>{this.onResponse(t,e)},getParentUrl:mt,getAppMode:()=>{var t;return null===(t=this.iframe)||void 0===t?void 0:t.appMode},getAppConfig:this.iframe.getAppConfig,getWalletPosition:this.iframe.getWalletPlace,getRpcConfig:()=>this.rpcConfig,sendPendingRequestCount:this.iframe.onReceivingPendingRequestCount,triggerSocialLogin:e.loginWithSocial,triggerPasswordlessLogin:e.loginWithLink,getPopupState:()=>this.iframe.getState(),setIframeStyle:this.iframe.setIframeStyle,setSessionID:this.iframe.setSessionID,getSDKVersion:()=>"v3"});this.communication=r}))}isLoggedIn(){return r(this,void 0,void 0,(function*(){try{return(yield this.getCommunication("isLoggedIn")).isLoggedIn()}catch(t){return this.logger.error("isLoggedIn",t),!1}}))}isConnected(){return r(this,void 0,void 0,(function*(){return this.connected}))}isLoginAvailable(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("isLoginAvailable"),r=yield e.isLoginAvailable(t);return this.logger.info("loginAvailable",{[t]:r}),r}))}requestUserInfo(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getUserInfo");if(!(yield t.isLoggedIn()))throw et;return yield t.getUserInfo()}))}getReconnectionUrl(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getReconnectionUrl");return yield t.getReconnectionUrl()}))}getPublicKey(t,e){return r(this,void 0,void 0,(function*(){return(yield this.getCommunication("getPublicKey")).getPublicKey(t,e)}))}getAvailableLogins(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getAvailableLogins");return yield t.getAvailableLogins()}))}triggerLogout(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("triggerLogout");yield t.triggerLogout(!0)}))}initPasswordlessLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("initPasswordlessLogin");return yield e.initPasswordlessLogin(t)}))}initSocialLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("initSocialLogin");return yield e.initSocialLogin(t)}))}expandWallet(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("expandWallet");return yield t.expandWallet()}))}getCommunication(t="sendRequest"){return r(this,void 0,void 0,(function*(){if(this.communication){const e=yield this.communication.promise;if(!e[t])throw new tt("fn_not_available",`The requested fn ${t} is not available in this context`);return e}throw new tt("connection_not_available","The connection is not available yet")}))}request(t){return r(this,void 0,void 0,(function*(){if(!t||"object"!=typeof t||Array.isArray(t))throw s.ethErrors.rpc.invalidRequest({message:"Invalid request arguments",data:t});const{method:e,params:n}=t;if(!e)throw s.ethErrors.rpc.invalidRequest({message:"Invalid method argument",data:t});const i={method:e,params:n,jsonrpc:"2.0",id:(wt=(wt+1)%yt,wt)};return new Promise(((t,n)=>{this.getCommunication().then((o=>r(this,void 0,void 0,(function*(){this.getResponse(e,i.id).then(t,n),yield o.sendRequest(i)}))),n)}))}))}getResponse(t,e){return new Promise(((r,n)=>{this.subscriber.once(`result:${t}:${e}`,(t=>t.error?n(St(t.error)):r(t.result)))}))}setChainId(t){t&&"object"==typeof t&&"chainId"in t&&"number"==typeof t.chainId&&(this.chainId=gt(t.chainId))}}const St=t=>{switch(ct("ArcanaProvider").error("getError",t),t){case"user_deny":return new _t(4001,"User rejected the request.");case"operation_not_supported":return new _t(4200,"The requested method is not supported by this provider.");case"all_disconnected":return new _t(4900,"The provider is disconnected from all chains. Login is pending.");default:return"string"!=typeof t?new _t(t.code,t.message,t.data):s.ethErrors.rpc.internal(t)}};var Et,xt,It,Mt,At,Bt,Lt,Ct;!function(t){t[t.CREATED=0]="CREATED",t[t.RUNNING=1]="RUNNING",t[t.DONE=2]="DONE"}(Et||(Et={})),function(t){t.evm_secp256k1="evm_secp256k1",t.solana_cv25519="solana_cv25519"}(xt||(xt={})),t.BearerAuthentication=void 0,(t.BearerAuthentication||(t.BearerAuthentication={})).firebase="firebase",function(t){t[t.NoUI=0]="NoUI",t[t.Widget=1]="Widget",t[t.Full=2]="Full"}(It||(It={})),function(t){t.Call="call",t.Reply="reply",t.Syn="syn",t.SynAck="synAck",t.Ack="ack"}(Mt||(Mt={})),function(t){t.Fulfilled="fulfilled",t.Rejected="rejected"}(At||(At={})),function(t){t.ConnectionDestroyed="ConnectionDestroyed",t.ConnectionTimeout="ConnectionTimeout",t.NoIframeSrc="NoIframeSrc"}(Bt||(Bt={})),function(t){t.DataCloneError="DataCloneError"}(Lt||(Lt={})),function(t){t.Message="message"}(Ct||(Ct={}));const Pt={"http:":"80","https:":"443"},Rt=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,Ot=["file:","data:"];const Tt=({name:t,message:e,stack:r})=>({name:t,message:e,stack:r});let Nt=0;var Ut=()=>++Nt;const zt=t=>t?t.split("."):[],Wt=(t,e,r)=>{const n=zt(e);return n.reduce(((t,e,i)=>(void 0===t[e]&&(t[e]={}),i===n.length-1&&(t[e]=r),t[e])),t),t},jt=(t,e)=>{const r={};return Object.keys(t).forEach((n=>{const i=t[n],o=((t,e)=>{const r=zt(e||"");return r.push(t),(t=>t.join("."))(r)})(n,e);"object"==typeof i&&Object.assign(r,jt(i,o)),"function"==typeof i&&(r[o]=i)})),r};var Ft=(t,e,r,n,i)=>{const{localName:o,local:s,remote:a,originForSending:u,originForReceiving:c}=e;let h=!1;i(`${o}: Connecting call sender`);const l=t=>(...e)=>{let r;i(`${o}: Sending ${t}() call`);try{a.closed&&(r=!0)}catch(t){r=!0}if(r&&n(),h){const e=new Error(`Unable to send ${t}() call due to destroyed connection`);throw e.code=Bt.ConnectionDestroyed,e}return new Promise(((r,n)=>{const h=Ut(),l=e=>{if(e.source!==a||e.data.penpal!==Mt.Reply||e.data.id!==h)return;if("*"!==c&&e.origin!==c)return void i(`${o} received message from origin ${e.origin} which did not match expected origin ${c}`);const u=e.data;i(`${o}: Received ${t}() reply`),s.removeEventListener(Ct.Message,l);let d=u.returnValue;u.returnValueIsError&&(d=(t=>{const e=new Error;return Object.keys(t).forEach((r=>e[r]=t[r])),e})(d)),(u.resolution===At.Fulfilled?r:n)(d)};s.addEventListener(Ct.Message,l);const d={penpal:Mt.Call,id:h,methodName:t,args:e};a.postMessage(d,u)}))},d=r.reduce(((t,e)=>(t[e]=l(e),t)),{});return Object.assign(t,(t=>{const e={};for(const r in t)Wt(e,r,t[r]);return e})(d)),()=>{h=!0}},qt=(t,e,r,n,i)=>{const{destroy:o,onDestroy:s}=n;let a,u;const c={};return n=>{if("*"!==e&&n.origin!==e)return void i(`Parent: Handshake - Received ACK message from origin ${n.origin} which did not match expected origin ${e}`);i("Parent: Handshake - Received ACK");const h={localName:"Parent",local:window,remote:n.source,originForSending:r,originForReceiving:e};a&&a(),a=((t,e,r)=>{const{localName:n,local:i,remote:o,originForSending:s,originForReceiving:a}=t;let u=!1;const c=t=>{if(t.source!==o||t.data.penpal!==Mt.Call)return;if("*"!==a&&t.origin!==a)return void r(`${n} received message from origin ${t.origin} which did not match expected origin ${a}`);const i=t.data,{methodName:c,args:h,id:l}=i;r(`${n}: Received ${c}() call`);const d=t=>e=>{if(r(`${n}: Sending ${c}() reply`),u)return void r(`${n}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:Mt.Reply,id:l,resolution:t,returnValue:e};t===At.Rejected&&e instanceof Error&&(i.returnValue=Tt(e),i.returnValueIsError=!0);try{o.postMessage(i,s)}catch(t){if(t.name===Lt.DataCloneError){const e={penpal:Mt.Reply,id:l,resolution:At.Rejected,returnValue:Tt(t),returnValueIsError:!0};o.postMessage(e,s)}throw t}};new Promise((t=>t(e[c].apply(e,h)))).then(d(At.Fulfilled),d(At.Rejected))};return i.addEventListener(Ct.Message,c),()=>{u=!0,i.removeEventListener(Ct.Message,c)}})(h,t,i),s(a),u&&u.forEach((t=>{delete c[t]})),u=n.data.methodNames;const l=Ft(c,h,u,o,i);return s(l),c}};var Kt=t=>{let{iframe:e,methods:r={},childOrigin:n,timeout:i,debug:o=!1}=t;const s=(t=>(...e)=>{t&&console.log("[Penpal]",...e)})(o),a=((t,e)=>{const r=[];let n=!1;return{destroy(i){n||(n=!0,e(`${t}: Destroying connection`),r.forEach((t=>{t(i)})))},onDestroy(t){n?t():r.push(t)}}})("Parent",s),{onDestroy:u,destroy:c}=a;n||((t=>{if(!t.src&&!t.srcdoc){const t=new Error("Iframe must have src or srcdoc property defined.");throw t.code=Bt.NoIframeSrc,t}})(e),n=(t=>{if(t&&Ot.find((e=>t.startsWith(e))))return"null";const e=document.location,r=Rt.exec(t);let n,i,o;return r?(n=r[1]?r[1]:e.protocol,i=r[2],o=r[4]):(n=e.protocol,i=e.hostname,o=e.port),`${n}//${i}${o&&o!==Pt[n]?`:${o}`:""}`})(e.src));const h="null"===n?"*":n,l=jt(r),d=((t,e,r,n)=>i=>{if(!i.source)return;if("*"!==r&&i.origin!==r)return void t(`Parent: Handshake - Received SYN message from origin ${i.origin} which did not match expected origin ${r}`);t("Parent: Handshake - Received SYN, responding with SYN-ACK");const o={penpal:Mt.SynAck,methodNames:Object.keys(e)};i.source.postMessage(o,n)})(s,l,n,h),f=qt(l,n,h,a,s),p=new Promise(((t,r)=>{const n=((t,e)=>{let r;return void 0!==t&&(r=window.setTimeout((()=>{const r=new Error(`Connection timed out after ${t}ms`);r.code=Bt.ConnectionTimeout,e(r)}),t)),()=>{clearTimeout(r)}})(i,c),o=r=>{if(r.source===e.contentWindow&&r.data)if(r.data.penpal!==Mt.Syn)if(r.data.penpal!==Mt.Ack);else{const e=f(r);e&&(n(),t(e))}else d(r)};window.addEventListener(Ct.Message,o),s("Parent: Awaiting handshake"),((t,e)=>{const{destroy:r,onDestroy:n}=e,i=setInterval((()=>{t.isConnected||(clearInterval(i),r())}),6e4);n((()=>{clearInterval(i)}))})(e,a),u((t=>{window.removeEventListener(Ct.Message,o),t&&r(t)}))}));return{promise:p,destroy(){c()}}};const Dt={border:"none",position:"fixed",height:0,width:0,right:0,bottom:0,zIndex:2147483648},$t="xar-wallet";class Ht{constructor(t){this.params=t,this.getSessionID=()=>{const t=window.localStorage.getItem(`arcana-auth-${this.getIframeUrl()}-sessionID`);return t?JSON.parse(t):null},this.setSessionID=(t,e)=>{window.localStorage.setItem(`arcana-auth-${this.getIframeUrl()}-sessionID`,JSON.stringify({id:t,expiry:e}))},this.clearSessionID=()=>{window.localStorage.removeItem(`arcana-auth-${this.getIframeUrl()}-sessionID`)},this.setIframeStyle=t=>{var e;if(1==(null===(e=this.params.standaloneMode)||void 0===e?void 0:e.mode))this.widgetIframe.style.height=t.height?t.height:"80vh",this.widgetIframe.style.maxWidth="100%",this.widgetIframe.style.width="430px",this.widgetIframe.style.bottom="0",this.widgetIframe.style.right="0";else for(const e in t)this.widgetIframe.style[e]=t[e]},this.getWalletPlace=()=>this.params.position,this.getAppConfig=()=>this.params.appConfig,this.checkDuplicateIframe(),this.checkSecureOrigin()}setConnectionMethods(t){return r(this,void 0,void 0,(function*(){try{return this.iframeCommunication||(this.iframeCommunication=Kt({iframe:this.widgetIframe,methods:Object.assign(Object.assign({},t),{uiEvent:(t,e)=>{var r;(null===(r=this.params.standaloneMode)||void 0===r?void 0:r.handler)&&this.params.standaloneMode.handler(t,e)}}),childOrigin:this.params.iframeUrl}),yield this.iframeCommunication.promise),{iframe:this.widgetIframe,communication:this.iframeCommunication}}catch(t){throw new Error("Could not set connection methods")}}))}triggerBearerAuthentication(t,e){return r(this,void 0,void 0,(function*(){return(yield this.iframeCommunication.promise).triggerBearerLogin(t,e)}))}setWalletType(t){this.appMode=null!=t?t:It.Full,this.initWalletUI()}getState(){return this.state}handleDisconnect(){this.widgetIframe.src=this.getIframeUrl(),this.clearSessionID()}onReceivingPendingRequestCount(t){const e=document.getElementById("req-count-badge");e&&(t>0?(e.style.display="flex",e.textContent=`${t}`):e.style.display="none")}getIframeUrl(){var t,e;const r=vt({standaloneMode:(null===(t=this.params.standaloneMode)||void 0===t?void 0:t.mode)?null===(e=this.params.standaloneMode)||void 0===e?void 0:e.mode:0}),n=new URL(`/${this.params.appId}/v2/login`,this.params.iframeUrl);return n.hash=r,n.toString()}createWidgetIframe(){return((t,e,...r)=>{const n=document.createElement(t);e&&(Object.assign(n,e),e.style&&Object.assign(n.style,e.style));for(const t of r)"string"!=typeof t?n.appendChild(t):n.appendChild(document.createTextNode(t));return n})("iframe",{style:Dt,src:this.getIframeUrl(),allow:"clipboard-write",className:$t})}checkDuplicateIframe(){[].slice.call(document.querySelectorAll(`.${$t}`)).length>0&&nt.log()}initWalletUI(){this.widgetIframe=this.createWidgetIframe(),document.body.appendChild(this.widgetIframe)}checkSecureOrigin(){const t="localhost"===location.hostname||"127.0.0.1"===location.hostname,e="https:"===location.protocol;if(!(t||e))throw new Error("Insecure origin")}}const Vt={authUrl:"https://verify.dev.arcana.network",gatewayUrl:"https://gateway-dev.arcana.network",walletUrl:"https://wallet.dev.arcana.network"},Gt={authUrl:"https://verify.beta.arcana.network",gatewayUrl:"https://gateway001-testnet.arcana.network",walletUrl:"https://wallet.beta.arcana.network"},Zt={authUrl:"https://auth.arcana.network",gatewayUrl:"https://gateway.arcana.network",walletUrl:"https://wallet.arcana.network"};class Jt{constructor(t){this.url=t}open(){const t=Xt();return this.window=window.open(this.url,"_blank",t),this.getWindowResponse()}getWindowResponse(){return new Promise(((t,e)=>{let n=!1;const i=window.setInterval((()=>{var t;!n&&(null===(t=this.window)||void 0===t?void 0:t.closed)&&e("User closed the popup")}),500),o=s=>r(this,void 0,void 0,(function*(){var r,a,u;if(!(null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.status))return;const c=s.data;return n=!0,this.clear(o,i),"success"===c.status?(null===(a=this.window)||void 0===a||a.close(),t("success")):"error"==c.status?(null===(u=this.window)||void 0===u||u.close(),e(c.error)):"done"===c.status?t("done"):void console.log("Unexpected event")}));window.addEventListener("message",o,!1)}))}clear(t,e){window.removeEventListener("message",t),window.clearInterval(e)}}const Yt={titlebar:0,toolbar:0,status:0,menubar:0,resizable:0,height:1200,width:700,popup:1},Xt=()=>{const t=[];for(const e in Yt)t.push(`${e}=${Yt[e]}`);return t.join(",")};var Qt,te,ee,re,ne,ie={},oe=[],se=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ae(t,e){for(var r in e)t[r]=e[r];return t}function ue(t){var e=t.parentNode;e&&e.removeChild(t)}function ce(t,e,r,n,i){var o={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++ee:i};return null==i&&null!=te.vnode&&te.vnode(o),o}function he(t){return t.children}function le(t,e){this.props=t,this.context=e}function de(t,e){if(null==e)return t.__?de(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?de(t):null}function fe(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return fe(t)}}function pe(t){(!t.__d&&(t.__d=!0)&&re.push(t)&&!ge.__r++||ne!==te.debounceRendering)&&((ne=te.debounceRendering)||setTimeout)(ge)}function ge(){for(var t;ge.__r=re.length;)t=re.sort((function(t,e){return t.__v.__b-e.__v.__b})),re=[],t.some((function(t){var e,r,n,i,o,s;t.__d&&(o=(i=(e=t).__v).__e,(s=e.__P)&&(r=[],(n=ae({},i)).__v=i.__v+1,Se(s,i,n,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,r,null==o?de(i):o,i.__h),Ee(r,i),i.__e!=o&&fe(i)))}))}function me(t,e,r,n,i,o,s,a,u,c){var h,l,d,f,p,g,m,y=n&&n.__k||oe,w=y.length;for(r.__k=[],h=0;h<e.length;h++)if(null!=(f=r.__k[h]=null==(f=e[h])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?ce(null,f,null,null,f):Array.isArray(f)?ce(he,{children:f},null,null,null):f.__b>0?ce(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=r,f.__b=r.__b+1,null===(d=y[h])||d&&f.key==d.key&&f.type===d.type)y[h]=void 0;else for(l=0;l<w;l++){if((d=y[l])&&f.key==d.key&&f.type===d.type){y[l]=void 0;break}d=null}Se(t,f,d=d||ie,i,o,s,a,u,c),p=f.__e,(l=f.ref)&&d.ref!=l&&(m||(m=[]),d.ref&&m.push(d.ref,null,f),m.push(l,f.__c||p,f)),null!=p?(null==g&&(g=p),"function"==typeof f.type&&f.__k===d.__k?f.__d=u=ye(f,u,t):u=we(t,f,d,y,p,u),"function"==typeof r.type&&(r.__d=u)):u&&d.__e==u&&u.parentNode!=t&&(u=de(d))}for(r.__e=g,h=w;h--;)null!=y[h]&&Me(y[h],y[h]);if(m)for(h=0;h<m.length;h++)Ie(m[h],m[++h],m[++h])}function ye(t,e,r){for(var n,i=t.__k,o=0;i&&o<i.length;o++)(n=i[o])&&(n.__=t,e="function"==typeof n.type?ye(n,e,r):we(r,n,n,i,n.__e,e));return e}function we(t,e,r,n,i,o){var s,a,u;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==r||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),s=null;else{for(a=o,u=0;(a=a.nextSibling)&&u<n.length;u+=2)if(a==i)break t;t.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function be(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]=null==r?"":"number"!=typeof r||se.test(e)?r:r+"px"}function ve(t,e,r,n,i){var o;t:if("style"===e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||be(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||be(t.style,e,r[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?n||t.addEventListener(e,o?ke:_e,o):t.removeEventListener(e,o?ke:_e,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==r?"":r;break t}catch(t){}"function"==typeof r||(null==r||!1===r&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,r))}}function _e(t){this.l[t.type+!1](te.event?te.event(t):t)}function ke(t){this.l[t.type+!0](te.event?te.event(t):t)}function Se(t,e,r,n,i,o,s,a,u){var c,h,l,d,f,p,g,m,y,w,b,v,_,k=e.type;if(void 0!==e.constructor)return null;null!=r.__h&&(u=r.__h,a=e.__e=r.__e,e.__h=null,o=[a]),(c=te.__b)&&c(e);try{t:if("function"==typeof k){m=e.props,y=(c=k.contextType)&&n[c.__c],w=c?y?y.props.value:c.__:n,r.__c?g=(h=e.__c=r.__c).__=h.__E:("prototype"in k&&k.prototype.render?e.__c=h=new k(m,w):(e.__c=h=new le(m,w),h.constructor=k,h.render=Ae),y&&y.sub(h),h.props=m,h.state||(h.state={}),h.context=w,h.__n=n,l=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=k.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=ae({},h.__s)),ae(h.__s,k.getDerivedStateFromProps(m,h.__s))),d=h.props,f=h.state;for(c=0;c<h._sb.length;c++)h.__h.push(h._sb[c]),h._sb=[];if(l)null==k.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==k.getDerivedStateFromProps&&m!==d&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,w),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,w)||e.__v===r.__v){h.props=m,h.state=h.__s,e.__v!==r.__v&&(h.__d=!1),h.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach((function(t){t&&(t.__=e)})),h.__h.length&&s.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,w),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(d,f,p)}))}if(h.context=w,h.props=m,h.__v=e,h.__P=t,b=te.__r,v=0,"prototype"in k&&k.prototype.render)h.state=h.__s,h.__d=!1,b&&b(e),c=h.render(h.props,h.state,h.context);else do{h.__d=!1,b&&b(e),c=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++v<25);h.state=h.__s,null!=h.getChildContext&&(n=ae(ae({},n),h.getChildContext())),l||null==h.getSnapshotBeforeUpdate||(p=h.getSnapshotBeforeUpdate(d,f)),_=null!=c&&c.type===he&&null==c.key?c.props.children:c,me(t,Array.isArray(_)?_:[_],e,r,n,i,o,s,a,u),h.base=e.__e,e.__h=null,h.__h.length&&s.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==o&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=xe(r.__e,e,r,n,i,o,s,u);(c=te.diffed)&&c(e)}catch(t){e.__v=null,(u||null!=o)&&(e.__e=a,e.__h=!!u,o[o.indexOf(a)]=null),te.__e(t,e,r)}}function Ee(t,e){te.__c&&te.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){te.__e(t,e.__v)}}))}function xe(t,e,r,n,i,o,s,a){var u,c,h,l=r.props,d=e.props,f=e.type,p=0;if("svg"===f&&(i=!0),null!=o)for(;p<o.length;p++)if((u=o[p])&&"setAttribute"in u==!!f&&(f?u.localName===f:3===u.nodeType)){t=u,o[p]=null;break}if(null==t){if(null===f)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,d.is&&d),o=null,a=!1}if(null===f)l===d||a&&t.data===d||(t.data=d);else{if(o=o&&Qt.call(t.childNodes),c=(l=r.props||ie).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!a){if(null!=o)for(l={},p=0;p<t.attributes.length;p++)l[t.attributes[p].name]=t.attributes[p].value;(h||c)&&(h&&(c&&h.__html==c.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,r,n,i){var o;for(o in r)"children"===o||"key"===o||o in e||ve(t,o,null,r[o],n);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||r[o]===e[o]||ve(t,o,e[o],r[o],n)}(t,d,l,i,a),h)e.__k=[];else if(p=e.props.children,me(t,Array.isArray(p)?p:[p],e,r,n,i&&"foreignObject"!==f,o,s,o?o[0]:r.__k&&de(r,0),a),null!=o)for(p=o.length;p--;)null!=o[p]&&ue(o[p]);a||("value"in d&&void 0!==(p=d.value)&&(p!==t.value||"progress"===f&&!p||"option"===f&&p!==l.value)&&ve(t,"value",p,l.value,!1),"checked"in d&&void 0!==(p=d.checked)&&p!==t.checked&&ve(t,"checked",p,l.checked,!1))}return t}function Ie(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){te.__e(t,r)}}function Me(t,e,r){var n,i;if(te.unmount&&te.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Ie(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){te.__e(t,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Me(n[i],e,r||"function"!=typeof t.type);r||null==t.__e||ue(t.__e),t.__=t.__e=t.__d=void 0}function Ae(t,e,r){return this.constructor(t,r)}function Be(t,e,r){var n,i,o;te.__&&te.__(t,e),i=(n="function"==typeof r)?null:r&&r.__k||e.__k,o=[],Se(e,t=(!n&&r||e).__k=function(t,e,r){var n,i,o,s={};for(o in e)"key"==o?n=e[o]:"ref"==o?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Qt.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return ce(t,s,n,i,null)}(he,null,[t]),i||ie,ie,void 0!==e.ownerSVGElement,!n&&r?[r]:i?null:e.firstChild?Qt.call(e.childNodes):null,o,!n&&r?r:i?i.__e:e.firstChild,n),Ee(o,t)}Qt=oe.slice,te={__e:function(t,e,r,n){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,n||{}),s=i.__d),s)return i.__E=i}catch(e){t=e}throw t}},ee=0,le.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=ae({},this.state),"function"==typeof t&&(t=t(ae({},r),this.props)),t&&ae(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),pe(this))},le.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pe(this))},le.prototype.render=he,re=[],ge.__r=0;var Le=0;function Ce(t,e,r,n,i){var o,s,a={};for(s in e)"ref"==s?o=e[s]:a[s]=e[s];var u={type:t,props:a,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Le,__source:i,__self:n};if("function"==typeof t&&(o=t.defaultProps))for(s in o)void 0===a[s]&&(a[s]=o[s]);return te.vnode&&te.vnode(u),u}const Pe="https://auth-icons.s3.ap-south-1.amazonaws.com",Re={google:`${Pe}/google.png`,twitter:`${Pe}/twitter.png`,github:`${Pe}/github-light.png`,github_light:`${Pe}/github.png`,twitch:`${Pe}/twitch.png`,discord:`${Pe}/discord.png`,aws:`${Pe}/aws.png`,aws_light:`${Pe}/aws_light.png`,steam:`${Pe}/steam.png`};const Oe={light:`${Pe}/secured-by-arcana-light.svg`,dark:`${Pe}/secured-by-arcana-dark.svg`};var Te,Ne,Ue,ze,We=0,je=[],Fe=[],qe=te.__b,Ke=te.__r,De=te.diffed,$e=te.__c,He=te.unmount;function Ve(t,e){te.__h&&te.__h(Ne,t,We||e),We=0;var r=Ne.__H||(Ne.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:Fe}),r.__[t]}function Ge(t){return We=1,Ze(er,t)}function Ze(t,e,r){var n=Ve(Te++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):er(void 0,e),function(t){var e=n.__N?n.__N[0]:n.__[0],r=n.t(e,t);e!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=Ne,!Ne.u)){Ne.u=!0;var i=Ne.shouldComponentUpdate;Ne.shouldComponentUpdate=function(t,e,r){if(!n.__c.__H)return!0;var o=n.__c.__H.__.filter((function(t){return t.__c}));if(o.every((function(t){return!t.__N})))return!i||i.call(this,t,e,r);var s=!1;return o.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(s=!0)}})),!(!s&&n.__c.props===t)&&(!i||i.call(this,t,e,r))}}return n.__N||n.__}function Je(){for(var t;t=je.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Qe),t.__H.__h.forEach(tr),t.__H.__h=[]}catch(e){t.__H.__h=[],te.__e(e,t.__v)}}te.__b=function(t){"function"!=typeof t.type||t.__m||t.type===he?t.__m||(t.__m=t.__&&t.__.__m?t.__.__m:""):t.__m=(t.__&&t.__.__m?t.__.__m:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),Ne=null,qe&&qe(t)},te.__r=function(t){Ke&&Ke(t),Te=0;var e=(Ne=t.__c).__H;e&&(Ue===Ne?(e.__h=[],Ne.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=Fe,t.__N=t.i=void 0}))):(e.__h.forEach(Qe),e.__h.forEach(tr),e.__h=[])),Ue=Ne},te.diffed=function(t){De&&De(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==je.push(e)&&ze===te.requestAnimationFrame||((ze=te.requestAnimationFrame)||Xe)(Je)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==Fe&&(t.__=t.__V),t.i=void 0,t.__V=Fe}))),Ue=Ne=null},te.__c=function(t,e){e.some((function(t){try{t.__h.forEach(Qe),t.__h=t.__h.filter((function(t){return!t.__||tr(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],te.__e(r,t.__v)}})),$e&&$e(t,e)},te.unmount=function(t){He&&He(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{Qe(t)}catch(t){e=t}})),r.__H=void 0,e&&te.__e(e,r.__v))};var Ye="function"==typeof requestAnimationFrame;function Xe(t){var e,r=function(){clearTimeout(n),Ye&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);Ye&&(e=requestAnimationFrame(r))}function Qe(t){var e=Ne,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),Ne=e}function tr(t){var e=Ne;t.__c=t.__(),Ne=e}function er(t,e){return"function"==typeof e?e(t):e}function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function nr(t){if(!("string"==typeof t||t instanceof String)){var e=rr(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}}function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function or(t,e){var r,n;nr(t),"object"===ir(e)?(r=e.min||0,n=e.max):(r=arguments[1],n=arguments[2]);var i=encodeURI(t).split(/%..|./).length-1;return i>=r&&(void 0===n||i<=n)}function sr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}var ar={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};var ur="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",cr="(".concat(ur,"[.]){3}").concat(ur),hr=new RegExp("^".concat(cr,"$")),lr="(?:[0-9a-fA-F]{1,4})",dr=new RegExp("^("+"(?:".concat(lr,":){7}(?:").concat(lr,"|:)|")+"(?:".concat(lr,":){6}(?:").concat(cr,"|:").concat(lr,"|:)|")+"(?:".concat(lr,":){5}(?::").concat(cr,"|(:").concat(lr,"){1,2}|:)|")+"(?:".concat(lr,":){4}(?:(:").concat(lr,"){0,1}:").concat(cr,"|(:").concat(lr,"){1,3}|:)|")+"(?:".concat(lr,":){3}(?:(:").concat(lr,"){0,2}:").concat(cr,"|(:").concat(lr,"){1,4}|:)|")+"(?:".concat(lr,":){2}(?:(:").concat(lr,"){0,3}:").concat(cr,"|(:").concat(lr,"){1,5}|:)|")+"(?:".concat(lr,":){1}(?:(:").concat(lr,"){0,4}:").concat(cr,"|(:").concat(lr,"){1,6}|:)|")+"(?::((?::".concat(lr,"){0,5}:").concat(cr,"|(?::").concat(lr,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function fr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return nr(t),(e=String(e))?"4"===e?hr.test(t):"6"===e&&dr.test(t):fr(t,4)||fr(t,6)}var pr={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},gr=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,mr=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,yr=/^[a-z\d]+$/,wr=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,br=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,vr=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function _r(t,e){if(nr(t),(e=sr(e,pr)).require_display_name||e.allow_display_name){var r=t.match(gr);if(r){var n=r[1];if(t=t.replace(n,"").replace(/(^<|>$)/g,""),n.endsWith(" ")&&(n=n.slice(0,-1)),!function(t){var e=t.replace(/^"(.+)"$/,"$1");if(!e.trim())return!1;if(/[\.";<>]/.test(e)){if(e===t)return!1;if(e.split('"').length!==e.split('\\"').length)return!1}return!0}(n))return!1}else if(e.require_display_name)return!1}if(!e.ignore_max_length&&t.length>254)return!1;var i=t.split("@"),o=i.pop(),s=o.toLowerCase();if(e.host_blacklist.includes(s))return!1;if(e.host_whitelist.length>0&&!e.host_whitelist.includes(s))return!1;var a=i.join("@");if(e.domain_specific_validation&&("gmail.com"===s||"googlemail.com"===s)){var u=(a=a.toLowerCase()).split("+")[0];if(!or(u.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=u.split("."),h=0;h<c.length;h++)if(!yr.test(c[h]))return!1}if(!(!1!==e.ignore_max_length||or(a,{max:64})&&or(o,{max:254})))return!1;if(!function(t,e){nr(t),(e=sr(e,ar)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1)),!0===e.allow_wildcard&&0===t.indexOf("*.")&&(t=t.substring(2));var r=t.split("."),n=r[r.length-1];if(e.require_tld){if(r.length<2)return!1;if(!e.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1;if(/\s/.test(n))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(n))&&r.every((function(t){return!(t.length>63&&!e.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)||/[\uff01-\uff5e]/.test(t)||/^-|-$/.test(t)||!e.allow_underscores&&/_/.test(t))}))}(o,{require_tld:e.require_tld,ignore_max_length:e.ignore_max_length,allow_underscores:e.allow_underscores})){if(!e.allow_ip_domain)return!1;if(!fr(o)){if(!o.startsWith("[")||!o.endsWith("]"))return!1;var l=o.slice(1,-1);if(0===l.length||!fr(l))return!1}}if('"'===a[0])return a=a.slice(1,a.length-1),e.allow_utf8_local_part?vr.test(a):wr.test(a);for(var d=e.allow_utf8_local_part?br:mr,f=a.split("."),p=0;p<f.length;p++)if(!d.test(f[p]))return!1;return!e.blacklisted_chars||-1===a.search(new RegExp("[".concat(e.blacklisted_chars,"]+"),"g"))}function kr(t){const e=t.compact?60:80,{stroke:r=8,secondaryColor:n}=t;return Ce("div",Object.assign({"aria-label":"oval-loading"},{children:Ce("svg",Object.assign({width:e,height:e,viewBox:Sr(Number(r),20),xmlns:"http://www.w3.org/2000/svg",className:"xar-loader-circle","data-testid":"oval-svg"},{children:Ce("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:Ce("g",Object.assign({transform:"translate(1 1)","stroke-width":r,"data-testid":"oval-secondary-group"},{children:[Ce("circle",{strokeOpacity:".5",cx:"0",cy:"0",r:20,stroke:n,"stroke-width":r,opacity:.3}),Ce("path",Object.assign({d:Er(20),stroke:t.strokeColor},{children:Ce("animateTransform",{attributeName:"transform",type:"rotate",from:"0 0 0",to:"360 0 0",dur:"1s",repeatCount:"indefinite"})}))]}))}))}))}))}const Sr=(t,e)=>{const r=-e-t/2+1,n=2*e+t;return[r,r,n,n].join(" ")},Er=t=>["M"+t+" 0c0-9.94-8.06",t,t,t].join("-");!function(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}("@import url('https://fonts.googleapis.com/css2?family=Sora:wght@100;400;600;700&display=block');\n\n.xar-light-mode {\n  --fg: #333333;\n  --bg: #eff1f3;\n  --background: #fcfcfc;\n  --inputShadow: 0 0 8px 3px rgba(126, 126, 126, 0.25);\n}\n\n.xar-dark-mode {\n  --fg: #ffffff;\n  --bg: #313131;\n  --background: #1f1f1f;\n  --inputShadow: 0 0 8px 3px rgba(0, 0, 0, 0.05);\n}\n\n.compact {\n  --modal-height: 235px;\n  --loader-font-size: 14px;\n  --loader-font-weight: 400;\n  --success-img-width: 70px;\n  --action-link-size: 12px;\n}\n\n.full {\n  --modal-height: 480px;\n  --loader-font-size: 20px;\n  --loader-font-weight: 700;\n  --success-img-width: 100px;\n  --action-link-size: 15px;\n}\n\n#xar-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  z-index: 2147483648;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background: rgba(10, 10, 10, 0.7);\n  backdrop-filter: blur(16px);\n  font-family: Sora, sans-serif;\n}\n\n.xar-header-logo__container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid var(--fg);\n}\n\n.xar-header-logo__empty-container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.xar-header-logo {\n  max-width: 60px;\n  max-height: 60px;\n  margin: 0 auto;\n  display: inline-block;\n}\n\n.xar-header-heading {\n  font-family: 'Sora', sans-serif;\n  text-align: center;\n}\n\n.xar-header-subtext {\n  font-family: 'Sora', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  max-width: 200px;\n}\n\n.xar-email-login {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.xar-email-login > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-email-login__label {\n  text-align: left;\n  font-size: 14px;\n  color: var(--fg);\n  font-weight: 400;\n}\n\n.xar-success__img {\n  max-width: var(--success-img-width);\n}\n\n.xar-email-login__input {\n  height: 45px;\n  padding: 0 16px;\n  font-size: 14px;\n  font-weight: 400;\n  color: var(--fg);\n  background: var(--bg);\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  box-shadow: var(--inputShadow);\n}\n\n.xar-social-container {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n\n.xar-social-icon__wrapper {\n  display: flex;\n  background: var(--fg);\n  width: 42px;\n  height: 42px;\n  border-radius: 50%;\n  align-items: center;\n}\n\n.xar-social-icon__wrapper:hover {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.15, 1.15);\n}\n\n.xar-social-icon {\n  margin: 0 auto;\n  width: 24px;\n  max-height: 24px;\n}\n\n.xar-container {\n  padding: 30px 30px 20px;\n  width: 325px;\n  min-height: var(--modal-height);\n  background-color: var(--background);\n  color: var(--fg);\n  margin: 0 auto;\n  font-family: 'Sora', sans-serif;\n  box-shadow: 4px 5px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 10px;\n  box-sizing: content-box;\n}\n\n.xar-inner-container {\n  min-height: inherit;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.xar-inner-container > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-btn {\n  width: 100%;\n  height: 2.75rem;\n  font-size: 14px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: var(--bg);\n  background: var(--fg);\n  border: none;\n  border-radius: 5px;\n}\n\n.xar-btn:disabled {\n  opacity: 0.7;\n}\n\n.xar-btn:hover:enabled {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.05, 1.15);\n}\n\n.xar-btn:disabled,\n.xar-btn[disabled] {\n  cursor: not-allowed;\n}\n\n.xar-footer {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 1rem;\n}\n\n.xar-footer-text {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.xar-footer-img__link {\n  height: 15px;\n}\n\n.xar-footer-img {\n  display: block;\n}\n\n.xar-separator {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  text-align: center;\n}\n\n.xar-separator:before,\n.xar-separator:after {\n  content: '';\n  flex: 1 1 auto;\n  border-bottom: 1px solid var(--fg);\n}\n\n.xar-separator:before {\n  margin-right: 1rem;\n}\n\n.xar-separator:after {\n  margin-left: 1rem;\n}\n\n.xar-action__link {\n  text-underline-offset: 3px;\n  text-transform: uppercase;\n  text-decoration: underline;\n  color: #3e9aff;\n  font-weight: 700;\n  font-size: var(--action-link-size);\n  line-height: 19px;\n  cursor: pointer;\n}\n\n.xar-loader__text {\n  font-size: var(--loader-font-size);\n  font-weight: var(--loader-font-weight);\n}\n\n.xar-loader-circle {\n  stroke: var(--fg);\n}\n");const xr=({compact:t,logo:e})=>{const[r,n]=Ge(!1);return Ce(he,{children:[r?"":Ce("div",{className:"xar-header-logo__empty-container"}),Ce("div",Object.assign({className:"xar-header-logo__container",style:r?{}:{display:"none"}},{children:Ce("img",{className:"xar-header-logo",src:e,alt:"app-logo",onLoad:()=>{n(!1)}})})),t?"":Ce("div",Object.assign({className:"xar-header-text"},{children:[Ce("h1",Object.assign({className:"xar-header-heading"},{children:"Welcome"})),Ce("p",Object.assign({className:"xar-header-subtext"},{children:"We’ll email you a login link for a password-free sign in."}))]}))]})},Ir=({loginWithLink:t,email:e,setEmail:n})=>{const[i,o]=Ge(!0);return function(t,e){var r=Ve(Te++,3);!te.__s&&function(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}(r.__H,e)&&(r.__=t,r.i=e,Ne.__H.__h.push(r))}((()=>{o(!_r(e))}),[]),Ce("form",Object.assign({className:"xar-email-login"},{children:[Ce("input",{value:e,onInput:t=>{n(t.currentTarget.value),o(!_r(t.currentTarget.value))},className:"xar-email-login__input",type:"text",placeholder:"Enter your email"}),Ce("button",Object.assign({disabled:i,onClick:n=>r(void 0,void 0,void 0,(function*(){n.preventDefault(),e&&(yield t(e))})),className:"xar-btn"},{children:"Get Login Link"}))]}))},Mr=({text:t})=>Ce("div",Object.assign({className:"xar-separator"},{children:t})),Ar=({loginWithSocial:t,loginList:e,mode:r})=>Ce("div",Object.assign({className:"xar-social-container"},{children:e.map((e=>{return Ce("div",Object.assign({className:"xar-social-icon__wrapper",onClick:()=>(e=>t(e))(e)},{children:Ce("img",{src:(n=e,i=r,Re[`${n}_${i}`]?Re[`${n}_${i}`]:Re[n]),alt:`${e} logo`,className:"xar-social-icon"})}));var n,i}))})),Br=({mode:t})=>{const e=Oe[t];return Ce("div",Object.assign({className:"xar-footer"},{children:Ce("a",Object.assign({href:"https://arcana.network",target:"_blank",className:"xar-footer-img__link"},{children:Ce("img",{className:"xar-footer-img",src:e,alt:"Secured By Arcana"})}))}))},Lr=t=>Ce(he,{children:[t.header?t.header:Ce(kr,{compact:t.compact,stroke:8,secondaryColor:"#8D8D8D"}),t.text?Ce("p",Object.assign({className:"xar-loader__text"},{children:t.text})):"",t.children?Ce(he,{children:t.children}):""]}),Cr=({children:t,mode:e})=>Ce("div",Object.assign({class:"xar-container"},{children:[Ce("div",Object.assign({class:"xar-inner-container"},{children:t})),Ce(Br,{mode:e})]})),Pr=({text:t,method:e})=>Ce("div",Object.assign({class:"xar-action-container"},{children:Ce("p",Object.assign({onClick:()=>e(),className:"xar-action__link"},{children:t}))})),Rr="xar-modal",Or=t=>Ce("div",Object.assign({id:Rr,onClick:e=>{var r;(null===(r=e.target)||void 0===r?void 0:r.id)==Rr&&t.closeFunc&&t.closeFunc(new Error("User closed the connect modal"))}},{children:t.children})),Tr={SOCIAL:"Please complete the login to proceed",LINK:"Sending login link to your email",LINK_SENT:"Please complete the login by clicking on email"},Nr={text:"",loading:!1,type:""},Ur=(t,e)=>"SOCIAL"==e||"LINK"==e||"LINK_SENT"==e?{text:Tr[e],type:e,loading:!0}:"RESET"==e?Nr:t,zr=t=>{const[e,n]=Ze(Ur,Nr),[i,o]=Ge(""),s=()=>r(void 0,void 0,void 0,(function*(){i&&(n("LINK"),t.loginWithLink(i,(()=>{n("LINK_SENT")})).finally((()=>{n("RESET")})))}));return e.loading?Ce(Or,{children:Ce(Cr,Object.assign({mode:t.mode},{children:Ce(Lr,Object.assign({compact:t.options.compact,text:e.text,mode:t.mode,header:"LINK_SENT"==e.type?Ce("img",{className:"xar-success__img",src:lt}):void 0},{children:"LINK_SENT"==e.type?Ce(he,{children:[Ce(Pr,{method:()=>s(),text:"Resend email"}),Ce(Pr,{method:()=>n("RESET"),text:"Change email id"})]}):null}))}))}):Ce(Or,Object.assign({closeFunc:t.closeFunc},{children:Ce(Cr,Object.assign({mode:t.mode},{children:[Ce(xr,{compact:t.options.compact,logo:t.logo}),Ce(Ir,{email:i,setEmail:o,loginWithLink:s}),t.loginList.length>0?Ce(he,{children:[Ce(Mr,{text:"or continue with"}),Ce(Ar,{loginWithSocial:e=>r(void 0,void 0,void 0,(function*(){n("SOCIAL"),t.loginWithSocial(e).finally((()=>{n("RESET")}))})),loginList:t.loginList,mode:t.mode})]}):null]}))}))};class Wr{constructor(t){this.status="closed",this.close=t=>{"closed"!==this.status&&(this.onClose(t),this.status="closed",Be(null,this.container))},this.params={loginList:t.loginList.filter((t=>"passwordless"!==t)),loginWithSocial:t.loginWithSocial,loginWithLink:t.loginWithLink,mode:t.mode,closeFunc:this.close,logo:t.logo,options:t.options},this.createContainer()}open(t){"open"!==this.status&&(this.onClose=t,this.status="open",Be(Ce(zr,Object.assign({},this.params)),this.container))}createContainer(){const t=this.params.options.compact?"compact":"full";this.container=document.createElement("div"),this.container.setAttribute("id","xar-login-container"),this.container.classList.add(`xar-${this.params.mode}-mode`),this.container.classList.add(t),document.body.appendChild(this.container)}}class jr{constructor(t,e,r){this.p=t,this.web3Module=e,this.bs58Module=r}static create(t){return r(this,void 0,void 0,(function*(){const[e,r]=yield Promise.all([Promise.resolve().then((function(){return Vd})),Promise.resolve().then((function(){return Jd}))]);return new jr(t,e,r)}))}get isConnected(){return this.p.connected}request(t){return r(this,void 0,void 0,(function*(){const e=structuredClone(t);if("signMessage"===e.method){const t=e.params;t.message instanceof Uint8Array&&(t.message=this.bs58Module.encode(t.message))}const r=yield this.p.request(e);switch(e.method){case"signMessage":return this.parseSignatureResponse(r);case"signTransaction":return this.web3Module.VersionedTransaction.deserialize(this.bs58Module.decode(r));case"signAllTransactions":return r.map((t=>this.web3Module.VersionedTransaction.deserialize(this.bs58Module.decode(t))));default:return r}}))}parseSignatureResponse(t){return{signature:this.bs58Module.decode(t.signature),publicKey:new this.web3Module.PublicKey(t.publicKey)}}signMessage(t,e){return this.request({method:"signMessage",params:{message:this.bs58Module.encode(t),display:e}})}signTransaction(t){return this.request({method:"signTransaction",params:{message:this.bs58Module.encode(t.serialize())}})}signAndSendTransaction(t){return this.request({method:"signAndSendTransaction",params:{message:this.bs58Module.encode(t.serialize())}})}signAllTransactions(t){return this.request({method:"signAllTransactions",params:{message:t.map((t=>this.bs58Module.encode(t.serialize())))}})}}for(var Fr={},qr={byteLength:function(t){var e=Gr(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=Gr(t),i=n[0],o=n[1],s=new $r(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),a=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=Dr[t.charCodeAt(r)]<<18|Dr[t.charCodeAt(r+1)]<<12|Dr[t.charCodeAt(r+2)]<<6|Dr[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===o&&(e=Dr[t.charCodeAt(r)]<<2|Dr[t.charCodeAt(r+1)]>>4,s[a++]=255&e);1===o&&(e=Dr[t.charCodeAt(r)]<<10|Dr[t.charCodeAt(r+1)]<<4|Dr[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Zr(t,s,s+o>a?a:s+o));1===n?(e=t[r-1],i.push(Kr[e>>2]+Kr[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(Kr[e>>10]+Kr[e>>4&63]+Kr[e<<2&63]+"="));return i.join("")}},Kr=[],Dr=[],$r="undefined"!=typeof Uint8Array?Uint8Array:Array,Hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vr=0;Vr<64;++Vr)Kr[Vr]=Hr[Vr],Dr[Hr.charCodeAt(Vr)]=Vr;function Gr(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Zr(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(Kr[(i=n)>>18&63]+Kr[i>>12&63]+Kr[i>>6&63]+Kr[63&i]);return o.join("")}Dr["-".charCodeAt(0)]=62,Dr["_".charCodeAt(0)]=63;var Jr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Yr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Xr(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Qr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tn(t,e){Xr(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Jr.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=t[e+l];for(l+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=d,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=c}return(f?-1:1)*s*Math.pow(2,o-n)},Jr.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+f]=255&s,f+=p,s/=256,c-=8);t[r+f-p]|=128*g},
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
function(t){const e=qr,r=Jr,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|f(t,e);let n=o(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(V(t,Uint8Array)){const e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer))return l(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return l(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);const i=function(t){if(s.isBuffer(t)){const e=0|d(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||G(t.length)?o(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|d(t))}function h(t){const e=t.length<0?0:0|d(t.length),r=o(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function d(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:D(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return M(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function w(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(G(n))return s;t[r+s]=n}return s}function b(t,e,r,n){return H(D(e,t.length-r),t,r,n)}function v(t,e,r,n){return H(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return H($(e),t,r,n)}function k(t,e,r,n){return H(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function E(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return a(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(V(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),V(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=s.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(V(e,Uint8Array))i+e.length>n.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,i){if(V(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const u=Math.min(o,a),c=this.slice(n,i),h=t.slice(e,r);for(let t=0;t<u;++t)if(c[t]!==h[t]){o=c[t],a=h[t];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":case"latin1":case"binary":return v(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function I(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function M(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Z[t[n]];return i}function B(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function R(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function O(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(t,e,n,i,o){return e=+e,n>>>=0,o||O(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function N(t,e,n,i,o){return e=+e,n>>>=0,o||O(t,0,n,8),r.write(t,e,n,i,52,8),n+8}s.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=J((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),s.prototype.readBigUInt64BE=J((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=J((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=J((function(t){F(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){C(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){C(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=J((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=J((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=J((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=J((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,r){return T(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return T(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=s.isBuffer(t)?t:s.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%a]}return this};const U={};function z(t,e,r){U[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function W(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function j(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){F(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,o)}function F(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw F(t,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function D(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function V(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function G(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Y:t}function Y(){throw new Error("BigInt not supported")}}(Fr);const en="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,rn=t=>t instanceof Uint8Array,nn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),on=(t,e)=>t<<32-e|t>>>e;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function sn(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function an(t){if("string"==typeof t&&(t=sn(t)),!rn(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function un(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!rn(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}class cn{clone(){return this._cloneInto()}}function hn(t){const e=e=>t().update(an(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ln(t=32){if(en&&"function"==typeof en.getRandomValues)return en.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class dn extends cn{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=nn(this.buffer)}update(t){Qr(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=an(t)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=nn(t);for(;n<=i-o;o+=n)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Qr(this),tn(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let t=o;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,c=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=nn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,c[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}const fn=BigInt(2**32-1),pn=BigInt(32);function gn(t,e=!1){return e?{h:Number(t&fn),l:Number(t>>pn&fn)}:{h:0|Number(t>>pn&fn),l:0|Number(t&fn)}}function mn(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=gn(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}const yn=(t,e,r)=>t<<r|e>>>32-r,wn=(t,e,r)=>e<<r|t>>>32-r,bn=(t,e,r)=>e<<r-32|t>>>64-r,vn=(t,e,r)=>t<<r-32|e>>>64-r;const _n={fromBig:gn,split:mn,toBig:(t,e)=>BigInt(t>>>0)<<pn|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:yn,rotlSL:wn,rotlBH:bn,rotlBL:vn,add:function(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[kn,Sn]=(()=>_n.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),En=new Uint32Array(80),xn=new Uint32Array(80);class In extends dn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[t,e,r,n,i,o,s,a,u,c,h,l,d,f,p,g]}set(t,e,r,n,i,o,s,a,u,c,h,l,d,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)En[r]=t.getUint32(e),xn[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|En[t-15],r=0|xn[t-15],n=_n.rotrSH(e,r,1)^_n.rotrSH(e,r,8)^_n.shrSH(e,r,7),i=_n.rotrSL(e,r,1)^_n.rotrSL(e,r,8)^_n.shrSL(e,r,7),o=0|En[t-2],s=0|xn[t-2],a=_n.rotrSH(o,s,19)^_n.rotrBH(o,s,61)^_n.shrSH(o,s,6),u=_n.rotrSL(o,s,19)^_n.rotrBL(o,s,61)^_n.shrSL(o,s,6),c=_n.add4L(i,u,xn[t-7],xn[t-16]),h=_n.add4H(c,n,a,En[t-7],En[t-16]);En[t]=0|h,xn[t]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:c,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let t=0;t<80;t++){const e=_n.rotrSH(h,l,14)^_n.rotrSH(h,l,18)^_n.rotrBH(h,l,41),w=_n.rotrSL(h,l,14)^_n.rotrSL(h,l,18)^_n.rotrBL(h,l,41),b=h&d^~h&p,v=l&f^~l&g,_=_n.add5L(y,w,v,Sn[t],xn[t]),k=_n.add5H(_,m,e,b,kn[t],En[t]),S=0|_,E=_n.rotrSH(r,n,28)^_n.rotrBH(r,n,34)^_n.rotrBH(r,n,39),x=_n.rotrSL(r,n,28)^_n.rotrBL(r,n,34)^_n.rotrBL(r,n,39),I=r&i^r&s^i&s,M=n&o^n&a^o&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|h,f=0|l,({h:h,l:l}=_n.add(0|u,0|c,0|k,0|S)),u=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const A=_n.add3L(S,x,M);r=_n.add3H(A,k,E,I),n=0|A}({h:r,l:n}=_n.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=_n.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=_n.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=_n.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:h,l:l}=_n.add(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=_n.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=_n.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=_n.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,o,s,a,u,c,h,l,d,f,p,g,m,y)}roundClean(){En.fill(0),xn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Mn=hn((()=>new In)),An=BigInt(0),Bn=BigInt(1),Ln=BigInt(2),Cn=t=>t instanceof Uint8Array,Pn=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rn(t){if(!Cn(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Pn[t[r]];return e}function On(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Tn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Nn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[e]=o}return r}function Un(t){return Tn(Rn(t))}function zn(t){if(!Cn(t))throw new Error("Uint8Array expected");return Tn(Rn(Uint8Array.from(t).reverse()))}function Wn(t,e){return Nn(t.toString(16).padStart(2*e,"0"))}function jn(t,e){return Wn(t,e).reverse()}function Fn(t,e,r){let n;if("string"==typeof e)try{n=Nn(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!Cn(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function qn(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Cn(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const Kn=t=>(Ln<<BigInt(t-1))-Bn,Dn=t=>new Uint8Array(t),$n=t=>Uint8Array.from(t);function Hn(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Dn(t),i=Dn(t),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...t)=>r(i,n,...t),u=(t=Dn())=>{i=a($n([0]),t),n=a(),0!==t.length&&(i=a($n([1]),t),n=a())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return qn(...r)};return(t,e)=>{let r;for(s(),u(t);!(r=e(c()));)u();return s(),r}}const Vn={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Gn(t,e,r={}){const n=(e,r,n)=>{const i=Vn[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=t[e];if(!(n&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}var Zn=Object.freeze({__proto__:null,bytesToHex:Rn,numberToHexUnpadded:On,hexToNumber:Tn,hexToBytes:Nn,bytesToNumberBE:Un,bytesToNumberLE:zn,numberToBytesBE:Wn,numberToBytesLE:jn,numberToVarBytesBE:function(t){return Nn(On(t))},ensureBytes:Fn,concatBytes:qn,equalBytes:function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},utf8ToBytes:function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))},bitLen:function(t){let e;for(e=0;t>An;t>>=Bn,e+=1);return e},bitGet:function(t,e){return t>>BigInt(e)&Bn},bitSet:(t,e,r)=>t|(r?Bn:An)<<BigInt(e),bitMask:Kn,createHmacDrbg:Hn,validateObject:Gn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jn=BigInt(0),Yn=BigInt(1),Xn=BigInt(2),Qn=BigInt(3),ti=BigInt(4),ei=BigInt(5),ri=BigInt(8);function ni(t,e){const r=t%e;return r>=Jn?r:e+r}function ii(t,e,r){if(r<=Jn||e<Jn)throw new Error("Expected power/modulo > 0");if(r===Yn)return Jn;let n=Yn;for(;e>Jn;)e&Yn&&(n=n*t%r),t=t*t%r,e>>=Yn;return n}function oi(t,e,r){let n=t;for(;e-- >Jn;)n*=n,n%=r;return n}function si(t,e){if(t===Jn||e<=Jn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=ni(t,e),n=e,i=Jn,o=Yn;for(;r!==Jn;){const t=n%r,e=i-o*(n/r);n=r,r=t,i=o,o=e}if(n!==Yn)throw new Error("invert: does not exist");return ni(i,e)}function ai(t){if(t%ti===Qn){const e=(t+Yn)/ti;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%ri===ei){const e=(t-ei)/ri;return function(t,r){const n=t.mul(r,Xn),i=t.pow(n,e),o=t.mul(r,i),s=t.mul(t.mul(o,Xn),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Yn)/Xn;let r,n,i;for(r=t-Yn,n=0;r%Xn===Jn;r/=Xn,n++);for(i=Xn;i<t&&ii(i,e,t)!==t-Yn;i++);if(1===n){const e=(t+Yn)/ti;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+Yn)/Xn;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=n,u=t.pow(t.mul(t.ONE,i),r),c=t.pow(s,o),h=t.pow(s,r);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(u,Yn<<BigInt(a-e-1));u=t.sqr(r),c=t.mul(c,r),h=t.mul(h,u),a=e}return c}}(t)}BigInt(9),BigInt(16);const ui=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ci(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function hi(t,e,r=!1,n={}){if(t<=Jn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=ci(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=ai(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Kn(i),ZERO:Jn,ONE:Yn,create:e=>ni(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Jn<=e&&e<t},is0:t=>t===Jn,isOdd:t=>(t&Yn)===Yn,neg:e=>ni(-e,t),eql:(t,e)=>t===e,sqr:e=>ni(e*e,t),add:(e,r)=>ni(e+r,t),sub:(e,r)=>ni(e-r,t),mul:(e,r)=>ni(e*r,t),pow:(t,e)=>function(t,e,r){if(r<Jn)throw new Error("Expected power > 0");if(r===Jn)return t.ONE;if(r===Yn)return e;let n=t.ONE,i=e;for(;r>Jn;)r&Yn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Yn;return n}(a,t,e),div:(e,r)=>ni(e*si(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>si(e,t),sqrt:n.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n))),t.ONE),i=t.inv(n);return e.reduceRight(((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n))),i),r}(a,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?jn(t,o):Wn(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return r?zn(t):Un(t)}});return Object.freeze(a)}function li(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function di(t){const e=li(t);return e+Math.ceil(e/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const fi=BigInt(0),pi=BigInt(1);function gi(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>fi;)r&pi&&(n=n.add(i)),i=i.double(),r>>=pi;return n},precomputeWindow(t,e){const{windows:r,windowSize:i}=n(e),o=[];let s=t,a=s;for(let t=0;t<r;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=n(e);let u=t.ZERO,c=t.BASE;const h=BigInt(2**e-1),l=2**e,d=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let n=Number(o&h);o>>=d,n>a&&(n-=l,o+=pi);const s=e,f=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?c=c.add(r(p,i[s])):u=u.add(r(g,i[f]))}return{p:u,f:c}},wNAFCached(t,e,r,n){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,n(o))),this.wNAF(i,o,r)}}}function mi(t){return Gn(t.Fp,ui.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Gn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ci(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yi=BigInt(0),wi=BigInt(1),bi=BigInt(2),vi=BigInt(8),_i={zip215:!0};function ki(t){const e=function(t){const e=mi(t);return Gn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n:n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=e,c=bi<<BigInt(8*a)-wi,h=r.create,l=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:yi}}}),d=e.adjustScalarBytes||(t=>t),f=e.domain||((t,e,r)=>{if(e.length||r)throw new Error("Contexts/pre-hash are not supported");return t}),p=t=>"bigint"==typeof t&&yi<t,g=(t,e)=>p(t)&&p(e)&&t<e,m=t=>t===yi||g(t,c);function y(t,e){if(g(t,e))return t;throw new Error(`Expected valid scalar < ${e}, got ${typeof t} ${t}`)}function w(t){return t===yi?t:y(t,n)}const b=new Map;function v(t){if(!(t instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(t,e,r,n){if(this.ex=t,this.ey=e,this.ez=r,this.et=n,!m(t))throw new Error("x required");if(!m(e))throw new Error("y required");if(!m(r))throw new Error("z required");if(!m(n))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof _)throw new Error("extended point not allowed");const{x:e,y:r}=t||{};if(!m(e)||!m(r))throw new Error("invalid affine point");return new _(e,r,wi,h(e*r))}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.ez)));return t.map(((t,r)=>t.toAffine(e[r]))).map(_.fromAffine)}_setWindowSize(t){this._WINDOW_SIZE=t,b.delete(this)}assertValidity(){const{a:t,d:r}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:s}=this,a=h(n*n),u=h(i*i),c=h(o*o),l=h(c*c),d=h(a*t);if(h(c*h(d+u))!==h(l+h(r*h(a*u))))throw new Error("bad point: equation left != right (1)");if(h(n*i)!==h(o*s))throw new Error("bad point: equation left != right (2)")}equals(t){v(t);const{ex:e,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=t,a=h(e*s),u=h(i*n),c=h(r*s),l=h(o*n);return a===u&&c===l}is0(){return this.equals(_.ZERO)}negate(){return new _(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:t}=e,{ex:r,ey:n,ez:i}=this,o=h(r*r),s=h(n*n),a=h(bi*h(i*i)),u=h(t*o),c=r+n,l=h(h(c*c)-o-s),d=u+s,f=d-a,p=u-s,g=h(l*f),m=h(d*p),y=h(l*p),w=h(f*d);return new _(g,m,w,y)}add(t){v(t);const{a:r,d:n}=e,{ex:i,ey:o,ez:s,et:a}=this,{ex:u,ey:c,ez:l,et:d}=t;if(r===BigInt(-1)){const t=h((o-i)*(c+u)),e=h((o+i)*(c-u)),r=h(e-t);if(r===yi)return this.double();const n=h(s*bi*d),f=h(a*bi*l),p=f+n,g=e+t,m=f-n,y=h(p*r),w=h(g*m),b=h(p*m),v=h(r*g);return new _(y,w,v,b)}const f=h(i*u),p=h(o*c),g=h(a*n*d),m=h(s*l),y=h((i+o)*(u+c)-f-p),w=m-g,b=m+g,k=h(p-r*f),S=h(y*w),E=h(b*k),x=h(y*k),I=h(w*b);return new _(S,E,I,x)}subtract(t){return this.add(t.negate())}wNAF(t){return E.wNAFCached(this,b,t,_.normalizeZ)}multiply(t){const{p:e,f:r}=this.wNAF(y(t,n));return _.normalizeZ([e,r])[0]}multiplyUnsafe(t){let e=w(t);return e===yi?S:this.equals(S)||e===wi?this:this.equals(k)?this.wNAF(e).p:E.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(t){const{ex:e,ey:n,ez:i}=this,o=this.is0();null==t&&(t=o?vi:r.inv(i));const s=h(e*t),a=h(n*t),u=h(i*t);if(o)return{x:yi,y:wi};if(u!==wi)throw new Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){const{h:t}=e;return t===wi?this:this.multiplyUnsafe(t)}static fromHex(t,n=!1){const{d:i,a:o}=e,s=r.BYTES,a=(t=Fn("pointHex",t,s)).slice(),u=t[s-1];a[s-1]=-129&u;const d=zn(a);d===yi||y(d,n?c:r.ORDER);const f=h(d*d),p=h(f-wi),g=h(i*f-o);let{isValid:m,value:w}=l(p,g);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const b=(w&wi)===wi,v=0!=(128&u);if(!n&&w===yi&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==b&&(w=h(-w)),_.fromAffine({x:w,y:d})}static fromPrivateKey(t){return M(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),n=jn(e,r.BYTES);return n[n.length-1]|=t&wi?128:0,n}toHex(){return Rn(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,wi,h(e.Gx*e.Gy)),_.ZERO=new _(yi,wi,wi,yi);const{BASE:k,ZERO:S}=_,E=gi(_,8*a);function x(t){return ni(t,n)}function I(t){return x(zn(t))}function M(t){const e=a;t=Fn("private key",t,e);const r=Fn("hashed private key",o(t),2*e),n=d(r.slice(0,e)),i=r.slice(e,2*e),s=I(n),u=k.multiply(s),c=u.toRawBytes();return{head:n,prefix:i,scalar:s,point:u,pointBytes:c}}function A(t=new Uint8Array,...e){const r=qn(...e);return I(o(f(r,Fn("context",t),!!i)))}const B=_i;k._setWindowSize(8);return{CURVE:e,getPublicKey:function(t){return M(t).pointBytes},sign:function(t,e,n={}){t=Fn("message",t),i&&(t=i(t));const{prefix:o,scalar:s,pointBytes:u}=M(e),c=A(n.context,o,t),h=k.multiply(c).toRawBytes(),l=x(c+A(n.context,h,u,t)*s);return w(l),Fn("result",qn(h,jn(l,r.BYTES)),2*a)},verify:function(t,e,n,o=B){const{context:s,zip215:a}=o,u=r.BYTES;t=Fn("signature",t,2*u),e=Fn("message",e),i&&(e=i(e));const c=zn(t.slice(u,2*u));let h,l,d;try{h=_.fromHex(n,a),l=_.fromHex(t.slice(0,u),a),d=k.multiplyUnsafe(c)}catch(t){return!1}if(!a&&h.isSmallOrder())return!1;const f=A(s,l.toRawBytes(),h.toRawBytes(),e);return l.add(h.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>s(r.BYTES),precompute:(t=8,e=_.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Si=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ei=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const xi=BigInt(1),Ii=BigInt(2),Mi=BigInt(5),Ai=BigInt(10),Bi=BigInt(20),Li=BigInt(40),Ci=BigInt(80);const Pi=hi(Si,void 0,!0),Ri={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Pi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Mn,randomBytes:ln,adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},uvRatio:function(t,e){const r=Si,n=ni(e*e*e,r),i=function(t){const e=Si,r=t*t%e*t%e,n=oi(r,Ii,e)*r%e,i=oi(n,xi,e)*t%e,o=oi(i,Mi,e)*i%e,s=oi(o,Ai,e)*o%e,a=oi(s,Bi,e)*s%e,u=oi(a,Li,e)*a%e,c=oi(u,Ci,e)*u%e,h=oi(c,Ci,e)*u%e,l=oi(h,Ai,e)*o%e;return{pow_p_5_8:oi(l,Ii,e)*t%e,b2:r}}(t*ni(n*n*e,r)).pow_p_5_8;let o=ni(t*n*i,r);const s=ni(e*o*o,r),a=o,u=ni(o*Ei,r),c=s===t,h=s===ni(-t,r),l=s===ni(-t*Ei,r);return c&&(o=a),(h||l)&&(o=u),(ni(o,r)&Yn)===Yn&&(o=ni(-o,r)),{isValid:c||h,value:o}}},Oi=ki(Ri);const Ti=(Pi.ORDER+BigInt(3))/BigInt(8);Pi.pow(Ii,Ti),Pi.sqrt(Pi.neg(Pi.ONE)),Pi.ORDER,BigInt(5),BigInt(8),BigInt(486662),function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);t.isOdd(r)&&t.neg(r)}(Pi,Pi.neg(BigInt(486664))),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ni={exports:{}},Ui=o(Object.freeze({__proto__:null,default:{}}));!function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Ui.Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,s=0,a=Math.min(t.length,n),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){c(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?l[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],h=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(h).toString(t);n=(p=p.idivn(h)).isZero()?g+n:l[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[f])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,w=m>>>13,b=0|s[3],v=8191&b,_=b>>>13,k=0|s[4],S=8191&k,E=k>>>13,x=0|s[5],I=8191&x,M=x>>>13,A=0|s[6],B=8191&A,L=A>>>13,C=0|s[7],P=8191&C,R=C>>>13,O=0|s[8],T=8191&O,N=O>>>13,U=0|s[9],z=8191&U,W=U>>>13,j=0|a[0],F=8191&j,q=j>>>13,K=0|a[1],D=8191&K,$=K>>>13,H=0|a[2],V=8191&H,G=H>>>13,Z=0|a[3],J=8191&Z,Y=Z>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(c+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(d,F)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(g,F)|0,o=Math.imul(g,q);var yt=(c+(n=n+Math.imul(l,D)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(d,D)|0))<<13)|0;c=((o=o+Math.imul(d,$)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,q))+Math.imul(w,F)|0,o=Math.imul(w,q),n=n+Math.imul(p,D)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,D)|0,o=o+Math.imul(g,$)|0;var wt=(c+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(d,V)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(v,F),i=(i=Math.imul(v,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(y,D)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,D)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0;var bt=(c+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,F),i=(i=Math.imul(S,q))+Math.imul(E,F)|0,o=Math.imul(E,q),n=n+Math.imul(v,D)|0,i=(i=i+Math.imul(v,$)|0)+Math.imul(_,D)|0,o=o+Math.imul(_,$)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var vt=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(M,F)|0,o=Math.imul(M,q),n=n+Math.imul(S,D)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(E,D)|0,o=o+Math.imul(E,$)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var _t=(c+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(d,rt)|0))<<13)|0;c=((o=o+Math.imul(d,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(L,F)|0,o=Math.imul(L,q),n=n+Math.imul(I,D)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(M,D)|0,o=o+Math.imul(M,$)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(v,J)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var kt=(c+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(B,D)|0,i=(i=i+Math.imul(B,$)|0)+Math.imul(L,D)|0,o=o+Math.imul(L,$)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var St=(c+(n=n+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(P,D)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(R,D)|0,o=o+Math.imul(R,$)|0,n=n+Math.imul(B,V)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ct)|0;var Et=(c+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,q))+Math.imul(W,F)|0,o=Math.imul(W,q),n=n+Math.imul(T,D)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(N,D)|0,o=o+Math.imul(N,$)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,G)|0,n=n+Math.imul(B,J)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,dt)|0;var xt=(c+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(z,D),i=(i=Math.imul(z,$))+Math.imul(W,D)|0,o=Math.imul(W,$),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,n=n+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,dt)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,dt)|0;var It=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,V),i=(i=Math.imul(z,G))+Math.imul(W,V)|0,o=Math.imul(W,G),n=n+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,dt)|0;var Mt=(c+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,J),i=(i=Math.imul(z,Y))+Math.imul(W,J)|0,o=Math.imul(W,Y),n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(E,lt)|0,o=o+Math.imul(E,dt)|0;var At=(c+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,Q),i=(i=Math.imul(z,tt))+Math.imul(W,Q)|0,o=Math.imul(W,tt),n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,dt)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,dt)|0;var Bt=(c+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(W,rt)|0,o=Math.imul(W,nt),n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,dt)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,dt)|0;var Lt=(c+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(W,ot)|0,o=Math.imul(W,st),n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,dt)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,dt)|0;var Ct=(c+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,ut),i=(i=Math.imul(z,ct))+Math.imul(W,ut)|0,o=Math.imul(W,ct),n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,dt)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,dt)|0;var Pt=(c+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,gt)|0)+Math.imul(R,pt)|0))<<13)|0;c=((o=o+Math.imul(R,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,dt))+Math.imul(W,lt)|0,o=Math.imul(W,dt);var Rt=(c+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Ot=(c+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,gt))+Math.imul(W,pt)|0))<<13)|0;return c=((o=Math.imul(W,gt))+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,u[0]=mt,u[1]=yt,u[2]=wt,u[3]=bt,u[4]=vt,u[5]=_t,u[6]=kt,u[7]=St,u[8]=Et,u[9]=xt,u[10]=It,u[11]=Mt,u[12]=At,u[13]=Bt,u[14]=Lt,u[15]=Ct,u[16]=Pt,u[17]=Rt,u[18]=Ot,0!==c&&(u[19]=c,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(t,e,r){return m(t,e,r)}Math.imul||(g=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):r<63?p(this,t,e):r<1024?m(this,t,e):y(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),y(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==e){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=n.clone()._ishlnsubmul(o,1,u);0===h.negative&&(n=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(h),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(u)):(n.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new E(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,b),n(k,b),n(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return w[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(l,new i(1).iushln(p-m-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=m}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],h=u-1;h>=0;h--){var l=c>>h&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new x(t)},n(x,E),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,n)}(Ni);var zi=Ni.exports,Wi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(t,e){var r=Fr,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(Wi,Wi.exports);var ji=Wi.exports.Buffer;var Fi=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return ji.alloc(0);for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;var p=ji.allocUnsafe(n+(o-f));p.fill(0,0,n);for(var g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=ji.from(e)),!ji.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},qi=Fi("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const Ki=(t,e,r)=>t&e^~t&r,Di=(t,e,r)=>t&e^t&r^e&r,$i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vi=new Uint32Array(64);class Gi extends dn{constructor(){super(64,32,8,!1),this.A=0|Hi[0],this.B=0|Hi[1],this.C=0|Hi[2],this.D=0|Hi[3],this.E=0|Hi[4],this.F=0|Hi[5],this.G=0|Hi[6],this.H=0|Hi[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)Vi[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Vi[t-15],r=Vi[t-2],n=on(e,7)^on(e,18)^e>>>3,i=on(r,17)^on(r,19)^r>>>10;Vi[t]=i+Vi[t-7]+n+Vi[t-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(on(s,6)^on(s,11)^on(s,25))+Ki(s,a,u)+$i[t]+Vi[t]|0,h=(on(r,2)^on(r,13)^on(r,22))+Di(r,n,i)|0;c=u,u=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,u,c)}roundClean(){Vi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Zi=hn((()=>new Gi));var Ji={},Yi={exports:{}};!function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Ui.Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,s=0,a=Math.min(t.length,n),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){c(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?l[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],h=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(h).toString(t);n=(p=p.idivn(h)).isZero()?g+n:l[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[f])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,w=m>>>13,b=0|s[3],v=8191&b,_=b>>>13,k=0|s[4],S=8191&k,E=k>>>13,x=0|s[5],I=8191&x,M=x>>>13,A=0|s[6],B=8191&A,L=A>>>13,C=0|s[7],P=8191&C,R=C>>>13,O=0|s[8],T=8191&O,N=O>>>13,U=0|s[9],z=8191&U,W=U>>>13,j=0|a[0],F=8191&j,q=j>>>13,K=0|a[1],D=8191&K,$=K>>>13,H=0|a[2],V=8191&H,G=H>>>13,Z=0|a[3],J=8191&Z,Y=Z>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(c+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(d,F)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(g,F)|0,o=Math.imul(g,q);var yt=(c+(n=n+Math.imul(l,D)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(d,D)|0))<<13)|0;c=((o=o+Math.imul(d,$)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,q))+Math.imul(w,F)|0,o=Math.imul(w,q),n=n+Math.imul(p,D)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,D)|0,o=o+Math.imul(g,$)|0;var wt=(c+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(d,V)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(v,F),i=(i=Math.imul(v,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(y,D)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,D)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0;var bt=(c+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,F),i=(i=Math.imul(S,q))+Math.imul(E,F)|0,o=Math.imul(E,q),n=n+Math.imul(v,D)|0,i=(i=i+Math.imul(v,$)|0)+Math.imul(_,D)|0,o=o+Math.imul(_,$)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var vt=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(M,F)|0,o=Math.imul(M,q),n=n+Math.imul(S,D)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(E,D)|0,o=o+Math.imul(E,$)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var _t=(c+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(d,rt)|0))<<13)|0;c=((o=o+Math.imul(d,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(L,F)|0,o=Math.imul(L,q),n=n+Math.imul(I,D)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(M,D)|0,o=o+Math.imul(M,$)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(v,J)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var kt=(c+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(B,D)|0,i=(i=i+Math.imul(B,$)|0)+Math.imul(L,D)|0,o=o+Math.imul(L,$)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var St=(c+(n=n+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(P,D)|0,i=(i=i+Math.imul(P,$)|0)+Math.imul(R,D)|0,o=o+Math.imul(R,$)|0,n=n+Math.imul(B,V)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ct)|0;var Et=(c+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,q))+Math.imul(W,F)|0,o=Math.imul(W,q),n=n+Math.imul(T,D)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(N,D)|0,o=o+Math.imul(N,$)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,G)|0,n=n+Math.imul(B,J)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,dt)|0;var xt=(c+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(z,D),i=(i=Math.imul(z,$))+Math.imul(W,D)|0,o=Math.imul(W,$),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,n=n+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,dt)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,dt)|0;var It=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,V),i=(i=Math.imul(z,G))+Math.imul(W,V)|0,o=Math.imul(W,G),n=n+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,dt)|0;var Mt=(c+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,J),i=(i=Math.imul(z,Y))+Math.imul(W,J)|0,o=Math.imul(W,Y),n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(E,lt)|0,o=o+Math.imul(E,dt)|0;var At=(c+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,Q),i=(i=Math.imul(z,tt))+Math.imul(W,Q)|0,o=Math.imul(W,tt),n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,dt)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,dt)|0;var Bt=(c+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(W,rt)|0,o=Math.imul(W,nt),n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,dt)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,dt)|0;var Lt=(c+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(W,ot)|0,o=Math.imul(W,st),n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,dt)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,dt)|0;var Ct=(c+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,ut),i=(i=Math.imul(z,ct))+Math.imul(W,ut)|0,o=Math.imul(W,ct),n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,dt)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,dt)|0;var Pt=(c+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,gt)|0)+Math.imul(R,pt)|0))<<13)|0;c=((o=o+Math.imul(R,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,dt))+Math.imul(W,lt)|0,o=Math.imul(W,dt);var Rt=(c+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Ot=(c+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,gt))+Math.imul(W,pt)|0))<<13)|0;return c=((o=Math.imul(W,gt))+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,u[0]=mt,u[1]=yt,u[2]=wt,u[3]=bt,u[4]=vt,u[5]=_t,u[6]=kt,u[7]=St,u[8]=Et,u[9]=xt,u[10]=It,u[11]=Mt,u[12]=At,u[13]=Bt,u[14]=Lt,u[15]=Ct,u[16]=Pt,u[17]=Rt,u[18]=Ot,0!==c&&(u[19]=c,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(t,e,r){return m(t,e,r)}Math.imul||(g=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):r<63?p(this,t,e):r<1024?m(this,t,e):y(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),y(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==e){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=n.clone()._ishlnsubmul(o,1,u);0===h.negative&&(n=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(h),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(u)):(n.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new E(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,b),n(k,b),n(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return w[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(l,new i(1).iushln(p-m-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=m}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],h=u-1;h>=0;h--){var l=c>>h&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new x(t)},n(x,E),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,n)}(Yi);var Xi=Wi.exports.Buffer;var Qi=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return Xi.alloc(0);for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;var p=Xi.allocUnsafe(n+(o-f));p.fill(0,0,n);for(var g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=Xi.from(e)),!Xi.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},to=Qi("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function eo(t,e,r){return e<=t&&t<=r}function ro(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function no(t){this.tokens=[].slice.call(t)}no.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var io=-1;function oo(t,e){if(t)throw TypeError("Decoder error");return e||65533}var so="utf-8";function ao(t,e){if(!(this instanceof ao))return new ao(t,e);if((t=void 0!==t?String(t).toLowerCase():so)!==so)throw new Error("Encoding not supported. Only utf-8 is supported");e=ro(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function uo(t,e){if(!(this instanceof uo))return new uo(t,e);if((t=void 0!==t?String(t).toLowerCase():so)!==so)throw new Error("Encoding not supported. Only utf-8 is supported");e=ro(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function co(t){var e=t.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,oo(e);if(-1===a)return io;if(0===i){if(eo(a,0,127))return a;if(eo(a,194,223))i=1,r=a-192;else if(eo(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,r=a-224;else{if(!eo(a,240,244))return oo(e);240===a&&(o=144),244===a&&(s=143),i=3,r=a-240}return r<<=6*i,null}if(!eo(a,o,s))return r=i=n=0,o=128,s=191,t.prepend(a),oo(e);if(o=128,s=191,r+=a-128<<6*(i-(n+=1)),n!==i)return null;var u=r;return r=i=n=0,u}}function ho(t){t.fatal,this.handler=function(t,e){if(-1===e)return io;if(eo(e,0,127))return e;var r,n;eo(e,128,2047)?(r=1,n=192):eo(e,2048,65535)?(r=2,n=224):eo(e,65536,1114111)&&(r=3,n=240);for(var i=[(e>>6*r)+n];r>0;){var o=e>>6*(r-1);i.push(128|63&o),r-=1}return i}}ao.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=ro(e),this._streaming||(this._decoder=new co({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var n,i=new no(r),o=[];!i.endOfStream()&&(n=this._decoder.handler(i,i.read()))!==io;)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if((n=this._decoder.handler(i,i.read()))===io)break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(o)}},uo.prototype={encode:function(t,e){t=t?String(t):"",e=ro(e),this._streaming||(this._encoder=new ho(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],i=new no(function(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(t));!i.endOfStream()&&(r=this._encoder.handler(i,i.read()))!==io;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(i,i.read()))!==io;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};var lo=o(Object.freeze({__proto__:null,TextEncoder:uo,TextDecoder:ao})),fo=n&&n.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),po=n&&n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),go=n&&n.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},mo=n&&n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&fo(e,t,r);return po(e,t),e},yo=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});var wo=Ji.deserializeUnchecked=Oo=Ji.deserialize=Co=Ji.serialize=Ji.BinaryReader=Ji.BinaryWriter=Ji.BorshError=Ji.baseDecode=Ji.baseEncode=void 0;const bo=yo(Yi.exports),vo=yo(to),_o=mo(lo),ko=new("function"!=typeof TextDecoder?_o.TextDecoder:TextDecoder)("utf-8",{fatal:!0});Ji.baseEncode=function(t){return"string"==typeof t&&(t=Buffer.from(t,"utf8")),vo.default.encode(Buffer.from(t))},Ji.baseDecode=function(t){return Buffer.from(vo.default.decode(t))};const So=1024;class Eo extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ji.BorshError=Eo;class xo{constructor(){this.buf=Buffer.alloc(So),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(So)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bo.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bo.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bo.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bo.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(So)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function Io(t,e,r){const n=r.value;r.value=function(...t){try{return n.apply(this,t)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new Eo("Reached the end of buffer when deserializing")}throw t}}}Ji.BinaryWriter=xo;class Mo{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new bo.default(t,"le")}readU128(){const t=this.readBuffer(16);return new bo.default(t,"le")}readU256(){const t=this.readBuffer(32);return new bo.default(t,"le")}readU512(){const t=this.readBuffer(64);return new bo.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Eo(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return ko.decode(e)}catch(t){throw new Eo(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let n=0;n<e;++n)r.push(t());return r}}function Ao(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Bo(t,e,r,n,i){try{if("string"==typeof n)i[`write${Ao(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new Eo(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new Eo(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let e=0;e<n[1];e++)Bo(t,null,r[e],n[0],i)}else i.writeArray(r,(r=>{Bo(t,e,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),Bo(t,e,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,o)=>{Bo(t,e,o,n.key,i),Bo(t,e,r,n.value,i)}));break;default:throw new Eo(`FieldType ${n} unrecognized`)}else Lo(t,r,i)}catch(t){throw t instanceof Eo&&t.addToFieldPath(e),t}}function Lo(t,e,r){if("function"==typeof e.borshSerialize)return void e.borshSerialize(r);const n=t.get(e.constructor);if(!n)throw new Eo(`Class ${e.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{Bo(t,n,e[n],i,r)}));else{if("enum"!==n.kind)throw new Eo(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`);{const i=e[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),Bo(t,s,e[s],a,r);break}}}}}go([Io],Mo.prototype,"readU8",null),go([Io],Mo.prototype,"readU16",null),go([Io],Mo.prototype,"readU32",null),go([Io],Mo.prototype,"readU64",null),go([Io],Mo.prototype,"readU128",null),go([Io],Mo.prototype,"readU256",null),go([Io],Mo.prototype,"readU512",null),go([Io],Mo.prototype,"readString",null),go([Io],Mo.prototype,"readFixedArray",null),go([Io],Mo.prototype,"readArray",null),Ji.BinaryReader=Mo;var Co=Ji.serialize=function(t,e,r=xo){const n=new r;return Lo(t,e,n),n.toArray()};function Po(t,e,r,n){try{if("string"==typeof r)return n[`read${Ao(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const e=[];for(let i=0;i<r[1];i++)e.push(Po(t,null,r[0],n));return e}return n.readArray((()=>Po(t,e,r[0],n)))}if("option"===r.kind){return n.readU8()?Po(t,e,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=Po(t,e,r.key,n),s=Po(t,e,r.value,n);i.set(o,s)}return i}return Ro(t,r,n)}catch(t){throw t instanceof Eo&&t.addToFieldPath(e),t}}function Ro(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Eo(`Class ${e.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of t.get(e).fields)n[i]=Po(t,i,o,r);return new e(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new Eo(`Enum index: ${i} is out of range`);const[o,s]=n.values[i];return new e({[o]:Po(t,o,s,r)})}throw new Eo(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}var Oo=Ji.deserialize=function(t,e,r,n=Mo){const i=new n(r),o=Ro(t,e,i);if(i.offset<r.length)throw new Eo(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o};wo=Ji.deserializeUnchecked=function(t,e,r,n=Mo){return Ro(t,e,new n(r))};var To={};Object.defineProperty(To,"__esModule",{value:!0}),To.s16=To.s8=To.nu64be=To.u48be=To.u40be=To.u32be=To.u24be=To.u16be=Ss=To.nu64=To.u48=To.u40=ks=To.u32=To.u24=_s=To.u16=vs=To.u8=bs=To.offset=To.greedy=To.Constant=To.UTF8=To.CString=To.Blob=To.Boolean=To.BitField=To.BitStructure=To.VariantLayout=To.Union=To.UnionLayoutDiscriminator=To.UnionDiscriminator=To.Structure=To.Sequence=To.DoubleBE=To.Double=To.FloatBE=To.Float=To.NearInt64BE=To.NearInt64=To.NearUInt64BE=To.NearUInt64=To.IntBE=To.Int=To.UIntBE=To.UInt=To.OffsetLayout=To.GreedyCount=To.ExternalLayout=To.bindConstructorLayout=To.nameWithProperty=To.Layout=To.uint8ArrayToBuffer=To.checkUint8Array=void 0,To.constant=To.utf8=To.cstr=Ms=To.blob=To.unionLayoutDiscriminator=To.union=Is=To.seq=To.bits=xs=To.struct=To.f64be=To.f64=To.f32be=To.f32=To.ns64be=To.s48be=To.s40be=To.s32be=To.s24be=To.s16be=Es=To.ns64=To.s48=To.s40=To.s32=To.s24=void 0;const No=Fr;function Uo(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function zo(t){return Uo(t),No.Buffer.from(t.buffer,t.byteOffset,t.length)}To.checkUint8Array=Uo,To.uint8ArrayToBuffer=zo;class Wo{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function jo(t,e){return e.property?t+"["+e.property+"]":t}To.Layout=Wo,To.nameWithProperty=jo,To.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Wo))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,r)=>e.decode(t,r),writable:!0})};class Fo extends Wo{isCount(){throw new Error("ExternalLayout is abstract")}}To.ExternalLayout=Fo;class qo extends Fo{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Uo(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}To.GreedyCount=qo;class Ko extends Fo{constructor(t,e=0,r){if(!(t instanceof Wo))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Do||this.layout instanceof $o}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}To.OffsetLayout=Ko;class Do extends Wo{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return zo(t).readUIntLE(e,this.span)}encode(t,e,r=0){return zo(e).writeUIntLE(t,r,this.span),this.span}}To.UInt=Do;class $o extends Wo{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return zo(t).readUIntBE(e,this.span)}encode(t,e,r=0){return zo(e).writeUIntBE(t,r,this.span),this.span}}To.UIntBE=$o;class Ho extends Wo{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return zo(t).readIntLE(e,this.span)}encode(t,e,r=0){return zo(e).writeIntLE(t,r,this.span),this.span}}To.Int=Ho;class Vo extends Wo{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return zo(t).readIntBE(e,this.span)}encode(t,e,r=0){return zo(e).writeIntBE(t,r,this.span),this.span}}To.IntBE=Vo;const Go=Math.pow(2,32);function Zo(t){const e=Math.floor(t/Go);return{hi32:e,lo32:t-e*Go}}function Jo(t,e){return t*Go+e}class Yo extends Wo{constructor(t){super(8,t)}decode(t,e=0){const r=zo(t),n=r.readUInt32LE(e);return Jo(r.readUInt32LE(e+4),n)}encode(t,e,r=0){const n=Zo(t),i=zo(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}To.NearUInt64=Yo;class Xo extends Wo{constructor(t){super(8,t)}decode(t,e=0){const r=zo(t);return Jo(r.readUInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=Zo(t),i=zo(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}To.NearUInt64BE=Xo;class Qo extends Wo{constructor(t){super(8,t)}decode(t,e=0){const r=zo(t),n=r.readUInt32LE(e);return Jo(r.readInt32LE(e+4),n)}encode(t,e,r=0){const n=Zo(t),i=zo(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}To.NearInt64=Qo;class ts extends Wo{constructor(t){super(8,t)}decode(t,e=0){const r=zo(t);return Jo(r.readInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=Zo(t),i=zo(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}To.NearInt64BE=ts;class es extends Wo{constructor(t){super(4,t)}decode(t,e=0){return zo(t).readFloatLE(e)}encode(t,e,r=0){return zo(e).writeFloatLE(t,r),4}}To.Float=es;class rs extends Wo{constructor(t){super(4,t)}decode(t,e=0){return zo(t).readFloatBE(e)}encode(t,e,r=0){return zo(e).writeFloatBE(t,r),4}}To.FloatBE=rs;class ns extends Wo{constructor(t){super(8,t)}decode(t,e=0){return zo(t).readDoubleLE(e)}encode(t,e,r=0){return zo(e).writeDoubleLE(t,r),8}}To.Double=ns;class is extends Wo{constructor(t){super(8,t)}decode(t,e=0){return zo(t).readDoubleBE(e)}encode(t,e,r=0){return zo(e).writeDoubleBE(t,r),8}}To.DoubleBE=is;class os extends Wo{constructor(t,e,r){if(!(t instanceof Wo))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Fo&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof Fo)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof Fo&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;for(i instanceof Fo&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce(((t,i)=>t+n.encode(i,e,r+t)),0);return this.count instanceof Fo&&this.count.encode(t.length,e,r),i}}To.Sequence=os;class ss extends Wo{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof Wo),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i}),0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e=0){Uo(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,o=0;for(const n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(o=n.encode(i,e,r),0>s&&(s=n.getSpan(e,r)))}i=r,r+=s}return i+o-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}To.Structure=ss;class as{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}To.UnionDiscriminator=as;class us extends as{constructor(t,e){if(!(t instanceof Fo&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}To.UnionLayoutDiscriminator=us;class cs extends Wo{constructor(t,e,r){let n;if(t instanceof Do||t instanceof $o)n=new us(new Ko(t));else if(t instanceof Fo&&t.isCount())n=new us(t);else{if(!(t instanceof as))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof Wo))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Do||t instanceof $o)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof Do||t instanceof $o,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,i=n.decode(t,e),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(t,e+s)}else r=o.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(t[n.property],e,r),o+i.encode(t[i.property],e,r+o)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new hs(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}To.Union=cs;class hs extends Wo{constructor(t,e,r,n){if(!(t instanceof cs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Wo))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function ls(t){return 0>t&&(t+=4294967296),t}To.VariantLayout=hs;class ds extends Wo{constructor(t,e,r){if(!(t instanceof Do||t instanceof $o))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=ls(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const e of this.fields)if(void 0!==e.property){const r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new fs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new ps(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}To.BitStructure=ds;class fs{constructor(t,e,r){if(!(t instanceof ds))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=ls(this.valueMask<<this.start),this.property=r}decode(t,e){return ls(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==ls(t&this.valueMask))throw new TypeError(jo("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=ls(t<<this.start);this.container._packedSetValue(ls(e&~this.wordMask)|r)}}To.BitField=fs;class ps extends fs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}To.Boolean=ps;class gs extends Wo{constructor(t,e){if(!(t instanceof Fo&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Fo||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),zo(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof Fo&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(jo("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=zo(t);return zo(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof Fo&&this.length.encode(n,e,r),n}}To.Blob=gs;class ms extends Wo{constructor(t){super(-1,t)}getSpan(t,e=0){Uo(t);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return zo(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=No.Buffer.from(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=zo(e);return n.copy(o,r),o[r+i]=0,i+1}}To.CString=ms;class ys extends Wo{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Uo(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return zo(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=No.Buffer.from(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(zo(e),r),i}}To.UTF8=ys;class ws extends Wo{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}To.Constant=ws,To.greedy=(t,e)=>new qo(t,e);var bs=To.offset=(t,e,r)=>new Ko(t,e,r),vs=To.u8=t=>new Do(1,t),_s=To.u16=t=>new Do(2,t);To.u24=t=>new Do(3,t);var ks=To.u32=t=>new Do(4,t);To.u40=t=>new Do(5,t),To.u48=t=>new Do(6,t);var Ss=To.nu64=t=>new Yo(t);To.u16be=t=>new $o(2,t),To.u24be=t=>new $o(3,t),To.u32be=t=>new $o(4,t),To.u40be=t=>new $o(5,t),To.u48be=t=>new $o(6,t),To.nu64be=t=>new Xo(t),To.s8=t=>new Ho(1,t),To.s16=t=>new Ho(2,t),To.s24=t=>new Ho(3,t),To.s32=t=>new Ho(4,t),To.s40=t=>new Ho(5,t),To.s48=t=>new Ho(6,t);var Es=To.ns64=t=>new Qo(t);To.s16be=t=>new Vo(2,t),To.s24be=t=>new Vo(3,t),To.s32be=t=>new Vo(4,t),To.s40be=t=>new Vo(5,t),To.s48be=t=>new Vo(6,t),To.ns64be=t=>new ts(t),To.f32=t=>new es(t),To.f32be=t=>new rs(t),To.f64=t=>new ns(t),To.f64be=t=>new is(t);var xs=To.struct=(t,e,r)=>new ss(t,e,r);To.bits=(t,e,r)=>new ds(t,e,r);var Is=To.seq=(t,e,r)=>new os(t,e,r);To.union=(t,e,r)=>new cs(t,e,r),To.unionLayoutDiscriminator=(t,e)=>new us(t,e);var Ms=To.blob=(t,e)=>new gs(t,e);To.cstr=t=>new ms(t),To.utf8=(t,e)=>new ys(t,e),To.constant=(t,e)=>new ws(t,e);var As={};Object.defineProperty(As,"__esModule",{value:!0});var Bs=As.toBigIntLE=function(t){{const e=Buffer.from(t);e.reverse();const r=e.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}};As.toBigIntBE=function(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}};var Ls,Cs=As.toBufferLE=function(t,e){{const r=t.toString(16),n=Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex");return n.reverse(),n}};As.toBufferBE=function(t,e){{const r=t.toString(16);return Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex")}};class Ps extends TypeError{constructor(t,e){let r;const{message:n,...i}=t,{path:o}=t;super(0===o.length?n:"At path: "+o.join(".")+" -- "+n),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function Rs(t){return"object"==typeof t&&null!=t}function Os(t){return"string"==typeof t?JSON.stringify(t):""+t}function Ts(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:o}=e,{type:s}=r,{refinement:a,message:u="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Os(n)+"`"}=t;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:u}}function*Ns(t,e,r,n){var i;Rs(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const i of t){const t=Ts(i,e,r,n);t&&(yield t)}}function*Us(t,e,r={}){const{path:n=[],branch:i=[t],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(t=e.coercer(t,a),s&&"type"!==e.type&&Rs(e.schema)&&Rs(t)&&!Array.isArray(t)))for(const r in t)void 0===e.schema[r]&&delete t[r];let u=!0;for(const r of e.validator(t,a))u=!1,yield[r,void 0];for(let[r,c,h]of e.entries(t,a)){const e=Us(c,h,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,c],coerce:o,mask:s});for(const n of e)n[0]?(u=!1,yield[n[0],void 0]):o&&(c=n[1],void 0===r?t=c:t instanceof Map?t.set(r,c):t instanceof Set?t.add(c):Rs(t)&&(t[r]=c))}if(u)for(const r of e.refiner(t,a))u=!1,yield[r,void 0];u&&(yield[void 0,t])}class zs{constructor(t){const{type:e,schema:r,validator:n,refiner:i,coercer:o=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(t,e)=>Ns(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>Ns(i(t,e),e,this,t):()=>[]}assert(t){return Ws(t,this)}create(t){return js(t,this)}is(t){return Fs(t,this)}mask(t){return function(t,e){const r=qs(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(t,this)}validate(t,e={}){return qs(t,this,e)}}function Ws(t,e){const r=qs(t,e);if(r[0])throw r[0]}function js(t,e){const r=qs(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function Fs(t,e){return!qs(t,e)[0]}function qs(t,e,r={}){const n=Us(t,e,r),i=function(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);if(i[0]){const t=new Ps(i[0],(function*(){for(const t of n)t[0]&&(yield t[0])}));return[t,void 0]}return[void 0,i[1]]}function Ks(t,e){return new zs({type:t,schema:null,validator:e})}function Ds(t){return new zs({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+Os(t)})}function $s(){return Ks("boolean",(t=>"boolean"==typeof t))}function Hs(t){return Ks("instance",(e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+Os(e)))}function Vs(t){const e=Os(t),r=typeof t;return new zs({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||"Expected the literal `"+e+"`, but received: "+Os(r)})}function Gs(t){return new zs({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function Zs(){return Ks("number",(t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+Os(t)))}function Js(t){return new zs({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function Ys(t,e){return new zs({type:"record",schema:null,*entries(r){if(Rs(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator:t=>Rs(t)||"Expected an object, but received: "+Os(t)})}function Xs(){return Ks("string",(t=>"string"==typeof t||"Expected a string, but received: "+Os(t)))}function Qs(t){const e=Ks("never",(()=>!1));return new zs({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator:t=>Array.isArray(t)||"Expected an array, but received: "+Os(t)})}function ta(t){const e=Object.keys(t);return new zs({type:"type",schema:t,*entries(r){if(Rs(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>Rs(t)||"Expected an object, but received: "+Os(t)})}function ea(t){const e=t.map((t=>t.type)).join(" | ");return new zs({type:"union",schema:null,validator(r,n){const i=[];for(const e of t){const[...t]=Us(r,e,n),[o]=t;if(!o[0])return[];for(const[e]of t)e&&i.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Os(r),...i]}})}function ra(){return Ks("unknown",(()=>!0))}function na(t,e,r){return new zs({...t,coercer:(n,i)=>Fs(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var ia=new Uint8Array(16);function oa(){if(!Ls&&!(Ls="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ls(ia)}var sa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function aa(t){return"string"==typeof t&&sa.test(t)}for(var ua,ca,ha=[],la=0;la<256;++la)ha.push((la+256).toString(16).substr(1));function da(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(ha[t[e+0]]+ha[t[e+1]]+ha[t[e+2]]+ha[t[e+3]]+"-"+ha[t[e+4]]+ha[t[e+5]]+"-"+ha[t[e+6]]+ha[t[e+7]]+"-"+ha[t[e+8]]+ha[t[e+9]]+"-"+ha[t[e+10]]+ha[t[e+11]]+ha[t[e+12]]+ha[t[e+13]]+ha[t[e+14]]+ha[t[e+15]]).toLowerCase();if(!aa(r))throw TypeError("Stringified UUID is invalid");return r}var fa=0,pa=0;function ga(t){if(!aa(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}function ma(t,e,r){function n(t,n,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=ga(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(n),s.set(t,n.length),(s=r(s))[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return da(s)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function ya(t){return 14+(t+64>>>9<<4)+1}function wa(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function ba(t,e,r,n,i,o){return wa((s=wa(wa(e,t),wa(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function va(t,e,r,n,i,o,s){return ba(e&r|~e&n,t,e,i,o,s)}function _a(t,e,r,n,i,o,s){return ba(e&n|r&~n,t,e,i,o,s)}function ka(t,e,r,n,i,o,s){return ba(e^r^n,t,e,i,o,s)}function Sa(t,e,r,n,i,o,s){return ba(r^(e|~n),t,e,i,o,s)}var Ea=ma("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=t[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);e.push(s)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[ya(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=r,u=n,c=i,h=o;r=va(r,n,i,o,t[s],7,-680876936),o=va(o,r,n,i,t[s+1],12,-389564586),i=va(i,o,r,n,t[s+2],17,606105819),n=va(n,i,o,r,t[s+3],22,-1044525330),r=va(r,n,i,o,t[s+4],7,-176418897),o=va(o,r,n,i,t[s+5],12,1200080426),i=va(i,o,r,n,t[s+6],17,-1473231341),n=va(n,i,o,r,t[s+7],22,-45705983),r=va(r,n,i,o,t[s+8],7,1770035416),o=va(o,r,n,i,t[s+9],12,-1958414417),i=va(i,o,r,n,t[s+10],17,-42063),n=va(n,i,o,r,t[s+11],22,-1990404162),r=va(r,n,i,o,t[s+12],7,1804603682),o=va(o,r,n,i,t[s+13],12,-40341101),i=va(i,o,r,n,t[s+14],17,-1502002290),r=_a(r,n=va(n,i,o,r,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=_a(o,r,n,i,t[s+6],9,-1069501632),i=_a(i,o,r,n,t[s+11],14,643717713),n=_a(n,i,o,r,t[s],20,-373897302),r=_a(r,n,i,o,t[s+5],5,-701558691),o=_a(o,r,n,i,t[s+10],9,38016083),i=_a(i,o,r,n,t[s+15],14,-660478335),n=_a(n,i,o,r,t[s+4],20,-405537848),r=_a(r,n,i,o,t[s+9],5,568446438),o=_a(o,r,n,i,t[s+14],9,-1019803690),i=_a(i,o,r,n,t[s+3],14,-187363961),n=_a(n,i,o,r,t[s+8],20,1163531501),r=_a(r,n,i,o,t[s+13],5,-1444681467),o=_a(o,r,n,i,t[s+2],9,-51403784),i=_a(i,o,r,n,t[s+7],14,1735328473),r=ka(r,n=_a(n,i,o,r,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=ka(o,r,n,i,t[s+8],11,-2022574463),i=ka(i,o,r,n,t[s+11],16,1839030562),n=ka(n,i,o,r,t[s+14],23,-35309556),r=ka(r,n,i,o,t[s+1],4,-1530992060),o=ka(o,r,n,i,t[s+4],11,1272893353),i=ka(i,o,r,n,t[s+7],16,-155497632),n=ka(n,i,o,r,t[s+10],23,-1094730640),r=ka(r,n,i,o,t[s+13],4,681279174),o=ka(o,r,n,i,t[s],11,-358537222),i=ka(i,o,r,n,t[s+3],16,-722521979),n=ka(n,i,o,r,t[s+6],23,76029189),r=ka(r,n,i,o,t[s+9],4,-640364487),o=ka(o,r,n,i,t[s+12],11,-421815835),i=ka(i,o,r,n,t[s+15],16,530742520),r=Sa(r,n=ka(n,i,o,r,t[s+2],23,-995338651),i,o,t[s],6,-198630844),o=Sa(o,r,n,i,t[s+7],10,1126891415),i=Sa(i,o,r,n,t[s+14],15,-1416354905),n=Sa(n,i,o,r,t[s+5],21,-57434055),r=Sa(r,n,i,o,t[s+12],6,1700485571),o=Sa(o,r,n,i,t[s+3],10,-1894986606),i=Sa(i,o,r,n,t[s+10],15,-1051523),n=Sa(n,i,o,r,t[s+1],21,-2054922799),r=Sa(r,n,i,o,t[s+8],6,1873313359),o=Sa(o,r,n,i,t[s+15],10,-30611744),i=Sa(i,o,r,n,t[s+6],15,-1560198380),n=Sa(n,i,o,r,t[s+13],21,1309151649),r=Sa(r,n,i,o,t[s+4],6,-145523070),o=Sa(o,r,n,i,t[s+11],10,-1120210379),i=Sa(i,o,r,n,t[s+2],15,718787259),n=Sa(n,i,o,r,t[s+9],21,-343485551),r=wa(r,a),n=wa(n,u),i=wa(i,c),o=wa(o,h)}return[r,n,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(ya(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))})),xa=Ea;function Ia(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function Ma(t,e){return t<<e|t>>>32-e}var Aa=ma("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[64*u+4*h]<<24|t[64*u+4*h+1]<<16|t[64*u+4*h+2]<<8|t[64*u+4*h+3];a[u]=c}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=a[l][f];for(var p=16;p<80;++p)d[p]=Ma(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var g=r[0],m=r[1],y=r[2],w=r[3],b=r[4],v=0;v<80;++v){var _=Math.floor(v/20),k=Ma(g,5)+Ia(_,m,y,w)+b+e[_]+d[v]>>>0;b=w,w=y,y=Ma(m,30)>>>0,m=g,g=k}r[0]=r[0]+g>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),Ba=Aa;var La=Object.freeze({__proto__:null,v1:function(t,e,r){var n=e&&r||0,i=e||new Array(16),o=(t=t||{}).node||ua,s=void 0!==t.clockseq?t.clockseq:ca;if(null==o||null==s){var a=t.random||(t.rng||oa)();null==o&&(o=ua=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=ca=16383&(a[6]<<8|a[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),c=void 0!==t.nsecs?t.nsecs:pa+1,h=u-fa+(c-pa)/1e4;if(h<0&&void 0===t.clockseq&&(s=s+1&16383),(h<0||u>fa)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fa=u,pa=c,ca=s;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var f=0;f<6;++f)i[n+f]=o[f];return e||da(i)},v3:xa,v4:function(t,e,r){var n=(t=t||{}).random||(t.rng||oa)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return da(n)},v5:Ba,NIL:"00000000-0000-0000-0000-000000000000",version:function(t){if(!aa(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)},validate:aa,stringify:da,parse:ga});const Ca=La.v4;var Pa=function(t,e,r,n){if("string"!=typeof t)throw new TypeError(t+" must be a string");const i="number"==typeof(n=n||{}).version?n.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const o={method:t};if(2===i&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===r){const t="function"==typeof n.generator?n.generator:function(){return Ca()};o.id=t(o,n)}else 2===i&&null===r?n.notificationIdNull&&(o.id=null):o.id=r;return o};const Ra=La.v4,Oa=Pa,Ta=function(t,e){if(!(this instanceof Ta))return new Ta(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return Ra()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};var Na=Ta;Ta.prototype.request=function(t,e,r,n){const i=this;let o=null;const s=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&t&&"object"==typeof t&&"function"==typeof e)n=e,o=t;else{"function"==typeof r&&(n=r,r=void 0);const i="function"==typeof n;try{o=Oa(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(i)return n(t);throw t}if(!i)return o}let a;try{a=JSON.stringify(o,this.options.replacer)}catch(t){return n(t)}return this.callServer(a,(function(t,e){i._parseResponse(t,e,n)})),o},Ta.prototype._parseResponse=function(t,e,r){if(t)return void r(t);if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(Array.isArray(n)){const t=function(t){return void 0!==t.error},e=function(e){return!t(e)};return r(null,n.filter(t),n.filter(e))}return r(null,n.error,n.result)}r(null,n)};var Ua={},za={exports:{}};!function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports}(za);var Wa,ja,Fa,qa,Ka={exports:{}},Da={exports:{}};function $a(){return Wa||(Wa=1,function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Da)),Da.exports}function Ha(){if(qa)return Fa;qa=1;var t=(ja||(ja=1,function(t){var e=$a().default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},o=Object.prototype,s=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(n){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new R(n||[]);return a(o,"_invoke",{value:B(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=f;var g="suspendedStart",m="suspendedYield",y="executing",w="completed",b={};function v(){}function _(){}function k(){}var S={};d(S,c,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(O([])));x&&x!==o&&s.call(x,c)&&(S=x);var I=k.prototype=v.prototype=Object.create(S);function M(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,r){function n(i,o,a,u){var c=p(t[i],t,o);if("throw"!==c.type){var h=c.arg,l=h.value;return l&&"object"==e(l)&&s.call(l,"__await")?r.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):r.resolve(l).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,i){n(t,e,r,i)}))}return i=i?i.then(o,o):o()}})}function B(t,e,r){var i=g;return function(o,s){if(i===y)throw new Error("Generator is already running");if(i===w){if("throw"===o)throw s;return{value:n,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=L(a,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===g)throw i=w,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var c=p(t,e,r);if("normal"===c.type){if(i=r.done?w:m,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=w,r.method="throw",r.arg=c.arg)}}}function L(t,e){var r=e.method,i=t.iterator[r];if(i===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=p(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,b;var s=o.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,b):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(s.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}throw new TypeError(e(t)+" is not iterable")}return _.prototype=k,a(I,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:_,configurable:!0}),_.displayName=d(k,l,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,d(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},i.awrap=function(t){return{__await:t}},M(A.prototype),d(A.prototype,h,(function(){return this})),i.AsyncIterator=A,i.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var s=new A(f(t,e,r,n),o);return i.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(I),d(I,l,"Generator"),d(I,c,(function(){return this})),d(I,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},i.values=O,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),b}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(Ka)),Ka.exports)();Fa=t;try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return Fa}var Va,Ga={exports:{}};var Za,Ja={exports:{}};function Ya(){return Za||(Za=1,function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(Ja)),Ja.exports}var Xa,Qa,tu,eu={exports:{}},ru={exports:{}},nu={exports:{}};function iu(){return Xa||(Xa=1,function(t){var e=$a().default;t.exports=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(nu)),nu.exports}function ou(){return Qa||(Qa=1,function(t){var e=$a().default,r=iu();t.exports=function(t){var n=r(t,"string");return"symbol"===e(n)?n:String(n)},t.exports.__esModule=!0,t.exports.default=t.exports}(ru)),ru.exports}function su(){return tu||(tu=1,function(t){var e=ou();function r(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(eu)),eu.exports}var au,uu,cu={exports:{}},hu={exports:{}};function lu(){return au||(au=1,function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(hu)),hu.exports}function du(){return uu||(uu=1,function(t){var e=lu();t.exports=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e(t,r)},t.exports.__esModule=!0,t.exports.default=t.exports}(cu)),cu.exports}var fu,pu,gu={exports:{}},mu={exports:{}};function yu(){return fu||(fu=1,function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}(mu)),mu.exports}function wu(){return pu||(pu=1,function(t){var e=$a().default,r=yu();t.exports=function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(gu)),gu.exports}var bu,vu={exports:{}};function _u(){return bu||(bu=1,function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(vu)),vu.exports}var ku,Su={exports:{}};function Eu(){return ku||(ku=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||t,s),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,o),!0;case 6:return h.fn.call(h.context,e,n,i,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,i);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];h[c].fn.apply(h[c].context,u)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],h=a.length;u<h;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}(Su)),Su.exports}!function(t){var e=za.exports;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(Ha()),n=e((Va||(Va=1,function(t){function e(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var s=t.apply(r,n);function a(t){e(s,i,o,a,u,"next",t)}function u(t){e(s,i,o,a,u,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}(Ga)),Ga.exports)),i=e($a()),o=e(Ya()),s=e(su()),a=e(du()),u=e(wu()),c=e(_u()),h=Eu();function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,c.default)(t);if(e){var i=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var d=function(t){(0,a.default)(f,t);var e,u,c,h,d=l(f);function f(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;(0,o.default)(this,f);var s=n.autoconnect,a=void 0===s||s,u=n.reconnect,c=void 0===u||u,h=n.reconnect_interval,l=void 0===h?1e3:h,p=n.max_reconnects,g=void 0===p?5:p,m=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(n,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(e=d.call(this)).webSocketFactory=t,e.queue={},e.rpc_id=0,e.address=r,e.autoconnect=a,e.ready=!1,e.reconnect=c,e.reconnect_timer_id=void 0,e.reconnect_interval=l,e.max_reconnects=g,e.rest_options=m,e.current_reconnects=0,e.generate_request_id=i||function(){return++e.rpc_id},e.autoconnect&&e._connect(e.address,Object.assign({autoconnect:e.autoconnect,reconnect:e.reconnect,reconnect_interval:e.reconnect_interval,max_reconnects:e.max_reconnects},e.rest_options)),e}return(0,s.default)(f,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(t,e,r,n){var o=this;return n||"object"!==(0,i.default)(r)||(n=r,r=null),new Promise((function(i,s){if(!o.ready)return s(new Error("socket not ready"));var a=o.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||null,id:a};o.socket.send(JSON.stringify(u),n,(function(t){if(t)return s(t);o.queue[a]={promise:[i,s]},r&&(o.queue[a].timeout=setTimeout((function(){delete o.queue[a],s(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:(h=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("rpc.login",e);case 2:if(n=t.sent){t.next=5;break}throw new Error("authentication failed");case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"listMethods",value:(c=(0,n.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("__listMethods");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"notify",value:function(t,e){var r=this;return new Promise((function(n,i){if(!r.ready)return i(new Error("socket not ready"));var o={jsonrpc:"2.0",method:t,params:e||null};r.socket.send(JSON.stringify(o),(function(t){if(t)return i(t);n()}))}))}},{key:"subscribe",value:(u=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"==typeof e&&(e=[e]),t.next=3,this.call("rpc.on",e);case 3:if(n=t.sent,"string"!=typeof e||"ok"===n[e]){t.next=6;break}throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"unsubscribe",value:(e=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"==typeof e&&(e=[e]),t.next=3,this.call("rpc.off",e);case 3:if(n=t.sent,"string"!=typeof e||"ok"===n[e]){t.next=6;break}throw new Error("Failed unsubscribing from an event with: "+n);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"close",value:function(t,e){this.socket.close(t||1e3,e)}},{key:"_connect",value:function(t,e){var r=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",(function(){r.ready=!0,r.emit("open"),r.current_reconnects=0})),this.socket.addEventListener("message",(function(t){var e=t.data;e instanceof ArrayBuffer&&(e=Buffer.from(e).toString());try{e=JSON.parse(e)}catch(t){return}if(e.notification&&r.listeners(e.notification).length){if(!Object.keys(e.params).length)return r.emit(e.notification);var n=[e.notification];if(e.params.constructor===Object)n.push(e.params);else for(var i=0;i<e.params.length;i++)n.push(e.params[i]);return Promise.resolve().then((function(){r.emit.apply(r,n)}))}if(!r.queue[e.id])return e.method&&e.params?Promise.resolve().then((function(){r.emit(e.method,e.params)})):void 0;"error"in e=="result"in e&&r.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),r.queue[e.id].timeout&&clearTimeout(r.queue[e.id].timeout),e.error?r.queue[e.id].promise[1](e.error):r.queue[e.id].promise[0](e.result),delete r.queue[e.id]})),this.socket.addEventListener("error",(function(t){return r.emit("error",t)})),this.socket.addEventListener("close",(function(n){var i=n.code,o=n.reason;r.ready&&setTimeout((function(){return r.emit("close",i,o)}),0),r.ready=!1,r.socket=void 0,1e3!==i&&(r.current_reconnects++,r.reconnect&&(r.max_reconnects>r.current_reconnects||0===r.max_reconnects)&&(r.reconnect_timer_id=setTimeout((function(){return r._connect(t,e)}),r.reconnect_interval)))}))}}]),f}(h.EventEmitter);t.default=d}(Ua);var xu=i(Ua),Iu={};!function(t){var e=za.exports;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){return new u(t,e)};var r=e(Ya()),n=e(su()),i=e(du()),o=e(wu()),s=e(_u());function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t,n,i){var s;return(0,r.default)(this,o),(s=e.call(this)).socket=new window.WebSocket(t,i),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(t){return s.emit("message",t.data)},s.socket.onerror=function(t){return s.emit("error",t)},s.socket.onclose=function(t){s.emit("close",t.code,t.reason)},s}return(0,n.default)(o,[{key:"send",value:function(t,e,r){var n=r||e;try{this.socket.send(t),n()}catch(t){n(t)}}},{key:"close",value:function(t,e){this.socket.close(t,e)}},{key:"addEventListener",value:function(t,e,r){this.socket.addEventListener(t,e,r)}}]),o}(Eu().EventEmitter)}(Iu);var Mu=i(Iu);const[Au,Bu,Lu]=[[],[],[]],Cu=BigInt(0),Pu=BigInt(1),Ru=BigInt(2),Ou=BigInt(7),Tu=BigInt(256),Nu=BigInt(113);for(let t=0,e=Pu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Au.push(2*(5*n+r)),Bu.push((t+1)*(t+2)/2%64);let i=Cu;for(let t=0;t<7;t++)e=(e<<Pu^(e>>Ou)*Nu)%Tu,e&Ru&&(i^=Pu<<(Pu<<BigInt(t))-Pu);Lu.push(i)}const[Uu,zu]=mn(Lu,!0),Wu=(t,e,r)=>r>32?bn(t,e,r):yn(t,e,r),ju=(t,e,r)=>r>32?vn(t,e,r):wn(t,e,r);class Fu extends cn{constructor(t,e,r,n=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Yr(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)))(this.state)}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,o=r[i],s=r[i+1],a=Wu(o,s,1)^r[n],u=ju(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=u}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=Bu[r],o=Wu(e,i,n),s=ju(e,i,n),a=Au[r];e=t[a],i=t[a+1],t[a]=o,t[a+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=Uu[n],t[1]^=zu[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Qr(this);const{blockLen:e,state:r}=this,n=(t=an(t)).length;for(let i=0;i<n;){const o=Math.min(e-this.pos,n-i);for(let e=0;e<o;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){Qr(this,!1),Xr(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Yr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(tn(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return t||(t=new Fu(e,r,n,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=o,t.destroyed=this.destroyed,t}}const qu=((t,e,r)=>hn((()=>new Fu(e,t,r))))(1,136,32);const{bytesToNumberBE:Ku,hexToBytes:Du}=Zn,$u={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=$u;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ku(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=$u,r="string"==typeof t?Du(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=$u._parseInt(r.subarray(2)),{d:s,l:a}=$u._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},Hu=BigInt(0),Vu=BigInt(1);BigInt(2);const Gu=BigInt(3);function Zu(t){const e=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function(t){const e=mi(t);Gn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const i=e.toAffine();return qn(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function o(t){const{a:n,b:i}=e,o=r.sqr(t),s=r.mul(o,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&Hu<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Rn(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let s;try{s="bigint"==typeof t?t:Un(Fn("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=ni(s,o)),a(s),s}const c=new Map;function h(t){if(!(t instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof l)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?l.ZERO:new l(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(l.fromAffine)}static fromHex(t){const e=l.fromAffine(i(Fn("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return l.BASE.multiply(u(t))}_setWindowSize(t){this._WINDOW_SIZE=t,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(t);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){h(t);const{px:e,py:n,pz:i}=this,{px:o,py:s,pz:a}=t,u=r.eql(r.mul(e,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,Gu),{px:o,py:s,pz:a}=this;let u=r.ZERO,c=r.ZERO,h=r.ZERO,d=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),h=r.mul(o,a),h=r.add(h,h),u=r.mul(t,h),c=r.mul(i,p),c=r.add(u,c),u=r.sub(f,c),c=r.add(f,c),c=r.mul(u,c),u=r.mul(g,u),h=r.mul(i,h),p=r.mul(t,p),g=r.sub(d,p),g=r.mul(t,g),g=r.add(g,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,g),u=r.sub(u,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(u,c,h)}add(t){h(t);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=t;let c=r.ZERO,d=r.ZERO,f=r.ZERO;const p=e.a,g=r.mul(e.b,Gu);let m=r.mul(n,s),y=r.mul(i,a),w=r.mul(o,u),b=r.add(n,i),v=r.add(s,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(m,w),v=r.sub(v,_),_=r.add(i,o),c=r.add(a,u),_=r.mul(_,c),c=r.add(y,w),_=r.sub(_,c),f=r.mul(p,v),c=r.mul(g,w),f=r.add(c,f),c=r.sub(y,f),f=r.add(y,f),d=r.mul(c,f),y=r.add(m,m),y=r.add(y,m),w=r.mul(p,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(p,w),v=r.add(v,w),m=r.mul(y,v),d=r.add(d,m),m=r.mul(_,v),c=r.mul(b,c),c=r.sub(c,m),m=r.mul(b,y),f=r.mul(_,f),f=r.add(f,m),new l(c,d,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(l.ZERO)}wNAF(t){return f.wNAFCached(this,c,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(l.fromAffine)}))}multiplyUnsafe(t){const n=l.ZERO;if(t===Hu)return n;if(a(t),t===Vu)return this;const{endo:i}=e;if(!i)return f.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:u,k2:c}=i.splitScalar(t),h=n,d=n,p=this;for(;s>Hu||c>Hu;)s&Vu&&(h=h.add(p)),c&Vu&&(d=d.add(p)),p=p.double(),s>>=Vu,c>>=Vu;return o&&(h=h.negate()),u&&(d=d.negate()),d=new l(r.mul(d.px,i.beta),d.py,d.pz),h.add(d)}multiply(t){a(t);let n,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:u}=s.splitScalar(o);let{p:c,f:h}=this.wNAF(e),{p:d,f:p}=this.wNAF(u);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),i=h.add(p)}else{const{p:t,f:e}=this.wNAF(o);n=t,i=e}return l.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){const n=l.BASE,i=(t,e)=>e!==Hu&&e!==Vu&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,r));return o.is0()?void 0:o}toAffine(t){const{px:e,py:n,pz:i}=this,o=this.is0();null==t&&(t=o?r.ONE:r.inv(i));const s=r.mul(e,t),a=r.mul(n,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===Vu)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===Vu?this:r?r(l,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(l,this,t)}toHex(t=!0){return Rn(this.toRawBytes(t))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,f=gi(l,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function Ju(t){const e=function(t){const e=mi(t);return Gn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(t){return ni(t,n)}function a(t){return si(t,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:l}=Zu({...e,toBytes(t,e,n){const i=e.toAffine(),o=r.toBytes(i.x),s=qn;return n?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(t){const e=t.length,n=t[0],s=t.subarray(1);if(e!==i||2!==n&&3!==n){if(e===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=Un(s);if(!(Hu<(a=t)&&a<r.ORDER))throw new Error("Point is not on curve");const e=h(t);let i=r.sqrt(e);return 1==(1&n)!==((i&Vu)===Vu)&&(i=r.neg(i)),{x:t,y:i}}var a}}),d=t=>Rn(Wn(t,e.nByteLength));function f(t){return t>n>>Vu}const p=(t,e,r)=>Un(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=Fn("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=$u.toSig(Fn("DER",t));return new g(e,r)}assertValidity(){if(!l(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s:i,recovery:o}=this,c=b(Fn("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?n+e.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0==(1&o)?"02":"03",f=u.fromHex(l+d(h)),p=a(h),g=s(-c*p),m=s(i*p),y=u.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Nn(this.toDERHex())}toDERHex(){return $u.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Nn(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(t){try{return c(t),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const t=di(e.n);return function(t,e,r=!1){const n=t.length,i=li(e),o=di(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=ni(r?Un(t):zn(t),e-Yn)+Yn;return r?jn(s,i):Wn(s,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function y(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===i||n===o:r?n===2*i||n===2*o:t instanceof u}const w=e.bits2int||function(t){const r=Un(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},b=e.bits2int_modN||function(t){return s(w(t))},v=Kn(e.nBitLength);function _(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(Hu<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Wn(t,e.nByteLength)}function k(t,n,i=S){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=e;let{lowS:d,prehash:p,extraEntropy:m}=i;null==d&&(d=!0),t=Fn("msgHash",t),p&&(t=Fn("prehashed msgHash",o(t)));const y=b(t),v=c(n),k=[_(v),_(y)];if(null!=m){const t=!0===m?h(r.BYTES):m;k.push(Fn("extraEntropy",t))}const E=qn(...k),x=y;return{seed:E,k2sig:function(t){const e=w(t);if(!l(e))return;const r=a(e),n=u.BASE.multiply(e).toAffine(),i=s(n.x);if(i===Hu)return;const o=s(r*s(x+i*v));if(o===Hu)return;let c=(n.x===i?0:2)|Number(n.y&Vu),h=o;return d&&f(o)&&(h=function(t){return f(t)?s(-t):t}(o),c^=1),new g(i,h,c)}}}const S={lowS:e.lowS,prehash:!1},E={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(y(t))throw new Error("first arg must be private key");if(!y(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(c(t)).toRawBytes(r)},sign:function(t,r,n=S){const{seed:i,k2sig:o}=k(t,r,n),s=e;return Hn(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(t,r,n,i=E){const o=t;if(r=Fn("msgHash",r),n=Fn("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:h}=i;let l,d;try{if("string"==typeof o||o instanceof Uint8Array)try{l=g.fromDER(o)}catch(t){if(!(t instanceof $u.Err))throw t;l=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;l=new g(t,e)}}d=u.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;h&&(r=e.hash(r));const{r:f,s:p}=l,m=b(r),y=a(p),w=s(m*y),v=s(f*y),_=u.BASE.multiplyAndAddUnsafe(d,w,v)?.toAffine();return!!_&&s(_.x)===f},ProjectivePoint:u,Signature:g,utils:m}}BigInt(4);class Yu extends cn{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Yr(t.outputLen),Yr(t.blockLen)}(t);const r=an(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return Qr(this),this.iHash.update(t),this}digestInto(t){Qr(this),Xr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xu=(t,e,r)=>new Yu(t,e).update(r).digest();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function Qu(t){return{hash:t,hmac:(e,...r)=>Xu(t,e,un(...r)),randomBytes:ln}}Xu.create=(t,e)=>new Yu(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const tc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ec=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rc=BigInt(1),nc=BigInt(2),ic=(t,e)=>(t+e/nc)/e;const oc=hi(tc,void 0,void 0,{sqrt:function(t){const e=tc,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,h=c*c*t%e,l=oi(h,r,e)*h%e,d=oi(l,r,e)*h%e,f=oi(d,nc,e)*c%e,p=oi(f,i,e)*f%e,g=oi(p,o,e)*p%e,m=oi(g,a,e)*g%e,y=oi(m,u,e)*m%e,w=oi(y,a,e)*g%e,b=oi(w,r,e)*h%e,v=oi(b,s,e)*p%e,_=oi(v,n,e)*c%e,k=oi(_,nc,e);if(!oc.eql(oc.sqr(k),t))throw new Error("Cannot find square root");return k}}),sc=function(t,e){const r=e=>Ju({...t,...Qu(e)});return Object.freeze({...r(e),create:r})}({a:BigInt(0),b:BigInt(7),Fp:oc,n:ec,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ec,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-rc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=ic(o*t,e),u=ic(-n*t,e);let c=ni(t-a*r-u*i,e),h=ni(-a*n-u*o,e);const l=c>s,d=h>s;if(l&&(c=e-c),d&&(h=e-h),c>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:c,k2neg:d,k2:h}}}},Zi);BigInt(0),sc.ProjectivePoint;const ac=Oi.utils.randomPrivateKey,uc=()=>{const t=Oi.utils.randomPrivateKey(),e=cc(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},cc=Oi.getPublicKey;function hc(t){try{return Oi.ExtendedPoint.fromHex(t),!0}catch{return!1}}const lc=(t,e)=>Oi.sign(t,e.slice(0,32)),dc=Oi.verify,fc=t=>Fr.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Fr.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Fr.Buffer.from(t);class pc{constructor(t){Object.assign(this,t)}encode(){return Fr.Buffer.from(Co(gc,this))}static decode(t){return Oo(gc,this,t)}static decodeUnchecked(t){return wo(gc,this,t)}}const gc=new Map;var mc;let yc;const wc=32;let bc=1;yc=Symbol.toStringTag;class vc extends pc{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=qi.decode(t);if(e.length!=wc)throw new Error("Invalid public key input");this._bn=new zi(e)}else this._bn=new zi(t);if(this._bn.byteLength()>wc)throw new Error("Invalid public key input")}}static unique(){const t=new vc(bc);return bc+=1,new vc(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return qi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Fr.Buffer);if(t.length===wc)return t;const e=Fr.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[yc](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const n=Fr.Buffer.concat([t.toBuffer(),Fr.Buffer.from(e),r.toBuffer()]),i=Zi(n);return new vc(i)}static createProgramAddressSync(t,e){let r=Fr.Buffer.alloc(0);t.forEach((function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");r=Fr.Buffer.concat([r,fc(t)])})),r=Fr.Buffer.concat([r,e.toBuffer(),Fr.Buffer.from("ProgramDerivedAddress")]);const n=Zi(r);if(hc(n))throw new Error("Invalid seeds, address must fall off the curve");return new vc(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,n=255;for(;0!=n;){try{const i=t.concat(Fr.Buffer.from([n]));r=this.createProgramAddressSync(i,e)}catch(t){if(t instanceof TypeError)throw t;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return hc(new vc(t).toBytes())}}mc=vc,vc.default=new mc("11111111111111111111111111111111"),gc.set(vc,{kind:"struct",fields:[["_bn","u256"]]});const _c=new vc("BPFLoader1111111111111111111111111111111111"),kc=1232,Sc=127,Ec=64;class xc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(xc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ic extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ic.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Mc extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Mc.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ac{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach(((t,r)=>{e.set(t.toBase58(),r)}));const r=t=>{const r=e.get(t.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return t.map((t=>({programIdIndex:r(t.programId),accountKeyIndexes:t.keys.map((t=>r(t.pubkey))),data:t.data})))}}const Bc=(t="publicKey")=>Ms(32,t),Lc=(t="signature")=>Ms(64,t),Cc=(t="string")=>{const e=xs([ks("length"),ks("lengthPadding"),Ms(bs(ks(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(t,e)=>r(t,e).chars.toString(),i.encode=(t,e,r)=>{const i={chars:Fr.Buffer.from(t,"utf8")};return n(i,e,r)},i.alloc=t=>ks().span+ks().span+Fr.Buffer.from(t,"utf8").length,i};function Pc(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return Pc({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach((t=>{n+=r(t)})),n}function Rc(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0==(128&n))break}return e}function Oc(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function Tc(t,e){if(!t)throw new Error(e||"Assertion failed")}class Nc{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const e of t){n(e.programId).isInvoked=!0;for(const t of e.keys){const e=n(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new Nc(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Tc(t.length<=256,"Max static account keys length exceeded");const e=t.filter((([,t])=>t.isSigner&&t.isWritable)),r=t.filter((([,t])=>t.isSigner&&!t.isWritable)),n=t.filter((([,t])=>!t.isSigner&&t.isWritable)),i=t.filter((([,t])=>!t.isSigner&&!t.isWritable)),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Tc(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Tc(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...e.map((([t])=>new vc(t))),...r.map((([t])=>new vc(t))),...n.map((([t])=>new vc(t))),...i.map((([t])=>new vc(t)))]]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&t.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&!t.isWritable));if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const e=new vc(i),o=t.findIndex((t=>t.equals(e)));o>=0&&(Tc(o<256,"Max lookup table index exceeded"),r.push(o),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class Uc{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((t=>new vc(t))),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qi.decode(t.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new Ac(this.staticAccountKeys)}static compile(t){const e=Nc.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new Ac(n).compileInstructions(t.instructions).map((t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:qi.encode(t.data)})));return new Uc({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){return t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((t,e)=>!this.isProgramId(e)))}serialize(){const t=this.accountKeys.length;let e=[];Oc(e,t);const r=this.instructions.map((t=>{const{accounts:e,programIdIndex:r}=t,n=Array.from(qi.decode(t.data));let i=[];Oc(i,e.length);let o=[];return Oc(o,n.length),{programIdIndex:r,keyIndicesCount:Fr.Buffer.from(i),keyIndices:e,dataLength:Fr.Buffer.from(o),data:n}}));let n=[];Oc(n,r.length);let i=Fr.Buffer.alloc(kc);Fr.Buffer.from(n).copy(i);let o=n.length;r.forEach((t=>{const e=xs([vs("programIdIndex"),Ms(t.keyIndicesCount.length,"keyIndicesCount"),Is(vs("keyIndex"),t.keyIndices.length,"keyIndices"),Ms(t.dataLength.length,"dataLength"),Is(vs("userdatum"),t.data.length,"data")]).encode(t,i,o);o+=e})),i=i.slice(0,o);const s=xs([Ms(1,"numRequiredSignatures"),Ms(1,"numReadonlySignedAccounts"),Ms(1,"numReadonlyUnsignedAccounts"),Ms(e.length,"keyCount"),Is(Bc("key"),t,"keys"),Bc("recentBlockhash")]),a={numRequiredSignatures:Fr.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Fr.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Fr.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Fr.Buffer.from(e),keys:this.accountKeys.map((t=>fc(t.toBytes()))),recentBlockhash:qi.decode(this.recentBlockhash)};let u=Fr.Buffer.alloc(2048);const c=s.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Sc))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=e.shift(),i=e.shift(),o=Rc(e);let s=[];for(let t=0;t<o;t++){const t=e.slice(0,wc);e=e.slice(wc),s.push(new vc(Fr.Buffer.from(t)))}const a=e.slice(0,wc);e=e.slice(wc);const u=Rc(e);let c=[];for(let t=0;t<u;t++){const t=e.shift(),r=Rc(e),n=e.slice(0,r);e=e.slice(r);const i=Rc(e),o=e.slice(0,i),s=qi.encode(Fr.Buffer.from(o));e=e.slice(i),c.push({programIdIndex:t,accounts:n,data:s})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:qi.encode(Fr.Buffer.from(a)),accountKeys:s,instructions:c};return new Uc(h)}}class zc{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ac(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce(((t,e)=>t+e.writableIndexes.length),0);return e<n}if(t>=this.header.numRequiredSignatures){return t-e<r-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find((t=>t.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=Nc.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const t of i){const i=e.extractTableLookup(t);if(void 0!==i){const[t,{writable:e,readonly:o}]=i;r.push(t),n.writable.push(...e),n.readonly.push(...o)}}const[o,s]=e.getMessageComponents(),a=new Ac(s,n).compileInstructions(t.instructions);return new zc({header:o,staticAccountKeys:s,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const t=Array();Oc(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Oc(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Oc(i,this.addressTableLookups.length);const o=xs([vs("prefix"),xs([vs("numRequiredSignatures"),vs("numReadonlySignedAccounts"),vs("numReadonlyUnsignedAccounts")],"header"),Ms(t.length,"staticAccountKeysLength"),Is(Bc(),this.staticAccountKeys.length,"staticAccountKeys"),Bc("recentBlockhash"),Ms(r.length,"instructionsLength"),Ms(e.length,"serializedInstructions"),Ms(i.length,"addressTableLookupsLength"),Ms(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(kc),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map((t=>t.toBytes())),recentBlockhash:qi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(kc);for(const r of this.compiledInstructions){const n=Array();Oc(n,r.accountKeyIndexes.length);const i=Array();Oc(i,r.data.length);t+=xs([vs("programIdIndex"),Ms(n.length,"encodedAccountKeyIndexesLength"),Is(vs(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ms(i.length,"encodedDataLength"),Ms(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(kc);for(const r of this.addressTableLookups){const n=Array();Oc(n,r.writableIndexes.length);const i=Array();Oc(i,r.readonlyIndexes.length);t+=xs([Bc("accountKey"),Ms(n.length,"encodedWritableIndexesLength"),Is(vs(),r.writableIndexes.length,"writableIndexes"),Ms(i.length,"encodedReadonlyIndexesLength"),Is(vs(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&Sc;Tc(r!==n,"Expected versioned message but received legacy message");Tc(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],s=Rc(e);for(let t=0;t<s;t++)o.push(new vc(e.splice(0,wc)));const a=qi.encode(e.splice(0,wc)),u=Rc(e),c=[];for(let t=0;t<u;t++){const t=e.shift(),r=Rc(e),n=e.splice(0,r),i=Rc(e),o=new Uint8Array(e.splice(0,i));c.push({programIdIndex:t,accountKeyIndexes:n,data:o})}const h=Rc(e),l=[];for(let t=0;t<h;t++){const t=new vc(e.splice(0,wc)),r=Rc(e),n=e.splice(0,r),i=Rc(e),o=e.splice(0,i);l.push({accountKey:t,writableIndexes:n,readonlyIndexes:o})}return new zc({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:c,addressTableLookups:l})}}const Wc={deserializeMessageVersion(t){const e=t[0],r=e&Sc;return r===e?"legacy":r},deserialize:t=>{const e=Wc.deserializeMessageVersion(t);if("legacy"===e)return Uc.from(t);if(0===e)return zc.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let jc=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const Fc=Fr.Buffer.alloc(Ec).fill(0);class qc{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Fr.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map((({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Kc{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((t=>t.toJSON())),signers:this.signatures.map((({publicKey:t})=>t.toJSON()))}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach((t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new qc(t))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let t=0;t<e.length;t++)if(void 0===e[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const n=[],i=[];e.forEach((t=>{t.keys.forEach((t=>{i.push({...t})}));const e=t.programId.toString();n.includes(e)||n.push(e)})),n.forEach((t=>{i.push({pubkey:new vc(t),isSigner:!1,isWritable:!1})}));const o=[];i.forEach((t=>{const e=t.pubkey.toString(),r=o.findIndex((t=>t.pubkey.toString()===e));r>-1?(o[r].isWritable=o[r].isWritable||t.isWritable,o[r].isSigner=o[r].isSigner||t.isSigner):o.push(t)})),o.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const s=o.findIndex((t=>t.pubkey.equals(r)));if(s>-1){const[t]=o.splice(s,1);t.isSigner=!0,t.isWritable=!0,o.unshift(t)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=o.findIndex((e=>e.pubkey.equals(t.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${t.publicKey.toString()}`);o[e].isSigner||(o[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,c=0;const h=[],l=[];o.forEach((({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),a+=1,r||(u+=1)):(l.push(t.toString()),r||(c+=1))}));const d=h.concat(l),f=e.map((t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map((t=>d.indexOf(t.pubkey.toString()))),data:qi.encode(e)}}));return f.forEach((t=>{Tc(t.programIdIndex>=0),t.accounts.forEach((t=>Tc(t>=0)))})),new Uc({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:d,recentBlockhash:t,instructions:f})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every(((t,r)=>e[r].equals(t.publicKey)));if(r)return t}return this.signatures=e.map((t=>({signature:null,publicKey:t}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter((t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)})).map((t=>({signature:null,publicKey:t})))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}this.signatures=r.map((t=>({signature:null,publicKey:t.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach((t=>{const e=lc(r,t.secretKey);this._addSignature(t.publicKey,fc(e))}))}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Tc(64===e.length);const r=this.signatures.findIndex((e=>t.equals(e.publicKey)));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Fr.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),void 0===t||t)}_verifySignatures(t,e){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(e)return!1}else if(!dc(r,t,n.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];Oc(r,e.length);const n=r.length+64*e.length+t.length,i=Fr.Buffer.alloc(n);return Tc(e.length<256),Fr.Buffer.from(r).copy(i,0),e.forEach((({signature:t},e)=>{null!==t&&(Tc(64===t.length,"signature has invalid length"),Fr.Buffer.from(t).copy(i,r.length+64*e))})),t.copy(i,r.length+64*e.length),Tc(i.length<=kc,`Transaction too large: ${i.length} > 1232`),i}get keys(){return Tc(1===this.instructions.length),this.instructions[0].keys.map((t=>t.pubkey))}get programId(){return Tc(1===this.instructions.length),this.instructions[0].programId}get data(){return Tc(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=Rc(e);let n=[];for(let t=0;t<r;t++){const t=e.slice(0,Ec);e=e.slice(Ec),n.push(qi.encode(Fr.Buffer.from(t)))}return Kc.populate(Uc.from(e),n)}static populate(t,e=[]){const r=new Kc;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach(((e,n)=>{const i={signature:e==qi.encode(Fc)?null:qi.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)})),t.instructions.forEach((e=>{const n=e.accounts.map((e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some((t=>t.publicKey.toString()===n.toString()))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));r.instructions.push(new qc({keys:n,programId:t.accountKeys[e.programIdIndex],data:qi.decode(e.data)}))})),r._message=t,r._json=r.toJSON(),r}}class Dc{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a}=r,u=o-s;Tc(u>0,"Message header is invalid");const c=t.staticAccountKeys.length-o-a;Tc(c>=0,"Message header is invalid");const h=t.getAccountKeys(e),l=h.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const t of n){const e=[];for(const n of t.accountKeyIndexes){const t=h.get(n);if(void 0===t)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<o?n<u:n<h.staticAccountKeys.length?n-o<c:n-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=h.get(t.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${t.programIdIndex}`);d.push(new qc({programId:n,data:fc(t.data),keys:e}))}return new Dc({payerKey:l,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return Uc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return zc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class $c{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Tc(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Ec));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Oc(e,this.signatures.length);const r=xs([Ms(e.length,"encodedSignaturesLength"),Is(Lc(),this.signatures.length,"signatures"),Ms(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=Rc(e);for(let t=0;t<n;t++)r.push(new Uint8Array(e.splice(0,Ec)));const i=Wc.deserialize(new Uint8Array(e));return new $c(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex((t=>t.equals(n.publicKey)));Tc(t>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[t]=lc(e,n.secretKey)}}addSignature(t,e){Tc(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((e=>e.equals(t)));Tc(r>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=e}}const Hc=new vc("SysvarC1ock11111111111111111111111111111111"),Vc=new vc("SysvarEpochSchedu1e111111111111111111111111"),Gc=new vc("Sysvar1nstructions1111111111111111111111111"),Zc=new vc("SysvarRecentB1ockHashes11111111111111111111"),Jc=new vc("SysvarRent111111111111111111111111111111111"),Yc=new vc("SysvarRewards111111111111111111111111111111"),Xc=new vc("SysvarS1otHashes111111111111111111111111111"),Qc=new vc("SysvarS1otHistory11111111111111111111111111"),th=new vc("SysvarStakeHistory1111111111111111111111111");async function eh(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await t.sendTransaction(e,r,i);let s;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)s=(await t.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;s=(await t.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await t.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function rh(t){return new Promise((e=>setTimeout(e,t)))}function nh(t,e){const r=t.layout.span>=0?t.layout.span:Pc(t,e),n=Fr.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}function ih(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const oh=Ss("lamportsPerSignature"),sh=xs([ks("version"),ks("state"),Bc("authorizedPubkey"),Bc("nonce"),xs([oh],"feeCalculator")]),ah=sh.span;class uh{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=sh.decode(fc(t),0);return new uh({authorizedPubkey:new vc(e.authorizedPubkey),nonce:new vc(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const ch=(hh=8,t=>{const e=Ms(hh,t),{encode:r,decode:n}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(e),i=e;return i.decode=(t,e)=>{const r=n(t,e);return Bs(Fr.Buffer.from(r))},i.encode=(t,e,n)=>{const i=Cs(t,hh);return r(i,e,n)},i});var hh;const lh=Object.freeze({Create:{index:0,layout:xs([ks("instruction"),Es("lamports"),Es("space"),Bc("programId")])},Assign:{index:1,layout:xs([ks("instruction"),Bc("programId")])},Transfer:{index:2,layout:xs([ks("instruction"),ch("lamports")])},CreateWithSeed:{index:3,layout:xs([ks("instruction"),Bc("base"),Cc("seed"),Es("lamports"),Es("space"),Bc("programId")])},AdvanceNonceAccount:{index:4,layout:xs([ks("instruction")])},WithdrawNonceAccount:{index:5,layout:xs([ks("instruction"),Es("lamports")])},InitializeNonceAccount:{index:6,layout:xs([ks("instruction"),Bc("authorized")])},AuthorizeNonceAccount:{index:7,layout:xs([ks("instruction"),Bc("authorized")])},Allocate:{index:8,layout:xs([ks("instruction"),Es("space")])},AllocateWithSeed:{index:9,layout:xs([ks("instruction"),Bc("base"),Cc("seed"),Es("space"),Bc("programId")])},AssignWithSeed:{index:10,layout:xs([ks("instruction"),Bc("base"),Cc("seed"),Bc("programId")])},TransferWithSeed:{index:11,layout:xs([ks("instruction"),ch("lamports"),Cc("seed"),Bc("programId")])},UpgradeNonceAccount:{index:12,layout:xs([ks("instruction")])}});class dh{constructor(){}static createAccount(t){const e=nh(lh.Create,{lamports:t.lamports,space:t.space,programId:fc(t.programId.toBuffer())});return new qc({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,r;if("basePubkey"in t){e=nh(lh.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:fc(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{e=nh(lh.Transfer,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new qc({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){e=nh(lh.AssignWithSeed,{base:fc(t.basePubkey.toBuffer()),seed:t.seed,programId:fc(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=nh(lh.Assign,{programId:fc(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new qc({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=nh(lh.CreateWithSeed,{base:fc(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:fc(t.programId.toBuffer())});let r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new qc({keys:r,programId:this.programId,data:e})}static createNonceAccount(t){const e=new Kc;"basePubkey"in t&&"seed"in t?e.add(dh.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ah,programId:this.programId})):e.add(dh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ah,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=nh(lh.InitializeNonceAccount,{authorized:fc(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Zc,isSigner:!1,isWritable:!1},{pubkey:Jc,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new qc(r)}static nonceAdvance(t){const e=nh(lh.AdvanceNonceAccount),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Zc,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new qc(r)}static nonceWithdraw(t){const e=nh(lh.WithdrawNonceAccount,{lamports:t.lamports});return new qc({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Zc,isSigner:!1,isWritable:!1},{pubkey:Jc,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=nh(lh.AuthorizeNonceAccount,{authorized:fc(t.newAuthorizedPubkey.toBuffer())});return new qc({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,r;if("basePubkey"in t){e=nh(lh.AllocateWithSeed,{base:fc(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:fc(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=nh(lh.Allocate,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new qc({keys:r,programId:this.programId,data:e})}}dh.programId=new vc("11111111111111111111111111111111");class fh{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/fh.chunkSize)+1+1)}static async load(t,e,r,n,i){{const o=await t.getMinimumBalanceForRentExemption(i.length),s=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==i.length&&(a=a||new Kc,a.add(dh.allocate({accountPubkey:r.publicKey,space:i.length}))),s.owner.equals(n)||(a=a||new Kc,a.add(dh.assign({accountPubkey:r.publicKey,programId:n}))),s.lamports<o&&(a=a||new Kc,a.add(dh.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:o-s.lamports})))}else a=(new Kc).add(dh.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:i.length,programId:n}));null!==a&&await eh(t,a,[e,r],{commitment:"confirmed"})}const o=xs([ks("instruction"),ks("offset"),ks("bytesLength"),ks("bytesLengthPadding"),Is(vs("byte"),bs(ks(),-8),"bytes")]),s=fh.chunkSize;let a=0,u=i,c=[];for(;u.length>0;){const i=u.slice(0,s),h=Fr.Buffer.alloc(s+16);o.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},h);const l=(new Kc).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:h});if(c.push(eh(t,l,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await rh(1e3/t)}a+=s,u=u.slice(s)}await Promise.all(c);{const i=xs([ks("instruction")]),o=Fr.Buffer.alloc(i.span);i.encode({instruction:1},o);const s=(new Kc).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Jc,isSigner:!1,isWritable:!1}],programId:n,data:o}),a="processed",u=await t.sendTransaction(s,[e,r],{preflightCommitment:a}),{context:c,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.recentBlockhash},a);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);for(;;){try{if(await t.getSlot({commitment:a})>c.slot)break}catch{}await new Promise((t=>setTimeout(t,Math.round(200))))}}return!0}}fh.chunkSize=932;const ph=new vc("BPFLoader2111111111111111111111111111111111");function gh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mh=Object.prototype.toString,yh=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function wh(t,e){var r,n,i,o,s,a,u;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"==typeof t.toJSON)return wh(t.toJSON(),e);if("[object Array]"===(u=mh.call(t))){for(i="[",n=t.length-1,r=0;r<n;r++)i+=wh(t[r],!0)+",";return n>-1&&(i+=wh(t[r],!0)),i+"]"}if("[object Object]"===u){for(n=(o=yh(t).sort()).length,i="",r=0;r<n;)void 0!==(a=wh(t[s=o[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var bh=gh((function(t){var e=wh(t,!1);if(void 0!==e)return""+e}));function vh(t){let e=0;for(;t>1;)t/=2,e++;return e}class _h{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=vh(function(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32))}(t+32+1))-vh(32)-1;return[e,t-(this.getSlotsInEpoch(e)-32)]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+r,e%this.slotsPerEpoch]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+vh(32)):this.slotsPerEpoch}}class kh extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class Sh extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Eh=globalThis.fetch;class xh extends xu{constructor(t,e,r){super((t=>{const r=Mu(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r}),t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class Ih{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}(Mh,t),r=t.length-56;Tc(r>=0,"lookup table is invalid"),Tc(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=xs([Is(Bc(),n,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new vc(e.authority[0]):void 0,addresses:i.map((t=>new vc(t)))}}}const Mh={index:1,layout:xs([ks("typeIndex"),ch("deactivationSlot"),Ss("lastExtendedSlot"),vs("lastExtendedStartIndex"),vs(),Is(Bc(),bs(vs(),-1),"authority")])},Ah=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;const Bh=na(Hs(vc),Xs(),(t=>new vc(t))),Lh=Qs([Xs(),Vs("base64")]),Ch=na(Hs(Fr.Buffer),Lh,(t=>Fr.Buffer.from(t[0],"base64")));function Ph(t){let e,r;if("string"==typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function Rh(t){return ea([ta({jsonrpc:Vs("2.0"),id:Xs(),result:t}),ta({jsonrpc:Vs("2.0"),id:Xs(),error:ta({code:ra(),message:Xs(),data:Js(Ks("any",(()=>!0)))})})])}const Oh=Rh(ra());function Th(t){return na(Rh(t),Oh,(e=>"error"in e?e:{...e,result:js(e.result,t)}))}function Nh(t){return Th(ta({context:ta({slot:Zs()}),value:t}))}function Uh(t){return ta({context:ta({slot:Zs()}),value:t})}function zh(t,e){return 0===t?new zc({header:e.header,staticAccountKeys:e.accountKeys.map((t=>new vc(t))),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qi.decode(t.data)}))),addressTableLookups:e.addressTableLookups}):new Uc(e)}const Wh=ta({foundation:Zs(),foundationTerm:Zs(),initial:Zs(),taper:Zs(),terminal:Zs()}),jh=Th(Ds(Gs(ta({epoch:Zs(),effectiveSlot:Zs(),amount:Zs(),postBalance:Zs(),commission:Js(Gs(Zs()))})))),Fh=Ds(ta({slot:Zs(),prioritizationFee:Zs()})),qh=ta({total:Zs(),validator:Zs(),foundation:Zs(),epoch:Zs()}),Kh=ta({epoch:Zs(),slotIndex:Zs(),slotsInEpoch:Zs(),absoluteSlot:Zs(),blockHeight:Js(Zs()),transactionCount:Js(Zs())}),Dh=ta({slotsPerEpoch:Zs(),leaderScheduleSlotOffset:Zs(),warmup:$s(),firstNormalEpoch:Zs(),firstNormalSlot:Zs()}),$h=Ys(Xs(),Ds(Zs())),Hh=Gs(ea([ta({}),Xs()])),Vh=ta({err:Hh}),Gh=Vs("receivedSignature"),Zh=ta({"solana-core":Xs(),"feature-set":Js(Zs())}),Jh=Nh(ta({err:Gs(ea([ta({}),Xs()])),logs:Gs(Ds(Xs())),accounts:Js(Gs(Ds(Gs(ta({executable:$s(),owner:Xs(),lamports:Zs(),data:Ds(Xs()),rentEpoch:Js(Zs())}))))),unitsConsumed:Js(Zs()),returnData:Js(Gs(ta({programId:Xs(),data:Qs([Xs(),Vs("base64")])})))})),Yh=Nh(ta({byIdentity:Ys(Xs(),Ds(Zs())),range:ta({firstSlot:Zs(),lastSlot:Zs()})}));const Xh=Th(Wh),Qh=Th(qh),tl=Th(Fh),el=Th(Kh),rl=Th(Dh),nl=Th($h),il=Th(Zs()),ol=Nh(ta({total:Zs(),circulating:Zs(),nonCirculating:Zs(),nonCirculatingAccounts:Ds(Bh)})),sl=ta({amount:Xs(),uiAmount:Gs(Zs()),decimals:Zs(),uiAmountString:Js(Xs())}),al=Nh(Ds(ta({address:Bh,amount:Xs(),uiAmount:Gs(Zs()),decimals:Zs(),uiAmountString:Js(Xs())}))),ul=Nh(Ds(ta({pubkey:Bh,account:ta({executable:$s(),owner:Bh,lamports:Zs(),data:Ch,rentEpoch:Zs()})}))),cl=ta({program:Xs(),parsed:ra(),space:Zs()}),hl=Nh(Ds(ta({pubkey:Bh,account:ta({executable:$s(),owner:Bh,lamports:Zs(),data:cl,rentEpoch:Zs()})}))),ll=Nh(Ds(ta({lamports:Zs(),address:Bh}))),dl=ta({executable:$s(),owner:Bh,lamports:Zs(),data:Ch,rentEpoch:Zs()}),fl=ta({pubkey:Bh,account:dl}),pl=na(ea([Hs(Fr.Buffer),cl]),ea([Lh,cl]),(t=>Array.isArray(t)?js(t,Ch):t)),gl=ta({executable:$s(),owner:Bh,lamports:Zs(),data:pl,rentEpoch:Zs()}),ml=ta({pubkey:Bh,account:gl}),yl=ta({state:ea([Vs("active"),Vs("inactive"),Vs("activating"),Vs("deactivating")]),active:Zs(),inactive:Zs()}),wl=Th(Ds(ta({signature:Xs(),slot:Zs(),err:Hh,memo:Gs(Xs()),blockTime:Js(Gs(Zs()))}))),bl=Th(Ds(ta({signature:Xs(),slot:Zs(),err:Hh,memo:Gs(Xs()),blockTime:Js(Gs(Zs()))}))),vl=ta({subscription:Zs(),result:Uh(dl)}),_l=ta({pubkey:Bh,account:dl}),kl=ta({subscription:Zs(),result:Uh(_l)}),Sl=ta({parent:Zs(),slot:Zs(),root:Zs()}),El=ta({subscription:Zs(),result:Sl}),xl=ea([ta({type:ea([Vs("firstShredReceived"),Vs("completed"),Vs("optimisticConfirmation"),Vs("root")]),slot:Zs(),timestamp:Zs()}),ta({type:Vs("createdBank"),parent:Zs(),slot:Zs(),timestamp:Zs()}),ta({type:Vs("frozen"),slot:Zs(),timestamp:Zs(),stats:ta({numTransactionEntries:Zs(),numSuccessfulTransactions:Zs(),numFailedTransactions:Zs(),maxTransactionsPerEntry:Zs()})}),ta({type:Vs("dead"),slot:Zs(),timestamp:Zs(),err:Xs()})]),Il=ta({subscription:Zs(),result:xl}),Ml=ta({subscription:Zs(),result:Uh(ea([Vh,Gh]))}),Al=ta({subscription:Zs(),result:Zs()}),Bl=ta({pubkey:Xs(),gossip:Gs(Xs()),tpu:Gs(Xs()),rpc:Gs(Xs()),version:Gs(Xs())}),Ll=ta({votePubkey:Xs(),nodePubkey:Xs(),activatedStake:Zs(),epochVoteAccount:$s(),epochCredits:Ds(Qs([Zs(),Zs(),Zs()])),commission:Zs(),lastVote:Zs(),rootSlot:Gs(Zs())}),Cl=Th(ta({current:Ds(Ll),delinquent:Ds(Ll)})),Pl=ea([Vs("processed"),Vs("confirmed"),Vs("finalized")]),Rl=ta({slot:Zs(),confirmations:Gs(Zs()),err:Hh,confirmationStatus:Js(Pl)}),Ol=Nh(Ds(Gs(Rl))),Tl=Th(Zs()),Nl=ta({accountKey:Bh,writableIndexes:Ds(Zs()),readonlyIndexes:Ds(Zs())}),Ul=ta({signatures:Ds(Xs()),message:ta({accountKeys:Ds(Xs()),header:ta({numRequiredSignatures:Zs(),numReadonlySignedAccounts:Zs(),numReadonlyUnsignedAccounts:Zs()}),instructions:Ds(ta({accounts:Ds(Zs()),data:Xs(),programIdIndex:Zs()})),recentBlockhash:Xs(),addressTableLookups:Js(Ds(Nl))})}),zl=ta({pubkey:Bh,signer:$s(),writable:$s(),source:Js(ea([Vs("transaction"),Vs("lookupTable")]))}),Wl=ta({accountKeys:Ds(zl),signatures:Ds(Xs())}),jl=ta({parsed:ra(),program:Xs(),programId:Bh}),Fl=ta({accounts:Ds(Bh),data:Xs(),programId:Bh}),ql=na(ea([Fl,jl]),ea([ta({parsed:ra(),program:Xs(),programId:Xs()}),ta({accounts:Ds(Xs()),data:Xs(),programId:Xs()})]),(t=>js(t,"accounts"in t?Fl:jl))),Kl=ta({signatures:Ds(Xs()),message:ta({accountKeys:Ds(zl),instructions:Ds(ql),recentBlockhash:Xs(),addressTableLookups:Js(Gs(Ds(Nl)))})}),Dl=ta({accountIndex:Zs(),mint:Xs(),owner:Js(Xs()),uiTokenAmount:sl}),$l=ta({writable:Ds(Bh),readonly:Ds(Bh)}),Hl=ta({err:Hh,fee:Zs(),innerInstructions:Js(Gs(Ds(ta({index:Zs(),instructions:Ds(ta({accounts:Ds(Zs()),data:Xs(),programIdIndex:Zs()}))})))),preBalances:Ds(Zs()),postBalances:Ds(Zs()),logMessages:Js(Gs(Ds(Xs()))),preTokenBalances:Js(Gs(Ds(Dl))),postTokenBalances:Js(Gs(Ds(Dl))),loadedAddresses:Js($l),computeUnitsConsumed:Js(Zs())}),Vl=ta({err:Hh,fee:Zs(),innerInstructions:Js(Gs(Ds(ta({index:Zs(),instructions:Ds(ql)})))),preBalances:Ds(Zs()),postBalances:Ds(Zs()),logMessages:Js(Gs(Ds(Xs()))),preTokenBalances:Js(Gs(Ds(Dl))),postTokenBalances:Js(Gs(Ds(Dl))),loadedAddresses:Js($l),computeUnitsConsumed:Js(Zs())}),Gl=ea([Vs(0),Vs("legacy")]),Zl=ta({pubkey:Xs(),lamports:Zs(),postBalance:Gs(Zs()),rewardType:Gs(Xs()),commission:Js(Gs(Zs()))}),Jl=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),transactions:Ds(ta({transaction:Ul,meta:Gs(Hl),version:Js(Gl)})),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),Yl=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),Xl=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),transactions:Ds(ta({transaction:Wl,meta:Gs(Hl),version:Js(Gl)})),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),Ql=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),transactions:Ds(ta({transaction:Kl,meta:Gs(Vl),version:Js(Gl)})),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),td=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),transactions:Ds(ta({transaction:Wl,meta:Gs(Vl),version:Js(Gl)})),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),ed=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),rewards:Js(Ds(Zl)),blockTime:Gs(Zs()),blockHeight:Gs(Zs())}))),rd=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),transactions:Ds(ta({transaction:Ul,meta:Gs(Hl)})),rewards:Js(Ds(Zl)),blockTime:Gs(Zs())}))),nd=Th(Gs(ta({blockhash:Xs(),previousBlockhash:Xs(),parentSlot:Zs(),signatures:Ds(Xs()),blockTime:Gs(Zs())}))),id=Th(Gs(ta({slot:Zs(),meta:Hl,blockTime:Js(Gs(Zs())),transaction:Ul,version:Js(Gl)}))),od=Th(Gs(ta({slot:Zs(),transaction:Kl,meta:Gs(Vl),blockTime:Js(Gs(Zs())),version:Js(Gl)}))),sd=Nh(ta({blockhash:Xs(),feeCalculator:ta({lamportsPerSignature:Zs()})})),ad=Nh(ta({blockhash:Xs(),lastValidBlockHeight:Zs()})),ud=Nh($s()),cd=Th(Ds(ta({slot:Zs(),numTransactions:Zs(),numSlots:Zs(),samplePeriodSecs:Zs()}))),hd=Nh(Gs(ta({feeCalculator:ta({lamportsPerSignature:Zs()})}))),ld=Th(Xs()),dd=Th(Xs()),fd=ta({err:Hh,logs:Ds(Xs()),signature:Xs()}),pd=ta({result:Uh(fd),subscription:Zs()}),gd={"solana-client":"js/0.0.0-development"};class md{constructor(t){this._keypair=void 0,this._keypair=t??uc()}static generate(){return new md(uc())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=cc(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new md({publicKey:r,secretKey:t})}static fromSeed(t){const e=cc(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new md({publicKey:e,secretKey:r})}get publicKey(){return new vc(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const yd=Object.freeze({CreateLookupTable:{index:0,layout:xs([ks("instruction"),ch("recentSlot"),vs("bumpSeed")])},FreezeLookupTable:{index:1,layout:xs([ks("instruction")])},ExtendLookupTable:{index:2,layout:xs([ks("instruction"),ch(),Is(Bc(),bs(ks(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:xs([ks("instruction")])},CloseLookupTable:{index:4,layout:xs([ks("instruction")])}});class wd{constructor(){}static createLookupTable(t){const[e,r]=vc.findProgramAddressSync([t.authority.toBuffer(),Cs(BigInt(t.recentSlot),8)],this.programId),n=nh(yd.CreateLookupTable,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:dh.programId,isSigner:!1,isWritable:!1}];return[new qc({programId:this.programId,keys:i,data:n}),e]}static freezeLookupTable(t){const e=nh(yd.FreezeLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new qc({programId:this.programId,keys:r,data:e})}static extendLookupTable(t){const e=nh(yd.ExtendLookupTable,{addresses:t.addresses.map((t=>t.toBytes()))}),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&r.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:dh.programId,isSigner:!1,isWritable:!1}),new qc({programId:this.programId,keys:r,data:e})}static deactivateLookupTable(t){const e=nh(yd.DeactivateLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new qc({programId:this.programId,keys:r,data:e})}static closeLookupTable(t){const e=nh(yd.CloseLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new qc({programId:this.programId,keys:r,data:e})}}wd.programId=new vc("AddressLookupTab1e1111111111111111111111111");const bd=Object.freeze({RequestUnits:{index:0,layout:xs([vs("instruction"),ks("units"),ks("additionalFee")])},RequestHeapFrame:{index:1,layout:xs([vs("instruction"),ks("bytes")])},SetComputeUnitLimit:{index:2,layout:xs([vs("instruction"),ks("units")])},SetComputeUnitPrice:{index:3,layout:xs([vs("instruction"),ch("microLamports")])}});class vd{constructor(){}static requestUnits(t){const e=nh(bd.RequestUnits,t);return new qc({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=nh(bd.RequestHeapFrame,t);return new qc({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=nh(bd.SetComputeUnitLimit,t);return new qc({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=nh(bd.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new qc({keys:[],programId:this.programId,data:e})}}vd.programId=new vc("ComputeBudget111111111111111111111111111111");const _d=xs([vs("numSignatures"),vs("padding"),_s("signatureOffset"),_s("signatureInstructionIndex"),_s("publicKeyOffset"),_s("publicKeyInstructionIndex"),_s("messageDataOffset"),_s("messageDataSize"),_s("messageInstructionIndex")]);class kd{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,instructionIndex:i}=t;Tc(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),Tc(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const o=_d.span,s=o+e.length,a=s+n.length,u=Fr.Buffer.alloc(a+r.length),c=null==i?65535:i;return _d.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:c,publicKeyOffset:o,publicKeyInstructionIndex:c,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(e,o),u.fill(n,s),u.fill(r,a),new qc({keys:[],programId:kd.programId,data:u})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;Tc(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=md.fromSecretKey(e),i=t.publicKey.toBytes(),o=lc(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}kd.programId=new vc("Ed25519SigVerify111111111111111111111111111");sc.utils.isValidPrivateKey;const Sd=sc.getPublicKey,Ed=xs([vs("numSignatures"),_s("signatureOffset"),vs("signatureInstructionIndex"),_s("ethAddressOffset"),vs("ethAddressInstructionIndex"),_s("messageDataOffset"),_s("messageDataSize"),vs("messageInstructionIndex"),Ms(20,"ethAddress"),Ms(64,"signature"),vs("recoveryId")]);class xd{constructor(){}static publicKeyToEthAddress(t){Tc(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return Fr.Buffer.from(qu(fc(t))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:o}=t;return xd.createInstructionWithEthAddress({ethAddress:xd.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:n,recoveryId:i,instructionIndex:o=0}=t;let s;s="string"==typeof e?e.startsWith("0x")?Fr.Buffer.from(e.substr(2),"hex"):Fr.Buffer.from(e,"hex"):e,Tc(20===s.length,`Address must be 20 bytes but received ${s.length} bytes`);const a=12+s.length,u=a+n.length+1,c=Fr.Buffer.alloc(Ed.span+r.length);return Ed.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:o,signature:fc(n),ethAddress:fc(s),recoveryId:i},c),c.fill(fc(r),Ed.span),new qc({keys:[],programId:xd.programId,data:c})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;Tc(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=fc(e),i=Sd(t,!1).slice(1),o=Fr.Buffer.from(qu(fc(r))),[s,a]=((t,e)=>{const r=sc.sign(t,e);return[r.toCompactRawBytes(),r.recovery]})(o,t);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,recoveryId:a,instructionIndex:n})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}var Id;xd.programId=new vc("KeccakSecp256k11111111111111111111111111111");const Md=new vc("StakeConfig11111111111111111111111111111111");class Ad{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Bd{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Id=Bd,Bd.default=new Id(0,0,vc.default);const Ld=Object.freeze({Initialize:{index:0,layout:xs([ks("instruction"),((t="authorized")=>xs([Bc("staker"),Bc("withdrawer")],t))(),((t="lockup")=>xs([Es("unixTimestamp"),Es("epoch"),Bc("custodian")],t))()])},Authorize:{index:1,layout:xs([ks("instruction"),Bc("newAuthorized"),ks("stakeAuthorizationType")])},Delegate:{index:2,layout:xs([ks("instruction")])},Split:{index:3,layout:xs([ks("instruction"),Es("lamports")])},Withdraw:{index:4,layout:xs([ks("instruction"),Es("lamports")])},Deactivate:{index:5,layout:xs([ks("instruction")])},Merge:{index:7,layout:xs([ks("instruction")])},AuthorizeWithSeed:{index:8,layout:xs([ks("instruction"),Bc("newAuthorized"),ks("stakeAuthorizationType"),Cc("authoritySeed"),Bc("authorityOwner")])}}),Cd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Pd{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Bd.default,o=nh(Ld.Initialize,{authorized:{staker:fc(r.staker.toBuffer()),withdrawer:fc(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:fc(i.custodian.toBuffer())}}),s={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Jc,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new qc(s)}static createAccountWithSeed(t){const e=new Kc;e.add(dh.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new Kc;e.add(dh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=nh(Ld.Delegate);return(new Kc).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:th,isSigner:!1,isWritable:!1},{pubkey:Md,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=t,s=nh(Ld.Authorize,{newAuthorized:fc(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Kc).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=t,u=nh(Ld.AuthorizeWithSeed,{newAuthorized:fc(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:fc(i.toBuffer())}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Hc,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Kc).add({keys:c,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,o=nh(Ld.Split,{lamports:i});return new qc({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t){const e=new Kc;return e.add(dh.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,basePubkey:i,seed:o,lamports:s}=t,a=new Kc;return a.add(dh.allocate({accountPubkey:n,basePubkey:i,seed:o,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:s}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=nh(Ld.Merge);return(new Kc).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:th,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=t,s=nh(Ld.Withdraw,{lamports:i}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:th,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Kc).add({keys:a,programId:this.programId,data:s})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=nh(Ld.Deactivate);return(new Kc).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Pd.programId=new vc("Stake11111111111111111111111111111111111111"),Pd.space=200;class Rd{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}const Od=Object.freeze({InitializeAccount:{index:0,layout:xs([ks("instruction"),((t="voteInit")=>xs([Bc("nodePubkey"),Bc("authorizedVoter"),Bc("authorizedWithdrawer"),vs("commission")],t))()])},Authorize:{index:1,layout:xs([ks("instruction"),Bc("newAuthorized"),ks("voteAuthorizationType")])},Withdraw:{index:3,layout:xs([ks("instruction"),Es("lamports")])},AuthorizeWithSeed:{index:10,layout:xs([ks("instruction"),((t="voteAuthorizeWithSeedArgs")=>xs([ks("voteAuthorizationType"),Bc("currentAuthorityDerivedKeyOwnerPubkey"),Cc("currentAuthorityDerivedKeySeed"),Bc("newAuthorized")],t))()])}}),Td=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Nd{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=nh(Od.InitializeAccount,{voteInit:{nodePubkey:fc(n.nodePubkey.toBuffer()),authorizedVoter:fc(n.authorizedVoter.toBuffer()),authorizedWithdrawer:fc(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Jc,isSigner:!1,isWritable:!1},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new qc(o)}static createAccount(t){const e=new Kc;return e.add(dh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,o=nh(Od.Authorize,{newAuthorized:fc(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Kc).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=t,a=nh(Od.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:fc(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:fc(i.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Hc,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new Kc).add({keys:u,programId:this.programId,data:a})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,o=nh(Od.Withdraw,{lamports:n}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Kc).add({keys:s,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insuffcient funds.");return Nd.withdraw(t)}}Nd.programId=new vc("Vote111111111111111111111111111111111111111"),Nd.space=3731;const Ud=new vc("Va1idator1nfo111111111111111111111111111111"),zd=ta({name:Xs(),website:Js(Xs()),details:Js(Xs()),keybaseUsername:Js(Xs())});class Wd{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(2!==Rc(e))return null;const r=[];for(let t=0;t<2;t++){const t=new vc(e.slice(0,wc));e=e.slice(wc);const n=1===e.slice(0,1)[0];e=e.slice(1),r.push({publicKey:t,isSigner:n})}if(r[0].publicKey.equals(Ud)&&r[1].isSigner){const t=Cc().decode(Fr.Buffer.from(e)),n=JSON.parse(t);return Ws(n,zd),new Wd(r[1].publicKey,n)}return null}}const jd=new vc("Vote111111111111111111111111111111111111111"),Fd=xs([Bc("nodePubkey"),Bc("authorizedWithdrawer"),vs("commission"),Ss(),Is(xs([Ss("slot"),ks("confirmationCount")]),bs(ks(),-8),"votes"),vs("rootSlotValid"),Ss("rootSlot"),Ss(),Is(xs([Ss("epoch"),Bc("authorizedVoter")]),bs(ks(),-8),"authorizedVoters"),xs([Is(xs([Bc("authorizedPubkey"),Ss("epochOfLastAuthorizedSwitch"),Ss("targetEpoch")]),32,"buf"),Ss("idx"),vs("isEmpty")],"priorVoters"),Ss(),Is(xs([Ss("epoch"),Ss("credits"),Ss("prevCredits")]),bs(ks(),-8),"epochCredits"),xs([Ss("slot"),Ss("timestamp")],"lastTimestamp")]);class qd{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=Fd.decode(fc(t),4);let r=e.rootSlot;return e.rootSlotValid||(r=null),new qd({nodePubkey:new vc(e.nodePubkey),authorizedWithdrawer:new vc(e.authorizedWithdrawer),commission:e.commission,votes:e.votes,rootSlot:r,authorizedVoters:e.authorizedVoters.map(Kd),priorVoters:$d(e.priorVoters),epochCredits:e.epochCredits,lastTimestamp:e.lastTimestamp})}}function Kd({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new vc(t)}}function Dd({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new vc(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function $d({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map(Dd),...t.slice(0,e).map(Dd)]}const Hd={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};var Vd=Object.freeze({__proto__:null,Account:class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=fc(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=fc(ac()),this._publicKey=fc(cc(this._secretKey))}get publicKey(){return new vc(this._publicKey)}get secretKey(){return Fr.Buffer.concat([this._secretKey,this._publicKey],64)}},AddressLookupTableAccount:Ih,AddressLookupTableInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=ks("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(yd))if(n.index==e){r=t;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=ih(yd.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=ih(yd.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map((t=>new vc(t)))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(wd.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},AddressLookupTableProgram:wd,Authorized:Ad,BLOCKHASH_CACHE_TIMEOUT_MS:3e4,BPF_LOADER_DEPRECATED_PROGRAM_ID:_c,BPF_LOADER_PROGRAM_ID:ph,BpfLoader:class{static getMinNumSignatures(t){return fh.getMinNumSignatures(t)}static load(t,e,r,n,i){return fh.load(t,e,r,i,n)}},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:bd,ComputeBudgetInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=vs("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(bd))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=ih(bd.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=ih(bd.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=ih(bd.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=ih(bd.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(vd.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},ComputeBudgetProgram:vd,Connection:class{constructor(t,e){let r,n,i,o,s,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:r,config:n}=Ph(e),i=this._buildArgs([],r,void 0,n),o=bh(i);return t[o]=t[o]??(async()=>{try{const t=js(await this._rpcRequest("getBlockHeight",i),Th(Zs()));if("error"in t)throw new Sh(t.error,"failed to get block height information");return t.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,s=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=r||function(t){const e=t.match(Ah);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${n}${null==a?"":`:${a+1}`}${o}`}(t),this._rpcClient=function(t,e,r,n,i,o){const s=r||Eh;let a;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(t,e)=>{const r=await new Promise(((r,i)=>{try{n(t,e,((t,e)=>r([t,e])))}catch(t){i(t)}}));return await s(...r)}),new Na((async(r,n)=>{const o={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},gd)};try{let e,r=5,u=500;for(;e=a?await a(t,o):await s(t,o),429===e.status&&!0!==i&&(r-=1,0!==r);)console.log(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${u}ms delay...`),await rh(u),u*=2;const c=await e.text();e.ok?n(null,c):n(new Error(`${e.status} ${e.statusText}: ${c}`))}catch(t){t instanceof Error&&n(t)}}),{})}(t,n,i,o,s,a),this._rpcRequest=function(t){return(e,r)=>new Promise(((n,i)=>{t.request(e,r,((t,e)=>{t?i(t):n(e)}))}))}(this._rpcClient),this._rpcBatchRequest=function(t){return e=>new Promise(((r,n)=>{0===e.length&&r([]);const i=e.map((e=>t.request(e.methodName,e.args)));t.request(i,((t,e)=>{t?n(t):r(e)}))}))}(this._rpcClient),this._rpcWebSocket=new xh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgs([t.toBase58()],r,void 0,n),o=js(await this._rpcRequest("getBalance",i),Nh(Zs()));if("error"in o)throw new Sh(o.error,`failed to get balance for ${t.toBase58()}`);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}))}async getBlockTime(t){const e=js(await this._rpcRequest("getBlockTime",[t]),Th(Gs(Zs())));if("error"in e)throw new Sh(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){const t=js(await this._rpcRequest("minimumLedgerSlot",[]),Th(Zs()));if("error"in t)throw new Sh(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const t=js(await this._rpcRequest("getFirstAvailableBlock",[]),il);if("error"in t)throw new Sh(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=js(await this._rpcRequest("getSupply",[e]),ol);if("error"in r)throw new Sh(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=js(await this._rpcRequest("getTokenSupply",r),Nh(sl));if("error"in n)throw new Sh(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=js(await this._rpcRequest("getTokenAccountBalance",r),Nh(sl));if("error"in n)throw new Sh(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Ph(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const s=this._buildArgs(o,n,"base64",i),a=js(await this._rpcRequest("getTokenAccountsByOwner",s),ul);if("error"in a)throw new Sh(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=js(await this._rpcRequest("getTokenAccountsByOwner",i),hl);if("error"in o)throw new Sh(o.error,`failed to get token accounts owned by account ${t.toBase58()}`);return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=js(await this._rpcRequest("getLargestAccounts",r),ll);if("error"in n)throw new Sh(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=js(await this._rpcRequest("getTokenLargestAccounts",r),al);if("error"in n)throw new Sh(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgs([t.toBase58()],r,"base64",n),o=js(await this._rpcRequest("getAccountInfo",i),Nh(Gs(dl)));if("error"in o)throw new Sh(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),o=js(await this._rpcRequest("getAccountInfo",i),Nh(Gs(gl)));if("error"in o)throw new Sh(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Ph(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],r,"jsonParsed",n),s=js(await this._rpcRequest("getMultipleAccounts",o),Nh(Ds(Gs(gl))));if("error"in s)throw new Sh(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Ph(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],r,"base64",n),s=js(await this._rpcRequest("getMultipleAccounts",o),Nh(Ds(Gs(dl))));if("error"in s)throw new Sh(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Ph(e),o=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=js(await this._rpcRequest("getStakeActivation",o),Th(yl));if("error"in s)throw new Sh(s.error,`failed to get Stake Activation ${t.toBase58()}`);return s.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Ph(e),{encoding:i,...o}=n||{},s=this._buildArgs([t.toBase58()],r,i||"base64",o),a=await this._rpcRequest("getProgramAccounts",s),u=Ds(fl),c=!0===o.withContext?js(a,Nh(u)):js(a,Th(u));if("error"in c)throw new Sh(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),o=js(await this._rpcRequest("getProgramAccounts",i),Th(Ds(ml)));if("error"in o)throw new Sh(o.error,`failed to get accounts owned by program ${t.toBase58()}`);return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=qi.decode(r)}catch(t){throw new Error("signature must be base58 encoded: "+r)}return Tc(64===n.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise(((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",(()=>{r(t.reason)})))}))}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise(((o,s)=>{try{r=this.onSignature(e,((t,e)=>{r=void 0;const n={context:e,value:t};o({__type:jc.PROCESSED,response:n})}),t);const a=new Promise((t=>{null==r?t():n=this._onSubscriptionStateChange(r,(e=>{"subscribed"===e&&t()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:u}=r;if(null!=u)if(u?.err)s(u.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}i=!0,o({__type:jc.PROCESSED,response:{context:n,value:u}})}})()}catch(t){s(t)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const o=new Promise((e=>{const n=async()=>{try{return await this.getBlockHeight(t)}catch(t){return-1}};(async()=>{let t=await n();if(!i){for(;t<=r;){if(await rh(1e3),i)return;if(t=await n(),i)return}e({__type:jc.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),u=this.getCancellationPromise(e);let c;try{const t=await Promise.race([u,a,o]);if(t.__type!==jc.PROCESSED)throw new xc(n);c=t.response}finally{i=!0,s()}return c}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s=!1;const a=new Promise((e=>{let o=i,a=null;const u=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,i?.nonce}catch(t){return o}};(async()=>{if(o=await u(),!s)for(;;){if(i!==o)return void e({__type:jc.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await rh(2e3),s)return;if(o=await u(),s)return}})()})),{abortConfirmation:u,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),h=this.getCancellationPromise(e);let l;try{const e=await Promise.race([h,c,a]);if(e.__type===jc.PROCESSED)l=e.response;else{let n;for(;;){const t=await this.getSignatureStatus(o);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??r))){n=t;break}await rh(400)}if(!n?.value)throw new Mc(o);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Mc(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Mc(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Mc(o)}l={context:n.context,value:{err:n.value.err}}}}}finally{s=!0,u()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise((e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>e({__type:jc.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let s;try{const t=await Promise.race([o,n]);if(t.__type!==jc.PROCESSED)throw new Ic(e,t.timeoutMs/1e3);s=t.response}finally{clearTimeout(r),i()}return s}async getClusterNodes(){const t=js(await this._rpcRequest("getClusterNodes",[]),Th(Ds(Bl)));if("error"in t)throw new Sh(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=js(await this._rpcRequest("getVoteAccounts",e),Cl);if("error"in r)throw new Sh(r.error,"failed to get vote accounts");return r.result}async getSlot(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,void 0,r),i=js(await this._rpcRequest("getSlot",n),Th(Zs()));if("error"in i)throw new Sh(i.error,"failed to get slot");return i.result}async getSlotLeader(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,void 0,r),i=js(await this._rpcRequest("getSlotLeader",n),Th(Xs()));if("error"in i)throw new Sh(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){const r=[t,e],n=js(await this._rpcRequest("getSlotLeaders",r),Th(Ds(Bh)));if("error"in n)throw new Sh(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);Tc(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=js(await this._rpcRequest("getSignatureStatuses",r),Ol);if("error"in n)throw new Sh(n.error,"failed to get signature status");return n.result}async getTransactionCount(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,void 0,r),i=js(await this._rpcRequest("getTransactionCount",n),Th(Zs()));if("error"in i)throw new Sh(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=js(await this._rpcRequest("getInflationGovernor",e),Xh);if("error"in r)throw new Sh(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Ph(r),o=this._buildArgs([t.map((t=>t.toBase58()))],n,void 0,{...i,epoch:null!=e?e:i?.epoch}),s=js(await this._rpcRequest("getInflationReward",o),jh);if("error"in s)throw new Sh(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){const t=js(await this._rpcRequest("getInflationRate",[]),Qh);if("error"in t)throw new Sh(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,void 0,r),i=js(await this._rpcRequest("getEpochInfo",n),el);if("error"in i)throw new Sh(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const t=js(await this._rpcRequest("getEpochSchedule",[]),rl);if("error"in t)throw new Sh(t.error,"failed to get epoch schedule");const e=t.result;return new _h(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){const t=js(await this._rpcRequest("getLeaderSchedule",[]),nl);if("error"in t)throw new Sh(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=js(await this._rpcRequest("getMinimumBalanceForRentExemption",r),Tl);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=js(await this._rpcRequest("getRecentBlockhash",e),sd);if("error"in r)throw new Sh(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(t){const e=js(await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),cd);if("error"in e)throw new Sh(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=js(await this._rpcRequest("getFeeCalculatorForBlockhash",r),hd);if("error"in n)throw new Sh(n.error,"failed to get fee calculator");const{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=fc(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=js(await this._rpcRequest("getFeeForMessage",n),Nh(Gs(Zs())));if("error"in i)throw new Sh(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map((t=>t.toBase58())),r=e?.length?[e]:[],n=js(await this._rpcRequest("getRecentPrioritizationFees",r),tl);if("error"in n)throw new Sh(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,void 0,r),i=js(await this._rpcRequest("getLatestBlockhash",n),ad);if("error"in i)throw new Sh(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgs([t],r,void 0,n),o=js(await this._rpcRequest("isBlockhashValid",i),ud);if("error"in o)throw new Sh(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=js(await this._rpcRequest("getVersion",[]),Th(Zh));if("error"in t)throw new Sh(t.error,"failed to get version");return t.result}async getGenesisHash(){const t=js(await this._rpcRequest("getGenesisHash",[]),Th(Xs()));if("error"in t)throw new Sh(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=js(o,Xl);if("error"in t)throw t.error;return t.result}case"none":{const t=js(o,Yl);if("error"in t)throw t.error;return t.result}default:{const t=js(o,Jl);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map((({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:zh(r,t.message)},version:r})))}:null}}}catch(t){throw new Sh(t,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=js(o,td);if("error"in t)throw t.error;return t.result}case"none":{const t=js(o,ed);if("error"in t)throw t.error;return t.result}default:{const t=js(o,Ql);if("error"in t)throw t.error;return t.result}}}catch(t){throw new Sh(t,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"==typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=js(await this._rpcRequest("getBlockProduction",n),Yh);if("error"in i)throw new Sh(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),o=js(await this._rpcRequest("getTransaction",i),id);if("error"in o)throw new Sh(o.error,"failed to get transaction");const s=o.result;return s?{...s,transaction:{...s.transaction,message:zh(s.version,s.transaction.message)}}:s}async getParsedTransaction(t,e){const{commitment:r,config:n}=Ph(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),o=js(await this._rpcRequest("getTransaction",i),od);if("error"in o)throw new Sh(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Ph(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=js(t,od);if("error"in e)throw new Sh(e.error,"failed to get transactions");return e.result}))}async getTransactions(t,e){const{commitment:r,config:n}=Ph(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=js(t,id);if("error"in e)throw new Sh(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:zh(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=js(await this._rpcRequest("getConfirmedBlock",r),rd);if("error"in n)throw new Sh(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");const o={...i,transactions:i.transactions.map((({transaction:t,meta:e})=>{const r=new Uc(t.message);return{meta:e,transaction:{...t,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:t,meta:e})=>({meta:e,transaction:Kc.populate(t.message,t.signatures)})))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=js(await this._rpcRequest("getBlocks",n),Th(Ds(Zs())));if("error"in i)throw new Sh(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=js(await this._rpcRequest("getBlock",r),nd);if("error"in n)throw new Sh(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=js(await this._rpcRequest("getConfirmedBlock",r),nd);if("error"in n)throw new Sh(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=js(await this._rpcRequest("getConfirmedTransaction",r),id);if("error"in n)throw new Sh(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const o=new Uc(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:Kc.populate(o,s)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=js(await this._rpcRequest("getConfirmedTransaction",r),od);if("error"in n)throw new Sh(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(t,e){const r=t.map((t=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((t=>{const e=js(t,od);if("error"in e)throw new Sh(e.error,"failed to get confirmed transactions");return e.result}))}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,n)).map((t=>t.signature))}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=js(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),wl);if("error"in i)throw new Sh(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=js(await this._rpcRequest("getSignaturesForAddress",n),bl);if("error"in i)throw new Sh(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new Ih({key:t,state:Ih.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=uh.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}))}async requestAirdrop(t,e){const r=js(await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),ld);if("error"in r)throw new Sh(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await rh(100);const t=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await rh(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ph(t),n=this._buildArgs([],e,"base64",r),i=js(await this._rpcRequest("getStakeMinimumDelegation",n),Nh(Zs()));if("error"in i)throw new Sh(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,r){if("message"in t){const n=t.serialize(),i=Fr.Buffer.from(n).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment);const s=[i,o],a=js(await this._rpcRequest("simulateTransaction",s),Jh);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let n;if(t instanceof Kc){let e=t;n=new Kc,n.feePayer=e.feePayer,n.instructions=t.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures}else n=Kc.populate(t),n._message=n._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(n.nonceInfo&&i)n.sign(...i);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(n.lastValidBlockHeight=e.lastValidBlockHeight,n.recentBlockhash=e.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=n._compile(),s=o.serialize(),a=n._serialize(s).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map((t=>t.toBase58()));u.accounts={encoding:"base64",addresses:t}}i&&(u.sigVerify=!0);const c=[a,u],h=js(await this._rpcRequest("simulateTransaction",c),Jh);if("error"in h){let t;if("data"in h.error&&(t=h.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(h.error.message,r)}throw new kh("failed to simulate transaction: "+h.error.message,t)}return h.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=fc(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[t,r],s=js(await this._rpcRequest("sendTransaction",o),dd);if("error"in s){let t;throw"data"in s.error&&(t=s.error.data.logs),new kh("failed to send transaction: "+s.error.message,t)}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([t,e])=>{this._setSubscription(t,{...e,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach((t=>{try{t(e.state)}catch{}}))}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(e),()=>{n.delete(e),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&console.log(`Error when closing socket connection: ${t.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(o){if(o instanceof Error&&console.error(`${i} error for argument`,n,o.message),!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach((t=>{try{t(...e)}catch(t){console.error(t)}}))}_wsOnAccountNotification(t){const{result:e,subscription:r}=js(t,vl);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=bh([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];Tc(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=js(t,kl);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=js(t,pd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=js(t,El);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=js(t,Il);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=js(t,Ml);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],n,void 0,i),s=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(s)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=js(t,Al);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Ed25519Program:kd,Enum:class extends pc{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map((t=>{this.enum=t}))}},EpochSchedule:_h,FeeCalculatorLayout:oh,Keypair:md,LAMPORTS_PER_SOL:1e9,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:yd,Loader:fh,Lockup:Bd,MAX_SEED_LENGTH:32,Message:Uc,MessageAccountKeys:Ac,MessageV0:zc,NONCE_ACCOUNT_LENGTH:ah,NonceAccount:uh,PACKET_DATA_SIZE:kc,PUBLIC_KEY_LENGTH:wc,PublicKey:vc,SIGNATURE_LENGTH_IN_BYTES:Ec,SOLANA_SCHEMA:gc,STAKE_CONFIG_ID:Md,STAKE_INSTRUCTION_LAYOUTS:Ld,SYSTEM_INSTRUCTION_LAYOUTS:lh,SYSVAR_CLOCK_PUBKEY:Hc,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Vc,SYSVAR_INSTRUCTIONS_PUBKEY:Gc,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Zc,SYSVAR_RENT_PUBKEY:Jc,SYSVAR_REWARDS_PUBKEY:Yc,SYSVAR_SLOT_HASHES_PUBKEY:Xc,SYSVAR_SLOT_HISTORY_PUBKEY:Qc,SYSVAR_STAKE_HISTORY_PUBKEY:th,Secp256k1Program:xd,SendTransactionError:kh,SolanaJSONRPCError:Sh,SolanaJSONRPCErrorCode:{JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},StakeAuthorizationLayout:Cd,StakeInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=ks("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Ld))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=ih(Ld.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Ad(new vc(e.staker),new vc(e.withdrawer)),lockup:new Bd(r.unixTimestamp,r.epoch,new vc(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),ih(Ld.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=ih(Ld.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new vc(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=ih(Ld.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new vc(i),newAuthorizedPubkey:new vc(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ih(Ld.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ih(Ld.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ih(Ld.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ih(Ld.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Pd.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},StakeProgram:Pd,Struct:pc,SystemInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=ks("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(lh))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=ih(lh.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new vc(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=ih(lh.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=ih(lh.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new vc(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=ih(lh.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=ih(lh.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new vc(e),seed:r,space:n,programId:new vc(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=ih(lh.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new vc(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=ih(lh.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new vc(e),seed:r,programId:new vc(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:o}=ih(lh.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new vc(e),seed:r,lamports:n,space:i,programId:new vc(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=ih(lh.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new vc(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),ih(lh.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=ih(lh.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=ih(lh.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new vc(e)}}static checkProgramId(t){if(!t.equals(dh.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},SystemProgram:dh,Transaction:Kc,TransactionExpiredBlockheightExceededError:xc,TransactionExpiredNonceInvalidError:Mc,TransactionExpiredTimeoutError:Ic,TransactionInstruction:qc,TransactionMessage:Dc,TransactionStatus:jc,VALIDATOR_INFO_KEY:Ud,VERSION_PREFIX_MASK:Sc,VOTE_PROGRAM_ID:jd,ValidatorInfo:Wd,VersionedMessage:Wc,VersionedTransaction:$c,VoteAccount:qd,VoteAuthorizationLayout:Td,VoteInit:Rd,VoteInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=ks("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Od))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=ih(Od.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Rd(new vc(e.nodePubkey),new vc(e.authorizedVoter),new vc(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=ih(Od.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new vc(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=ih(Od.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new vc(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new vc(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=ih(Od.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Nd.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},VoteProgram:Nd,clusterApiUrl:function(t,e){const r=!1===e?"http":"https";if(!t)return Hd[r].devnet;const n=Hd[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n},sendAndConfirmRawTransaction:async function(t,e,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await t.sendRawTransaction(e,s),u=o&&o.commitment,c=i?t.confirmTransaction(i,u):t.confirmTransaction(a,u),h=(await c).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a},sendAndConfirmTransaction:eh});var Gd=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}};var Zd=Gd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Jd=e({__proto__:null,default:Zd},[Zd]);t.AuthProvider=class{constructor(t,e){this.initStatus=Et.CREATED,this.initPromises=[],this.loginWithSocial=t=>r(this,void 0,void 0,(function*(){if(this.initStatus===Et.DONE){if(yield this.isLoggedIn())return this._provider;if(!(yield this._provider.isLoginAvailable(t)))throw new Error(`${t} login is not available`);const e=yield this._provider.initSocialLogin(t);return this.beginLogin(e)}throw rt})),this.loginWithLink=(t,e)=>r(this,void 0,void 0,(function*(){if(this.initStatus===Et.DONE){if(yield this.isLoggedIn())return this._provider;if(!_r(t))throw new Error("Invalid email");return yield this._provider.initPasswordlessLogin(t),e&&e(),yield this.waitForConnect()}throw rt})),this.loginWithBearer=(t,e)=>r(this,void 0,void 0,(function*(){if(this.initStatus!==Et.DONE)throw rt;return yield this.iframeWrapper.triggerBearerAuthentication(t,e)}));let n=null==e?void 0:e.network,i=t;if((t=>3==t.split("_").length)(t)){const e=(t=>{const e=t.split("_"),[,r,n]=e;if(!dt(n))throw new Error("Invalid ClientId");if("live"==r)return{network:"mainnet",address:n};if("test"==r)return{network:"testnet",address:n};if("dev"==r)return{network:"dev",address:n};throw new Error("Invalid ClientId")})(t);n=e.network,i=e.address}(t=>{if(!(t=>null!=t)(t))throw new Error("appAddress is required");if(!(t=>"string"==typeof t&&t.trim().length>0)(t))throw new Error("appAddress is required to be a non-empty string");if(!dt(t))throw new Error("appAddress is required to be an ethereum address")})(i),this.appId=pt(i),this.params=(t=>{var e;const r={network:"testnet",debug:!1,position:"right",theme:"dark",alwaysVisible:!0,setWindowProvider:!1,connectOptions:{compact:!1}};return(null==t?void 0:t.network)&&(r.network=t.network),void 0!==(null==t?void 0:t.debug)&&(r.debug=t.debug),(null==t?void 0:t.redirectUrl)&&(r.redirectUrl=t.redirectUrl),(null==t?void 0:t.chainConfig)&&(r.chainConfig=t.chainConfig),(null==t?void 0:t.theme)&&(r.theme=t.theme),(null==t?void 0:t.position)&&(r.position=t.position),void 0!==(null==t?void 0:t.alwaysVisible)&&(r.alwaysVisible=t.alwaysVisible),void 0!==(null===(e=null==t?void 0:t.connectOptions)||void 0===e?void 0:e.compact)&&(r.connectOptions.compact=t.connectOptions.compact),"testnet"!=r.network&&"dev"!=r.network||console.log(`%c[Arcana Auth] You are currently on ${r.network} network.`,"color: red"),r})(Object.assign(Object.assign({},e),{network:n})),this.networkConfig=(t=>{if("string"==typeof t&&"testnet"==t)return Gt;if("string"==typeof t&&"dev"==t)return Vt;if("string"==typeof t&&"mainnet"==t)return Zt;if(function(t){return"string"!=typeof t&&(!("object"!=typeof t||!t.gatewayUrl)&&(!("object"!=typeof t||!t.walletUrl)&&!("object"!=typeof t||!t.authUrl)))}(t))return t;throw new Error("Invalid network config passed")})(this.params.network),function(t,e){try{if("undefined"==typeof document)return;const r=document.createElement("link");r.href=`${t}/${e}/login`,r.type="text/html",r.rel="prefetch",document.head.appendChild(r)}catch(t){console.warn(t)}}(this.networkConfig.walletUrl,this.appId),this.rpcConfig=this.params.chainConfig,this._provider=new kt(this.rpcConfig),this.params.debug?(ut(it.DEBUG),at=t=>{console.error(t)}):ut(it.NOLOGS)}init(){var t;return r(this,void 0,void 0,(function*(){if(this.initStatus===Et.CREATED){if(this.initStatus=Et.RUNNING,this.iframeWrapper)return this;if(yield this.setAppConfig(),this.iframeWrapper=new Ht({appId:this.appId,iframeUrl:this.networkConfig.walletUrl,appConfig:this.appConfig,position:this.params.position,standaloneMode:this._standaloneMode}),this.iframeWrapper.setWalletType(null!==(t=this.params.appMode)&&void 0!==t?t:this.params.alwaysVisible?It.Full:It.Widget),yield this._provider.init(this.iframeWrapper,{loginWithLink:this.loginWithLink,loginWithSocial:this.loginWithSocial}),this.setProviders(),this.appConfig.chainType===xt.solana_cv25519)this._solanaAPI=yield jr.create(this._provider);return this.initStatus=Et.DONE,this.resolveInitPromises(),this}return this.initStatus===Et.RUNNING?yield this.waitForInit():this}))}connect(){return r(this,void 0,void 0,(function*(){if(this.initStatus!==Et.DONE&&(yield this.init()),yield this.isLoggedIn())return this._provider;const t=yield this.getLogins();return this.connectCtrl||(this.connectCtrl=new Wr({loginWithLink:this.loginWithLink,loginWithSocial:this.loginWithSocial,loginList:t,mode:this.theme,logo:this.logo.vertical,options:this.params.connectOptions})),new Promise(((t,e)=>{this.connectCtrl.open((t=>{if(t)return e(t)})),this.waitForConnect().then((e=>{this.connectCtrl.close(),t(e)})).catch(e)}))}))}showWallet(){if(!this.connected)throw new Error("no connection yet, cannot show wallet");this._provider.expandWallet()}get connected(){return this._provider.connected}getUser(){if(this.initStatus===Et.DONE)return this._provider.requestUserInfo();throw rt}isLoggedIn(){return r(this,void 0,void 0,(function*(){if(this.initStatus===Et.DONE){return this._provider.isLoggedIn()}throw rt}))}logout(){if(this.initStatus===Et.DONE)return this._provider.triggerLogout();throw rt}getPublicKey(t,e="google"){return r(this,void 0,void 0,(function*(){if(this.initStatus===Et.DONE){if(!t||""===t)throw new tt("email_required",`Email is required in getPublicKey, got ${t}`);return yield this._provider.getPublicKey(t,e)}throw rt}))}getLogins(){return r(this,void 0,void 0,(function*(){if(this.initStatus===Et.DONE)return yield this._provider.getAvailableLogins();throw rt}))}getProvider(){if(this.initStatus===Et.DONE)return this._provider;throw rt}canReconnect(){return r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return!1;const t=this.iframeWrapper.getSessionID();return!!t&&!(t.expiry<Date.now())}))}reconnect(){return r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return void(yield this.waitForConnect());const t=this.iframeWrapper.getSessionID();if(t){if(t.expiry<Date.now())throw new Error("cannot reconnect, session expired");const e=new URL(yield this._provider.getReconnectionUrl());e.searchParams.set("sessionID",t.id);const r=new Jt(e.toString());return yield r.open(),void(yield this.waitForConnect())}throw new Error("cannot reconnect, no session found")}))}get chainId(){return this._provider.chainId}beginLogin(t){return r(this,void 0,void 0,(function*(){const e=new Jt(t);return yield e.open(),yield this.waitForConnect()}))}waitForConnect(){return new Promise((t=>{if(this.connected)return t(this._provider);this._provider.once("connect",(()=>t(this._provider)))}))}setAppConfig(){return r(this,void 0,void 0,(function*(){const t=yield function(t,e){return r(this,void 0,void 0,(function*(){const r=new URL(`/api/v1/get-app-theme/?id=${t}`,e);return yield(yield fetch(r.toString())).json()}))}(this.appId,this.networkConfig.gatewayUrl),e=function(t,e,r){const n=new URL(`/api/v2/app/${t}/logo?type=${e}`,r);return{horizontal:`${n.toString()}&orientation=horizontal`,vertical:`${n.toString()}&orientation=vertical`}}(this.appId,this.params.theme,this.networkConfig.gatewayUrl),n=t.logo.dark_horizontal||t.logo.light_horizontal,i=t.logo.dark_vertical||t.logo.light_vertical;this.appConfig={name:t.name,chainType:xt.solana_cv25519,themeConfig:{assets:{logo:{horizontal:n?e.horizontal:"",vertical:i?e.vertical:""}},theme:this.params.theme}}}))}waitForInit(){return r(this,void 0,void 0,(function*(){const t=new Promise((t=>{this.initPromises.push(t)}));return yield t}))}resolveInitPromises(){const t=this.initPromises;this.initPromises=[];for(const e of t)e(this)}get provider(){if(this._provider)return this._provider;throw rt}get solana(){if(this._solanaAPI)return this._solanaAPI;throw rt}get logo(){if(this.initStatus===Et.DONE)return this.appConfig.themeConfig.assets.logo;throw rt}get theme(){if(this.initStatus===Et.DONE)return this.appConfig.themeConfig.theme;throw rt}setProviders(){var t,e,r;const n=window;try{n.arcana=null!==(t=n.arcana)&&void 0!==t?t:{},n.arcana.provider=this._provider}catch(t){}if(this.params.setWindowProvider)try{n.ethereum=null!==(e=n.ethereum)&&void 0!==e?e:this._provider,n.ethereum.providers=null!==(r=n.ethereum.providers)&&void 0!==r?r:[],n.ethereum.providers.push(this._provider)}catch(t){console.error(t)}}standaloneMode(t,e){this._standaloneMode={mode:t,handler:e}}},Object.defineProperty(t,"__esModule",{value:!0})}));